(self.webpackChunkheyanai_navigation=self.webpackChunkheyanai_navigation||[]).push([[261],{51042:function(Dr,Le,lt){"use strict";var h=lt(1413),st=lt(67294),ge=lt(42110),zt=lt(98615),ut=function(yt,ct){return st.createElement(zt.Z,(0,h.Z)((0,h.Z)({},yt),{},{ref:ct,icon:ge.Z}))};ut.displayName="PlusOutlined",Le.Z=st.forwardRef(ut)},64317:function(Dr,Le,lt){"use strict";var h=lt(1413),st=lt(91),ge=lt(22270),zt=lt(67294),ut=lt(66758),Et=lt(86682),yt=lt(85893),ct=["fieldProps","children","params","proFieldProps","mode","valueEnum","request","showSearch","options"],Ae=["fieldProps","children","params","proFieldProps","mode","valueEnum","request","options"],le=zt.forwardRef(function(G,he){var Ue=G.fieldProps,Ie=G.children,pn=G.params,jt=G.proFieldProps,At=G.mode,Gt=G.valueEnum,Ct=G.request,_e=G.showSearch,Ye=G.options,Ht=(0,st.Z)(G,ct),Jt=(0,zt.useContext)(ut.Z);return(0,yt.jsx)(Et.Z,(0,h.Z)((0,h.Z)({valueEnum:(0,ge.h)(Gt),request:Ct,params:pn,valueType:"select",filedConfig:{customLightMode:!0},fieldProps:(0,h.Z)({options:Ye,mode:At,showSearch:_e,getPopupContainer:Jt.getPopupContainer},Ue),ref:he,proFieldProps:jt},Ht),{},{children:Ie}))}),Wt=zt.forwardRef(function(G,he){var Ue=G.fieldProps,Ie=G.children,pn=G.params,jt=G.proFieldProps,At=G.mode,Gt=G.valueEnum,Ct=G.request,_e=G.options,Ye=(0,st.Z)(G,Ae),Ht=(0,h.Z)({options:_e,mode:At||"multiple",labelInValue:!0,showSearch:!0,showArrow:!1,autoClearSearchValue:!0,optionLabelProp:"label"},Ue),Jt=(0,zt.useContext)(ut.Z);return(0,yt.jsx)(Et.Z,(0,h.Z)((0,h.Z)({valueEnum:(0,ge.h)(Gt),request:Ct,params:pn,valueType:"select",filedConfig:{customLightMode:!0},fieldProps:(0,h.Z)({getPopupContainer:Jt.getPopupContainer},Ht),ref:he,proFieldProps:jt},Ye),{},{children:Ie}))}),ce=le,$t=Wt,re=ce;re.SearchSelect=$t,re.displayName="ProFormComponent",Le.Z=re},5966:function(Dr,Le,lt){"use strict";var h=lt(1413),st=lt(91),ge=lt(67294),zt=lt(86682),ut=lt(85893),Et=["fieldProps","proFieldProps"],yt=["fieldProps","proFieldProps"],ct="text",Ae=function($t){var re=$t.fieldProps,G=$t.proFieldProps,he=(0,st.Z)($t,Et);return(0,ut.jsx)(zt.Z,(0,h.Z)({valueType:ct,fieldProps:re,filedConfig:{valueType:ct},proFieldProps:G},he))},le=function($t){var re=$t.fieldProps,G=$t.proFieldProps,he=(0,st.Z)($t,yt);return(0,ut.jsx)(zt.Z,(0,h.Z)({valueType:"password",fieldProps:re,proFieldProps:G,filedConfig:{valueType:ct}},he))},Wt=Ae;Wt.Password=le,Wt.displayName="ProFormComponent",Le.Z=Wt},67135:function(Dr,Le,lt){(function(h,st){st(Le,lt(62466))})(this,function(h,st){"use strict";var ge={draw:"crosshair",pointHover:"pointer",pointDrag:"move",lineHover:"pointer",lineDrag:"move",polygonHover:"pointer",polygonDrag:"move"},zt={point:[],line:[],polygon:[],midPoint:[],dashLine:[],text:[]},ut="top",Et="bottom",yt="right",ct="left",Ae="auto",le=[ut,Et,yt,ct],Wt="start",ce="end",$t="clippingParents",re="viewport",G="popper",he="reference",Ue=le.reduce(function(t,n){return t.concat([n+"-"+Wt,n+"-"+ce])},[]),Ie=[].concat(le,[Ae]).reduce(function(t,n){return t.concat([n,n+"-"+Wt,n+"-"+ce])},[]),pn=["beforeRead","read","afterRead","beforeMain","main","afterMain","beforeWrite","write","afterWrite"];function jt(t){return t?(t.nodeName||"").toLowerCase():null}function At(t){if(t==null)return window;if(""+t!="[object Window]"){var n=t.ownerDocument;return n&&n.defaultView||window}return t}function Gt(t){return t instanceof At(t).Element||t instanceof Element}function Ct(t){return t instanceof At(t).HTMLElement||t instanceof HTMLElement}function _e(t){return typeof ShadowRoot!="undefined"&&(t instanceof At(t).ShadowRoot||t instanceof ShadowRoot)}var Ye={name:"applyStyles",enabled:!0,phase:"write",fn:function(t){var n=t.state;Object.keys(n.elements).forEach(function(r){var e=n.styles[r]||{},i=n.attributes[r]||{},o=n.elements[r];Ct(o)&&jt(o)&&(Object.assign(o.style,e),Object.keys(i).forEach(function(a){var s=i[a];s===!1?o.removeAttribute(a):o.setAttribute(a,s===!0?"":s)}))})},effect:function(t){var n=t.state,r={popper:{position:n.options.strategy,left:"0",top:"0",margin:"0"},arrow:{position:"absolute"},reference:{}};return Object.assign(n.elements.popper.style,r.popper),n.styles=r,n.elements.arrow&&Object.assign(n.elements.arrow.style,r.arrow),function(){Object.keys(n.elements).forEach(function(e){var i=n.elements[e],o=n.attributes[e]||{},a=Object.keys(n.styles.hasOwnProperty(e)?n.styles[e]:r[e]).reduce(function(s,u){return s[u]="",s},{});Ct(i)&&jt(i)&&(Object.assign(i.style,a),Object.keys(o).forEach(function(s){i.removeAttribute(s)}))})}},requires:["computeStyles"]};function Ht(t){return t.split("-")[0]}var Jt=Math.max,Un=Math.min,Xe=Math.round;function Er(){var t=navigator.userAgentData;return t!=null&&t.brands&&Array.isArray(t.brands)?t.brands.map(function(n){return n.brand+"/"+n.version}).join(" "):navigator.userAgent}function Ui(){return!/^((?!chrome|android).)*safari/i.test(Er())}function ze(t,n,r){n===void 0&&(n=!1),r===void 0&&(r=!1);var e=t.getBoundingClientRect(),i=1,o=1;n&&Ct(t)&&(i=t.offsetWidth>0&&Xe(e.width)/t.offsetWidth||1,o=t.offsetHeight>0&&Xe(e.height)/t.offsetHeight||1);var a=(Gt(t)?At(t):window).visualViewport,s=!Ui()&&r,u=(e.left+(s&&a?a.offsetLeft:0))/i,l=(e.top+(s&&a?a.offsetTop:0))/o,c=e.width/i,f=e.height/o;return{width:c,height:f,top:l,right:u+c,bottom:l+f,left:u,x:u,y:l}}function wr(t){var n=ze(t),r=t.offsetWidth,e=t.offsetHeight;return Math.abs(n.width-r)>1||(r=n.width),Math.abs(n.height-e)>1||(e=n.height),{x:t.offsetLeft,y:t.offsetTop,width:r,height:e}}function Ii(t,n){var r=n.getRootNode&&n.getRootNode();if(t.contains(n))return!0;if(r&&_e(r)){var e=n;do{if(e&&t.isSameNode(e))return!0;e=e.parentNode||e.host}while(e)}return!1}function de(t){return At(t).getComputedStyle(t)}function Ss(t){return["table","td","th"].indexOf(jt(t))>=0}function ye(t){return((Gt(t)?t.ownerDocument:t.document)||window.document).documentElement}function In(t){return jt(t)==="html"?t:t.assignedSlot||t.parentNode||(_e(t)?t.host:null)||ye(t)}function Yi(t){return Ct(t)&&de(t).position!=="fixed"?t.offsetParent:null}function vn(t){for(var n=At(t),r=Yi(t);r&&Ss(r)&&de(r).position==="static";)r=Yi(r);return r&&(jt(r)==="html"||jt(r)==="body"&&de(r).position==="static")?n:r||function(e){var i=/firefox/i.test(Er());if(/Trident/i.test(Er())&&Ct(e)&&de(e).position==="fixed")return null;var o=In(e);for(_e(o)&&(o=o.host);Ct(o)&&0>["html","body"].indexOf(jt(o));){var a=de(o);if(a.transform!=="none"||a.perspective!=="none"||a.contain==="paint"||["transform","perspective"].indexOf(a.willChange)!==-1||i&&a.willChange==="filter"||i&&a.filter&&a.filter!=="none")return o;o=o.parentNode}return null}(t)||n}function Pr(t){return 0>["top","bottom"].indexOf(t)?"y":"x"}function gn(t,n,r){return Jt(t,Un(n,r))}function Xi(t){return Object.assign({},{top:0,right:0,bottom:0,left:0},t)}function zi(t,n){return n.reduce(function(r,e){return r[e]=t,r},{})}var Ts={name:"arrow",enabled:!0,phase:"main",fn:function(t){var n,r=t.state,e=t.name,i=t.options,o=r.elements.arrow,a=r.modifiersData.popperOffsets,s=Ht(r.placement),u=Pr(s),l=[ct,yt].indexOf(s)>=0?"height":"width";if(o&&a){var c=function(E,w){return Xi(typeof(E=typeof E=="function"?E(Object.assign({},w.rects,{placement:w.placement})):E)!="number"?E:zi(E,le))}(i.padding,r),f=wr(o),p=u==="y"?ut:ct,b=u==="y"?Et:yt,D=r.rects.reference[l]+r.rects.reference[u]-a[u]-r.rects.popper[l],m=a[u]-r.rects.reference[u],y=vn(o),v=y?u==="y"?y.clientHeight||0:y.clientWidth||0:0,g=v/2-f[l]/2+(D/2-m/2),d=gn(c[p],g,v-f[l]-c[b]);r.modifiersData[e]=((n={})[u]=d,n.centerOffset=d-g,n)}},effect:function(t){var n=t.state,r=t.options.element,e=r===void 0?"[data-popper-arrow]":r;e!=null&&(typeof e!="string"||(e=n.elements.popper.querySelector(e)))&&Ii(n.elements.popper,e)&&(n.elements.arrow=e)},requires:["popperOffsets"],requiresIfExists:["preventOverflow"]};function We(t){return t.split("-")[1]}var js={top:"auto",right:"auto",bottom:"auto",left:"auto"};function Wi(t){var n,r=t.popper,e=t.popperRect,i=t.placement,o=t.variation,a=t.offsets,s=t.position,u=t.gpuAcceleration,l=t.adaptive,c=t.roundOffsets,f=t.isFixed,p=a.x,b=p===void 0?0:p,D=a.y,m=D===void 0?0:D,y=typeof c=="function"?c({x:b,y:m}):{x:b,y:m};b=y.x,m=y.y;var v=a.hasOwnProperty("x"),g=a.hasOwnProperty("y"),d=ct,E=ut,w=window;if(l){var k=vn(r),C="clientHeight",A="clientWidth";k===At(r)&&de(k=ye(r)).position!=="static"&&s==="absolute"&&(C="scrollHeight",A="scrollWidth"),(i===ut||(i===ct||i===yt)&&o===ce)&&(E=Et,m-=(f&&k===w&&w.visualViewport?w.visualViewport.height:k[C])-e.height,m*=u?1:-1),(i===ct||(i===ut||i===Et)&&o===ce)&&(d=yt,b-=(f&&k===w&&w.visualViewport?w.visualViewport.width:k[A])-e.width,b*=u?1:-1)}var T,X=Object.assign({position:s},l&&js),j=c===!0?function(H,V){var _=H.y,B=V.devicePixelRatio||1;return{x:Xe(H.x*B)/B||0,y:Xe(_*B)/B||0}}({x:b,y:m},At(r)):{x:b,y:m};return b=j.x,m=j.y,Object.assign({},X,u?((T={})[E]=g?"0":"",T[d]=v?"0":"",T.transform=(w.devicePixelRatio||1)>1?"translate3d("+b+"px, "+m+"px, 0)":"translate("+b+"px, "+m+"px)",T):((n={})[E]=g?m+"px":"",n[d]=v?b+"px":"",n.transform="",n))}var Yn={passive:!0},Hs={left:"right",right:"left",bottom:"top",top:"bottom"};function Xn(t){return t.replace(/left|right|bottom|top/g,function(n){return Hs[n]})}var Fs={start:"end",end:"start"};function Vi(t){return t.replace(/start|end/g,function(n){return Fs[n]})}function xr(t){var n=At(t);return{scrollLeft:n.pageXOffset,scrollTop:n.pageYOffset}}function kr(t){return ze(ye(t)).left+xr(t).scrollLeft}function Mr(t){var n=de(t);return/auto|scroll|overlay|hidden/.test(n.overflow+n.overflowY+n.overflowX)}function qi(t){return 0>["html","body","#document"].indexOf(jt(t))?Ct(t)&&Mr(t)?t:qi(In(t)):t.ownerDocument.body}function yn(t,n){var r;n===void 0&&(n=[]);var e=qi(t),i=e===((r=t.ownerDocument)==null?void 0:r.body),o=At(e),a=i?[o].concat(o.visualViewport||[],Mr(e)?e:[]):e,s=n.concat(a);return i?s:s.concat(yn(In(a)))}function Lr(t){return Object.assign({},t,{left:t.x,top:t.y,right:t.x+t.width,bottom:t.y+t.height})}function Zi(t,n,r){return n===re?Lr(function(e,i){var o=At(e),a=ye(e),s=o.visualViewport,u=a.clientWidth,l=a.clientHeight,c=0,f=0;if(s){u=s.width,l=s.height;var p=Ui();(p||!p&&i==="fixed")&&(c=s.offsetLeft,f=s.offsetTop)}return{width:u,height:l,x:c+kr(e),y:f}}(t,r)):Gt(n)?function(e,i){var o=ze(e,!1,i==="fixed");return o.top=o.top+e.clientTop,o.left=o.left+e.clientLeft,o.bottom=o.top+e.clientHeight,o.right=o.left+e.clientWidth,o.width=e.clientWidth,o.height=e.clientHeight,o.x=o.left,o.y=o.top,o}(n,r):Lr(function(e){var i,o=ye(e),a=xr(e),s=(i=e.ownerDocument)==null?void 0:i.body,u=Jt(o.scrollWidth,o.clientWidth,s?s.scrollWidth:0,s?s.clientWidth:0),l=Jt(o.scrollHeight,o.clientHeight,s?s.scrollHeight:0,s?s.clientHeight:0),c=-a.scrollLeft+kr(e),f=-a.scrollTop;return de(s||o).direction==="rtl"&&(c+=Jt(o.clientWidth,s?s.clientWidth:0)-u),{width:u,height:l,x:c,y:f}}(ye(t)))}function Bs(t,n,r,e){var i=n==="clippingParents"?function(s){var u=yn(In(s)),l=["absolute","fixed"].indexOf(de(s).position)>=0&&Ct(s)?vn(s):s;return Gt(l)?u.filter(function(c){return Gt(c)&&Ii(c,l)&&jt(c)!=="body"}):[]}(t):[].concat(n),o=[].concat(i,[r]),a=o.reduce(function(s,u){var l=Zi(t,u,e);return s.top=Jt(l.top,s.top),s.right=Un(l.right,s.right),s.bottom=Un(l.bottom,s.bottom),s.left=Jt(l.left,s.left),s},Zi(t,o[0],e));return a.width=a.right-a.left,a.height=a.bottom-a.top,a.x=a.left,a.y=a.top,a}function Ki(t){var n,r=t.reference,e=t.element,i=t.placement,o=i?Ht(i):null,a=i?We(i):null,s=r.x+r.width/2-e.width/2,u=r.y+r.height/2-e.height/2;switch(o){case ut:n={x:s,y:r.y-e.height};break;case Et:n={x:s,y:r.y+r.height};break;case yt:n={x:r.x+r.width,y:u};break;case ct:n={x:r.x-e.width,y:u};break;default:n={x:r.x,y:r.y}}var l=o?Pr(o):null;if(l!=null){var c=l==="y"?"height":"width";switch(a){case Wt:n[l]=n[l]-(r[c]/2-e[c]/2);break;case ce:n[l]=n[l]+(r[c]/2-e[c]/2)}}return n}function mn(t,n){n===void 0&&(n={});var r=n.placement,e=r===void 0?t.placement:r,i=n.strategy,o=i===void 0?t.strategy:i,a=n.boundary,s=a===void 0?$t:a,u=n.rootBoundary,l=u===void 0?re:u,c=n.elementContext,f=c===void 0?G:c,p=n.altBoundary,b=p!==void 0&&p,D=n.padding,m=D===void 0?0:D,y=Xi(typeof m!="number"?m:zi(m,le)),v=t.rects.popper,g=t.elements[b?f===G?he:G:f],d=Bs(Gt(g)?g:g.contextElement||ye(t.elements.popper),s,l,o),E=ze(t.elements.reference),w=Ki({reference:E,element:v,strategy:"absolute",placement:e}),k=Lr(Object.assign({},v,w)),C=f===G?k:E,A={top:d.top-C.top+y.top,bottom:C.bottom-d.bottom+y.bottom,left:d.left-C.left+y.left,right:C.right-d.right+y.right},T=t.modifiersData.offset;if(f===G&&T){var X=T[e];Object.keys(A).forEach(function(j){var H=0>[yt,Et].indexOf(j)?-1:1;A[j]+=X[0>[ut,Et].indexOf(j)?"x":"y"]*H})}return A}function Ns(t,n){n===void 0&&(n={});var r=n.boundary,e=n.rootBoundary,i=n.padding,o=n.flipVariations,a=n.allowedAutoPlacements,s=a===void 0?Ie:a,u=We(n.placement),l=u?o?Ue:Ue.filter(function(p){return We(p)===u}):le,c=l.filter(function(p){return s.indexOf(p)>=0});c.length===0&&(c=l);var f=c.reduce(function(p,b){return p[b]=mn(t,{placement:b,boundary:r,rootBoundary:e,padding:i})[Ht(b)],p},{});return Object.keys(f).sort(function(p,b){return f[p]-f[b]})}var Us={name:"flip",enabled:!0,phase:"main",fn:function(t){var n=t.state,r=t.options,e=t.name;if(!n.modifiersData[e]._skip){for(var i=r.mainAxis,o=i===void 0||i,a=r.altAxis,s=a===void 0||a,u=r.fallbackPlacements,l=r.padding,c=r.boundary,f=r.rootBoundary,p=r.altBoundary,b=r.flipVariations,D=b===void 0||b,m=r.allowedAutoPlacements,y=n.options.placement,v=Ht(y),g=u||(v===y||!D?[Xn(y)]:function(O){if(Ht(O)===Ae)return[];var U=Xn(O);return[Vi(O),U,Vi(U)]}(y)),d=[y].concat(g).reduce(function(O,U){return O.concat(Ht(U)===Ae?Ns(n,{placement:U,boundary:c,rootBoundary:f,padding:l,flipVariations:D,allowedAutoPlacements:m}):U)},[]),E=n.rects.reference,w=n.rects.popper,k=new Map,C=!0,A=d[0],T=0;d.length>T;T++){var X=d[T],j=Ht(X),H=We(X)===Wt,V=[ut,Et].indexOf(j)>=0,_=V?"width":"height",B=mn(n,{placement:X,boundary:c,rootBoundary:f,altBoundary:p,padding:l}),F=V?H?yt:ct:H?Et:ut;E[_]>w[_]&&(F=Xn(F));var L=Xn(F),I=[];if(o&&I.push(0>=B[j]),s&&I.push(0>=B[F],0>=B[L]),I.every(function(O){return O})){A=X,C=!1;break}k.set(X,I)}if(C)for(var z=function(O){var U=d.find(function(J){var W=k.get(J);if(W)return W.slice(0,O).every(function(at){return at})});if(U)return A=U,"break"},M=D?3:1;M>0&&z(M)!=="break";M--);n.placement!==A&&(n.modifiersData[e]._skip=!0,n.placement=A,n.reset=!0)}},requiresIfExists:["offset"],data:{_skip:!1}};function $i(t,n,r){return r===void 0&&(r={x:0,y:0}),{top:t.top-n.height-r.y,right:t.right-n.width+r.x,bottom:t.bottom-n.height+r.y,left:t.left-n.width-r.x}}function Gi(t){return[ut,yt,Et,ct].some(function(n){return t[n]>=0})}var Is={name:"offset",enabled:!0,phase:"main",requires:["popperOffsets"],fn:function(t){var n=t.state,r=t.name,e=t.options.offset,i=e===void 0?[0,0]:e,o=Ie.reduce(function(u,l){return u[l]=function(c,f,p){var b=Ht(c),D=0>[ct,ut].indexOf(b)?1:-1,m=typeof p=="function"?p(Object.assign({},f,{placement:c})):p,y=m[0],v=m[1];return y=y||0,v=(v||0)*D,0>[ct,yt].indexOf(b)?{x:y,y:v}:{x:v,y}}(l,n.rects,i),u},{}),a=o[n.placement],s=a.y;n.modifiersData.popperOffsets!=null&&(n.modifiersData.popperOffsets.x+=a.x,n.modifiersData.popperOffsets.y+=s),n.modifiersData[r]=o}},Ys={name:"preventOverflow",enabled:!0,phase:"main",fn:function(t){var n=t.state,r=t.options,e=t.name,i=r.mainAxis,o=i===void 0||i,a=r.altAxis,s=a!==void 0&&a,u=r.tether,l=u===void 0||u,c=r.tetherOffset,f=c===void 0?0:c,p=mn(n,{boundary:r.boundary,rootBoundary:r.rootBoundary,padding:r.padding,altBoundary:r.altBoundary}),b=Ht(n.placement),D=We(n.placement),m=!D,y=Pr(b),v=y==="x"?"y":"x",g=n.modifiersData.popperOffsets,d=n.rects.reference,E=n.rects.popper,w=typeof f=="function"?f(Object.assign({},n.rects,{placement:n.placement})):f,k=typeof w=="number"?{mainAxis:w,altAxis:w}:Object.assign({mainAxis:0,altAxis:0},w),C=n.modifiersData.offset?n.modifiersData.offset[n.placement]:null,A={x:0,y:0};if(g){if(o){var T,X=y==="y"?ut:ct,j=y==="y"?Et:yt,H=y==="y"?"height":"width",V=g[y],_=V+p[X],B=V-p[j],F=l?-E[H]/2:0,L=D===Wt?d[H]:E[H],I=D===Wt?-E[H]:-d[H],z=n.elements.arrow,M=l&&z?wr(z):{width:0,height:0},O=n.modifiersData["arrow#persistent"]?n.modifiersData["arrow#persistent"].padding:{top:0,right:0,bottom:0,left:0},U=O[X],J=O[j],W=gn(0,d[H],M[H]),at=m?d[H]/2-F-W-U-k.mainAxis:L-W-U-k.mainAxis,Z=m?-d[H]/2+F+W+J+k.mainAxis:I+W+J+k.mainAxis,$=n.elements.arrow&&vn(n.elements.arrow),Pt=(T=C==null?void 0:C[y])!=null?T:0,vt=V+Z-Pt,xt=gn(l?Un(_,V+at-Pt-($?y==="y"?$.clientTop||0:$.clientLeft||0:0)):_,V,l?Jt(B,vt):B);g[y]=xt,A[y]=xt-V}if(s){var kt,bt=g[v],gt=v==="y"?"height":"width",_t=bt+p[y==="x"?ut:ct],Ot=bt-p[y==="x"?Et:yt],Mt=[ut,ct].indexOf(b)!==-1,Lt=(kt=C==null?void 0:C[v])!=null?kt:0,Nt=Mt?_t:bt-d[gt]-E[gt]-Lt+k.altAxis,It=Mt?bt+d[gt]+E[gt]-Lt-k.altAxis:Ot,P=l&&Mt?function(N,Y,q){var K=gn(N,Y,q);return K>q?q:K}(Nt,bt,It):gn(l?Nt:_t,bt,l?It:Ot);g[v]=P,A[v]=P-bt}n.modifiersData[e]=A}},requiresIfExists:["offset"]};function Xs(t,n,r){r===void 0&&(r=!1);var e,i,o=Ct(n),a=Ct(n)&&function(f){var p=f.getBoundingClientRect(),b=Xe(p.width)/f.offsetWidth||1,D=Xe(p.height)/f.offsetHeight||1;return b!==1||D!==1}(n),s=ye(n),u=ze(t,a,r),l={scrollLeft:0,scrollTop:0},c={x:0,y:0};return(o||!o&&!r)&&((jt(n)!=="body"||Mr(s))&&(l=(e=n)!==At(e)&&Ct(e)?{scrollLeft:(i=e).scrollLeft,scrollTop:i.scrollTop}:xr(e)),Ct(n)?((c=ze(n,!0)).x+=n.clientLeft,c.y+=n.clientTop):s&&(c.x=kr(s))),{x:u.left+l.scrollLeft-c.x,y:u.top+l.scrollTop-c.y,width:u.width,height:u.height}}function zs(t){var n=new Map,r=new Set,e=[];function i(o){r.add(o.name),[].concat(o.requires||[],o.requiresIfExists||[]).forEach(function(a){if(!r.has(a)){var s=n.get(a);s&&i(s)}}),e.push(o)}return t.forEach(function(o){n.set(o.name,o)}),t.forEach(function(o){r.has(o.name)||i(o)}),e}var Ji={placement:"bottom",modifiers:[],strategy:"absolute"};function Qi(){for(var t=arguments.length,n=Array(t),r=0;t>r;r++)n[r]=arguments[r];return!n.some(function(e){return!(e&&typeof e.getBoundingClientRect=="function")})}function Ws(t){t===void 0&&(t={});var n=t.defaultModifiers,r=n===void 0?[]:n,e=t.defaultOptions,i=e===void 0?Ji:e;return function(o,a,s){s===void 0&&(s=i);var u,l,c={placement:"bottom",orderedModifiers:[],options:Object.assign({},Ji,i),modifiersData:{},elements:{reference:o,popper:a},attributes:{},styles:{}},f=[],p=!1,b={state:c,setOptions:function(m){var y=typeof m=="function"?m(c.options):m;D(),c.options=Object.assign({},i,c.options,y),c.scrollParents={reference:Gt(o)?yn(o):o.contextElement?yn(o.contextElement):[],popper:yn(a)};var v,g,d=function(E){var w=zs(E);return pn.reduce(function(k,C){return k.concat(w.filter(function(A){return A.phase===C}))},[])}((v=[].concat(r,c.options.modifiers),g=v.reduce(function(E,w){var k=E[w.name];return E[w.name]=k?Object.assign({},k,w,{options:Object.assign({},k.options,w.options),data:Object.assign({},k.data,w.data)}):w,E},{}),Object.keys(g).map(function(E){return g[E]})));return c.orderedModifiers=d.filter(function(E){return E.enabled}),c.orderedModifiers.forEach(function(E){var w=E.options,k=E.effect;if(typeof k=="function"){var C=k({state:c,name:E.name,instance:b,options:w===void 0?{}:w});f.push(C||function(){})}}),b.update()},forceUpdate:function(){if(!p){var m=c.elements,y=m.reference,v=m.popper;if(Qi(y,v)){c.rects={reference:Xs(y,vn(v),c.options.strategy==="fixed"),popper:wr(v)},c.reset=!1,c.placement=c.options.placement,c.orderedModifiers.forEach(function(k){return c.modifiersData[k.name]=Object.assign({},k.data)});for(var g=0;c.orderedModifiers.length>g;g++)if(c.reset!==!0){var d=c.orderedModifiers[g],E=d.fn,w=d.options;typeof E=="function"&&(c=E({state:c,options:w===void 0?{}:w,name:d.name,instance:b})||c)}else c.reset=!1,g=-1}}},update:(u=function(){return new Promise(function(m){b.forceUpdate(),m(c)})},function(){return l||(l=new Promise(function(m){Promise.resolve().then(function(){l=void 0,m(u())})})),l}),destroy:function(){D(),p=!0}};if(!Qi(o,a))return b;function D(){f.forEach(function(m){return m()}),f=[]}return b.setOptions(s).then(function(m){!p&&s.onFirstUpdate&&s.onFirstUpdate(m)}),b}}var Vs=Ws({defaultModifiers:[{name:"eventListeners",enabled:!0,phase:"write",fn:function(){},effect:function(t){var n=t.state,r=t.instance,e=t.options,i=e.scroll,o=i===void 0||i,a=e.resize,s=a===void 0||a,u=At(n.elements.popper),l=[].concat(n.scrollParents.reference,n.scrollParents.popper);return o&&l.forEach(function(c){c.addEventListener("scroll",r.update,Yn)}),s&&u.addEventListener("resize",r.update,Yn),function(){o&&l.forEach(function(c){c.removeEventListener("scroll",r.update,Yn)}),s&&u.removeEventListener("resize",r.update,Yn)}},data:{}},{name:"popperOffsets",enabled:!0,phase:"read",fn:function(t){var n=t.state;n.modifiersData[t.name]=Ki({reference:n.rects.reference,element:n.rects.popper,strategy:"absolute",placement:n.placement})},data:{}},{name:"computeStyles",enabled:!0,phase:"beforeWrite",fn:function(t){var n=t.state,r=t.options,e=r.gpuAcceleration,i=e===void 0||e,o=r.adaptive,a=o===void 0||o,s=r.roundOffsets,u=s===void 0||s,l={placement:Ht(n.placement),variation:We(n.placement),popper:n.elements.popper,popperRect:n.rects.popper,gpuAcceleration:i,isFixed:n.options.strategy==="fixed"};n.modifiersData.popperOffsets!=null&&(n.styles.popper=Object.assign({},n.styles.popper,Wi(Object.assign({},l,{offsets:n.modifiersData.popperOffsets,position:n.options.strategy,adaptive:a,roundOffsets:u})))),n.modifiersData.arrow!=null&&(n.styles.arrow=Object.assign({},n.styles.arrow,Wi(Object.assign({},l,{offsets:n.modifiersData.arrow,position:"absolute",adaptive:!1,roundOffsets:u})))),n.attributes.popper=Object.assign({},n.attributes.popper,{"data-popper-placement":n.placement})},data:{}},Ye,Is,Us,Ys,Ts,{name:"hide",enabled:!0,phase:"main",requiresIfExists:["preventOverflow"],fn:function(t){var n=t.state,r=t.name,e=n.rects.reference,i=n.rects.popper,o=n.modifiersData.preventOverflow,a=mn(n,{elementContext:"reference"}),s=mn(n,{altBoundary:!0}),u=$i(a,e),l=$i(s,i,o),c=Gi(u),f=Gi(l);n.modifiersData[r]={referenceClippingOffsets:u,popperEscapeOffsets:l,isReferenceHidden:c,hasPopperEscaped:f},n.attributes.popper=Object.assign({},n.attributes.popper,{"data-popper-reference-hidden":c,"data-popper-escaped":f})}}]}),to="tippy-content",qs="tippy-backdrop",eo="tippy-arrow",no="tippy-svg-arrow",Oe={passive:!0,capture:!0},ro=function(){return document.body};function Ar(t,n,r){if(Array.isArray(t)){var e=t[n];return e==null?Array.isArray(r)?r[n]:r:e}return t}function _r(t,n){var r={}.toString.call(t);return r.indexOf("[object")===0&&r.indexOf(n+"]")>-1}function io(t,n){return typeof t=="function"?t.apply(void 0,n):t}function oo(t,n){return n===0?t:function(e){clearTimeout(r),r=setTimeout(function(){t(e)},n)};var r}function Ve(t){return[].concat(t)}function ao(t,n){t.indexOf(n)===-1&&t.push(n)}function zn(t){return[].slice.call(t)}function so(t){return Object.keys(t).reduce(function(n,r){return t[r]!==void 0&&(n[r]=t[r]),n},{})}function bn(){return document.createElement("div")}function Wn(t){return["Element","Fragment"].some(function(n){return _r(t,n)})}function uo(t){return _r(t,"MouseEvent")}function Zs(t){return Wn(t)?[t]:function(n){return _r(n,"NodeList")}(t)?zn(t):Array.isArray(t)?t:zn(document.querySelectorAll(t))}function Or(t,n){t.forEach(function(r){r&&(r.style.transitionDuration=n+"ms")})}function lo(t,n){t.forEach(function(r){r&&r.setAttribute("data-state",n)})}function co(t){var n,r=Ve(t)[0];return r!=null&&(n=r.ownerDocument)!=null&&n.body?r.ownerDocument:document}function Cr(t,n,r){var e=n+"EventListener";["transitionend","webkitTransitionEnd"].forEach(function(i){t[e](i,r)})}function ho(t,n){for(var r=n;r;){var e;if(t.contains(r))return!0;r=r.getRootNode==null||(e=r.getRootNode())==null?void 0:e.host}return!1}var ie={isTouch:!1},fo=0;function Ks(){ie.isTouch||(ie.isTouch=!0,window.performance&&document.addEventListener("mousemove",po))}function po(){var t=performance.now();20>t-fo&&(ie.isTouch=!1,document.removeEventListener("mousemove",po)),fo=t}function $s(){var t,n=document.activeElement;(t=n)&&t._tippy&&t._tippy.reference===t&&n.blur&&!n._tippy.state.isVisible&&n.blur()}var Gs=typeof window!="undefined"&&typeof document!="undefined"&&!!window.msCrypto,Qt=Object.assign({appendTo:ro,aria:{content:"auto",expanded:"auto"},delay:0,duration:[300,250],getReferenceClientRect:null,hideOnClick:!0,ignoreAttributes:!1,interactive:!1,interactiveBorder:2,interactiveDebounce:0,moveTransition:"",offset:[0,10],onAfterUpdate:function(){},onBeforeUpdate:function(){},onCreate:function(){},onDestroy:function(){},onHidden:function(){},onHide:function(){},onMount:function(){},onShow:function(){},onShown:function(){},onTrigger:function(){},onUntrigger:function(){},onClickOutside:function(){},placement:"top",plugins:[],popperOptions:{},render:null,showOnCreate:!1,touch:!0,trigger:"mouseenter focus",triggerTarget:null},{animateFill:!1,followCursor:!1,inlinePositioning:!1,sticky:!1},{allowHTML:!1,animation:"fade",arrow:!0,content:"",inertia:!1,maxWidth:350,role:"tooltip",theme:"",zIndex:9999}),Js=Object.keys(Qt);function vo(t){var n=(t.plugins||[]).reduce(function(r,e){var i,o=e.name;return o&&(r[o]=t[o]!==void 0?t[o]:(i=Qt[o])!=null?i:e.defaultValue),r},{});return Object.assign({},t,n)}function go(t,n){var r=Object.assign({},n,{content:io(n.content,[t])},n.ignoreAttributes?{}:function(e,i){return(i?Object.keys(vo(Object.assign({},Qt,{plugins:i}))):Js).reduce(function(o,a){var s=(e.getAttribute("data-tippy-"+a)||"").trim();if(!s)return o;if(a==="content")o[a]=s;else try{o[a]=JSON.parse(s)}catch(u){o[a]=s}return o},{})}(t,n.plugins));return r.aria=Object.assign({},Qt.aria,r.aria),r.aria={expanded:r.aria.expanded==="auto"?n.interactive:r.aria.expanded,content:r.aria.content==="auto"?n.interactive?null:"describedby":r.aria.content},r}var Qs=function(){return"innerHTML"};function Rr(t,n){t[Qs()]=n}function yo(t){var n=bn();return t===!0?n.className=eo:(n.className=no,Wn(t)?n.appendChild(t):Rr(n,t)),n}function mo(t,n){Wn(n.content)?(Rr(t,""),t.appendChild(n.content)):typeof n.content!="function"&&(n.allowHTML?Rr(t,n.content):t.textContent=n.content)}function Sr(t){var n=t.firstElementChild,r=zn(n.children);return{box:n,content:r.find(function(e){return e.classList.contains(to)}),arrow:r.find(function(e){return e.classList.contains(eo)||e.classList.contains(no)}),backdrop:r.find(function(e){return e.classList.contains(qs)})}}function bo(t){var n=bn(),r=bn();r.className="tippy-box",r.setAttribute("data-state","hidden"),r.setAttribute("tabindex","-1");var e=bn();function i(o,a){var s=Sr(n),u=s.box,l=s.content,c=s.arrow;a.theme?u.setAttribute("data-theme",a.theme):u.removeAttribute("data-theme"),typeof a.animation=="string"?u.setAttribute("data-animation",a.animation):u.removeAttribute("data-animation"),a.inertia?u.setAttribute("data-inertia",""):u.removeAttribute("data-inertia"),u.style.maxWidth=typeof a.maxWidth=="number"?a.maxWidth+"px":a.maxWidth,a.role?u.setAttribute("role",a.role):u.removeAttribute("role"),o.content===a.content&&o.allowHTML===a.allowHTML||mo(l,t.props),a.arrow?c?o.arrow!==a.arrow&&(u.removeChild(c),u.appendChild(yo(a.arrow))):u.appendChild(yo(a.arrow)):c&&u.removeChild(c)}return e.className=to,e.setAttribute("data-state","hidden"),mo(e,t.props),n.appendChild(r),r.appendChild(e),i(t.props,t.props),{popper:n,onUpdate:i}}bo.$$tippy=!0;var tu=1,Vn=[],Tr=[];function eu(t,n){var r,e,i,o,a,s,u,l,c=go(t,Object.assign({},Qt,vo(so(n)))),f=!1,p=!1,b=!1,D=!1,m=[],y=oo(kt,c.interactiveDebounce),v=tu++,g=(l=c.plugins).filter(function(P,N){return l.indexOf(P)===N}),d={id:v,reference:t,popper:bn(),popperInstance:null,props:c,state:{isEnabled:!0,isVisible:!1,isDestroyed:!1,isMounted:!1,isShown:!1},plugins:g,clearDelayTimeouts:function(){clearTimeout(r),clearTimeout(e),cancelAnimationFrame(i)},setProps:function(P){if(!d.state.isDestroyed){L("onBeforeUpdate",[d,P]),vt();var N=d.props,Y=go(t,Object.assign({},N,so(P),{ignoreAttributes:!0}));d.props=Y,Pt(),N.interactiveDebounce!==Y.interactiveDebounce&&(M(),y=oo(kt,Y.interactiveDebounce)),N.triggerTarget&&!Y.triggerTarget?Ve(N.triggerTarget).forEach(function(q){q.removeAttribute("aria-expanded")}):Y.triggerTarget&&t.removeAttribute("aria-expanded"),z(),F(),k&&k(N,Y),d.popperInstance&&(Ot(),Lt().forEach(function(q){requestAnimationFrame(q._tippy.popperInstance.forceUpdate)})),L("onAfterUpdate",[d,P])}},setContent:function(P){d.setProps({content:P})},show:function(){var P=d.state.isVisible,N=d.state.isDestroyed,Y=!d.state.isEnabled,q=ie.isTouch&&!d.props.touch,K=Ar(d.props.duration,0,Qt.duration);if(!(P||N||Y||q)&&!H().hasAttribute("disabled")&&(L("onShow",[d],!1),d.props.onShow(d)!==!1)){if(d.state.isVisible=!0,j()&&(w.style.visibility="visible"),F(),W(),d.state.isMounted||(w.style.transition="none"),j()){var Dt=_();Or([Dt.box,Dt.content],0)}s=function(){var dt;if(d.state.isVisible&&!D){if(D=!0,w.style.transition=d.props.moveTransition,j()&&d.props.animation){var Yt=_(),Xt=Yt.box,Kt=Yt.content;Or([Xt,Kt],K),lo([Xt,Kt],"visible")}I(),z(),ao(Tr,d),(dt=d.popperInstance)==null||dt.forceUpdate(),L("onMount",[d]),d.props.animation&&j()&&function(fn,se){Z(fn,se)}(K,function(){d.state.isShown=!0,L("onShown",[d])})}},function(){var dt,Yt=d.props.appendTo,Xt=H();dt=d.props.interactive&&Yt===ro||Yt==="parent"?Xt.parentNode:io(Yt,[Xt]),dt.contains(w)||dt.appendChild(w),d.state.isMounted=!0,Ot()}()}},hide:function(){var P=!d.state.isVisible,N=d.state.isDestroyed,Y=!d.state.isEnabled,q=Ar(d.props.duration,1,Qt.duration);if(!(P||N||Y)&&(L("onHide",[d],!1),d.props.onHide(d)!==!1)){if(d.state.isVisible=!1,d.state.isShown=!1,D=!1,f=!1,j()&&(w.style.visibility="hidden"),M(),at(),F(!0),j()){var K=_(),Dt=K.box,dt=K.content;d.props.animation&&(Or([Dt,dt],q),lo([Dt,dt],"hidden"))}I(),z(),d.props.animation?j()&&function(Yt,Xt){Z(Yt,function(){!d.state.isVisible&&w.parentNode&&w.parentNode.contains(w)&&Xt()})}(q,d.unmount):d.unmount()}},hideWithInteractivity:function(P){V().addEventListener("mousemove",y),ao(Vn,y),y(P)},enable:function(){d.state.isEnabled=!0},disable:function(){d.hide(),d.state.isEnabled=!1},unmount:function(){d.state.isVisible&&d.hide(),d.state.isMounted&&(Mt(),Lt().forEach(function(P){P._tippy.unmount()}),w.parentNode&&w.parentNode.removeChild(w),Tr=Tr.filter(function(P){return P!==d}),d.state.isMounted=!1,L("onHidden",[d]))},destroy:function(){d.state.isDestroyed||(d.clearDelayTimeouts(),d.unmount(),vt(),delete t._tippy,d.state.isDestroyed=!0,L("onDestroy",[d]))}};if(!c.render)return d;var E=c.render(d),w=E.popper,k=E.onUpdate;w.setAttribute("data-tippy-root",""),w.id="tippy-"+d.id,d.popper=w,t._tippy=d,w._tippy=d;var C=g.map(function(P){return P.fn(d)}),A=t.hasAttribute("aria-expanded");return Pt(),z(),F(),L("onCreate",[d]),c.showOnCreate&&Nt(),w.addEventListener("mouseenter",function(){d.props.interactive&&d.state.isVisible&&d.clearDelayTimeouts()}),w.addEventListener("mouseleave",function(){d.props.interactive&&d.props.trigger.indexOf("mouseenter")>=0&&V().addEventListener("mousemove",y)}),d;function T(){var P=d.props.touch;return Array.isArray(P)?P:[P,0]}function X(){return T()[0]==="hold"}function j(){var P;return!((P=d.props.render)==null||!P.$$tippy)}function H(){return u||t}function V(){var P=H().parentNode;return P?co(P):document}function _(){return Sr(w)}function B(P){return d.state.isMounted&&!d.state.isVisible||ie.isTouch||o&&o.type==="focus"?0:Ar(d.props.delay,P?0:1,Qt.delay)}function F(P){P===void 0&&(P=!1),w.style.pointerEvents=d.props.interactive&&!P?"":"none",w.style.zIndex=""+d.props.zIndex}function L(P,N,Y){var q;Y===void 0&&(Y=!0),C.forEach(function(K){K[P]&&K[P].apply(K,N)}),Y&&(q=d.props)[P].apply(q,N)}function I(){var P=d.props.aria;if(P.content){var N="aria-"+P.content,Y=w.id;Ve(d.props.triggerTarget||t).forEach(function(q){var K=q.getAttribute(N);if(d.state.isVisible)q.setAttribute(N,K?K+" "+Y:Y);else{var Dt=K&&K.replace(Y,"").trim();Dt?q.setAttribute(N,Dt):q.removeAttribute(N)}})}}function z(){!A&&d.props.aria.expanded&&Ve(d.props.triggerTarget||t).forEach(function(P){d.props.interactive?P.setAttribute("aria-expanded",d.state.isVisible&&P===H()?"true":"false"):P.removeAttribute("aria-expanded")})}function M(){V().removeEventListener("mousemove",y),Vn=Vn.filter(function(P){return P!==y})}function O(P){if(!ie.isTouch||!b&&P.type!=="mousedown"){var N=P.composedPath&&P.composedPath()[0]||P.target;if(!d.props.interactive||!ho(w,N)){if(Ve(d.props.triggerTarget||t).some(function(Y){return ho(Y,N)})){if(ie.isTouch||d.state.isVisible&&d.props.trigger.indexOf("click")>=0)return}else L("onClickOutside",[d,P]);d.props.hideOnClick===!0&&(d.clearDelayTimeouts(),d.hide(),p=!0,setTimeout(function(){p=!1}),d.state.isMounted||at())}}}function U(){b=!0}function J(){b=!1}function W(){var P=V();P.addEventListener("mousedown",O,!0),P.addEventListener("touchend",O,Oe),P.addEventListener("touchstart",J,Oe),P.addEventListener("touchmove",U,Oe)}function at(){var P=V();P.removeEventListener("mousedown",O,!0),P.removeEventListener("touchend",O,Oe),P.removeEventListener("touchstart",J,Oe),P.removeEventListener("touchmove",U,Oe)}function Z(P,N){var Y=_().box;function q(K){K.target===Y&&(Cr(Y,"remove",q),N())}if(P===0)return N();Cr(Y,"remove",a),Cr(Y,"add",q),a=q}function $(P,N,Y){Y===void 0&&(Y=!1),Ve(d.props.triggerTarget||t).forEach(function(q){q.addEventListener(P,N,Y),m.push({node:q,eventType:P,handler:N,options:Y})})}function Pt(){var P;X()&&($("touchstart",xt,{passive:!0}),$("touchend",bt,{passive:!0})),(P=d.props.trigger,P.split(/\s+/).filter(Boolean)).forEach(function(N){if(N!=="manual")switch($(N,xt),N){case"mouseenter":$("mouseleave",bt);break;case"focus":$(Gs?"focusout":"blur",gt);break;case"focusin":$("focusout",gt)}})}function vt(){m.forEach(function(P){P.node.removeEventListener(P.eventType,P.handler,P.options)}),m=[]}function xt(P){var N,Y=!1;if(d.state.isEnabled&&!_t(P)&&!p){var q=((N=o)==null?void 0:N.type)==="focus";o=P,u=P.currentTarget,z(),!d.state.isVisible&&uo(P)&&Vn.forEach(function(K){return K(P)}),P.type==="click"&&(0>d.props.trigger.indexOf("mouseenter")||f)&&d.props.hideOnClick!==!1&&d.state.isVisible?Y=!0:Nt(P),P.type==="click"&&(f=!Y),Y&&!q&&It(P)}}function kt(P){var N=P.target,Y=H().contains(N)||w.contains(N);if(P.type!=="mousemove"||!Y){var q=Lt().concat(w).map(function(K){var Dt,dt=(Dt=K._tippy.popperInstance)==null?void 0:Dt.state;return dt?{popperRect:K.getBoundingClientRect(),popperState:dt,props:c}:null}).filter(Boolean);(function(K,Dt){var dt=Dt.clientX,Yt=Dt.clientY;return K.every(function(Xt){var Kt=Xt.popperRect,fn=Xt.popperState,se=Xt.props.interactiveBorder,Me=fn.placement.split("-")[0],ue=fn.modifiersData.offset;return!ue||Kt.top-Yt+(Me==="bottom"?ue.top.y:0)>se||Yt-Kt.bottom-(Me==="top"?ue.bottom.y:0)>se||Kt.left-dt+(Me==="right"?ue.left.x:0)>se||dt-Kt.right-(Me==="left"?ue.right.x:0)>se})})(q,P)&&(M(),It(P))}}function bt(P){_t(P)||d.props.trigger.indexOf("click")>=0&&f||(d.props.interactive?d.hideWithInteractivity(P):It(P))}function gt(P){0>d.props.trigger.indexOf("focusin")&&P.target!==H()||d.props.interactive&&P.relatedTarget&&w.contains(P.relatedTarget)||It(P)}function _t(P){return!!ie.isTouch&&X()!==P.type.indexOf("touch")>=0}function Ot(){Mt();var P=d.props,N=P.popperOptions,Y=P.placement,q=P.offset,K=P.getReferenceClientRect,Dt=P.moveTransition,dt=j()?Sr(w).arrow:null,Yt=K?{getBoundingClientRect:K,contextElement:K.contextElement||H()}:t,Xt={name:"$$tippy",enabled:!0,phase:"beforeWrite",requires:["computeStyles"],fn:function(fn){var se=fn.state;if(j()){var Me=_().box;["placement","reference-hidden","escaped"].forEach(function(ue){ue==="placement"?Me.setAttribute("data-placement",se.placement):se.attributes.popper["data-popper-"+ue]?Me.setAttribute("data-"+ue,""):Me.removeAttribute("data-"+ue)}),se.attributes.popper={}}}},Kt=[{name:"offset",options:{offset:q}},{name:"preventOverflow",options:{padding:{top:2,bottom:2,left:5,right:5}}},{name:"flip",options:{padding:5}},{name:"computeStyles",options:{adaptive:!Dt}},Xt];j()&&dt&&Kt.push({name:"arrow",options:{element:dt,padding:3}}),Kt.push.apply(Kt,(N==null?void 0:N.modifiers)||[]),d.popperInstance=Vs(Yt,w,Object.assign({},N,{placement:Y,onFirstUpdate:s,modifiers:Kt}))}function Mt(){d.popperInstance&&(d.popperInstance.destroy(),d.popperInstance=null)}function Lt(){return zn(w.querySelectorAll("[data-tippy-root]"))}function Nt(P){d.clearDelayTimeouts(),P&&L("onTrigger",[d,P]),W();var N=B(!0),Y=T(),q=Y[1];ie.isTouch&&Y[0]==="hold"&&q&&(N=q),N?r=setTimeout(function(){d.show()},N):d.show()}function It(P){if(d.clearDelayTimeouts(),L("onUntrigger",[d,P]),d.state.isVisible){if(0>d.props.trigger.indexOf("mouseenter")||0>d.props.trigger.indexOf("click")||0>["mouseleave","mousemove"].indexOf(P.type)||!f){var N=B(!1);N?e=setTimeout(function(){d.state.isVisible&&d.hide()},N):i=requestAnimationFrame(function(){d.hide()})}}else at()}}function Dn(t,n){n===void 0&&(n={});var r=Qt.plugins.concat(n.plugins||[]);document.addEventListener("touchstart",Ks,Oe),window.addEventListener("blur",$s);var e=Object.assign({},n,{plugins:r}),i=Zs(t).reduce(function(o,a){var s=a&&eu(a,e);return s&&o.push(s),o},[]);return Wn(t)?i[0]:i}Dn.defaultProps=Qt,Dn.setDefaultProps=function(t){Object.keys(t).forEach(function(n){Qt[n]=t[n]})},Dn.currentInput=ie,Object.assign({},Ye,{effect:function(t){var n=t.state,r={popper:{position:n.options.strategy,left:"0",top:"0",margin:"0"},arrow:{position:"absolute"},reference:{}};Object.assign(n.elements.popper.style,r.popper),n.styles=r,n.elements.arrow&&Object.assign(n.elements.arrow.style,r.arrow)}});var jr={clientX:0,clientY:0},Hr=[];function Do(t){jr={clientX:t.clientX,clientY:t.clientY}}var nu={name:"followCursor",defaultValue:!1,fn:function(t){var n=t.reference,r=co(t.props.triggerTarget||n),e=!1,i=!1,o=!0,a=t.props;function s(){return t.props.followCursor==="initial"&&t.state.isVisible}function u(){r.addEventListener("mousemove",f)}function l(){r.removeEventListener("mousemove",f)}function c(){e=!0,t.setProps({getReferenceClientRect:null}),e=!1}function f(D){var m=!D.target||n.contains(D.target),y=t.props.followCursor,v=D.clientX,g=D.clientY,d=n.getBoundingClientRect(),E=v-d.left,w=g-d.top;!m&&t.props.interactive||t.setProps({getReferenceClientRect:function(){var k=n.getBoundingClientRect(),C=v,A=g;y==="initial"&&(C=k.left+E,A=k.top+w);var T=y==="horizontal"?k.top:A,X=y==="vertical"?k.right:C,j=y==="horizontal"?k.bottom:A,H=y==="vertical"?k.left:C;return{width:X-H,height:j-T,top:T,right:X,bottom:j,left:H}}})}function p(){t.props.followCursor&&(Hr.push({instance:t,doc:r}),function(D){D.addEventListener("mousemove",Do)}(r))}function b(){(Hr=Hr.filter(function(D){return D.instance!==t})).filter(function(D){return D.doc===r}).length===0&&function(D){D.removeEventListener("mousemove",Do)}(r)}return{onCreate:p,onDestroy:b,onBeforeUpdate:function(){a=t.props},onAfterUpdate:function(D,m){var y=m.followCursor;e||y!==void 0&&a.followCursor!==y&&(b(),y?(p(),!t.state.isMounted||i||s()||u()):(l(),c()))},onMount:function(){t.props.followCursor&&!i&&(o&&(f(jr),o=!1),s()||u())},onTrigger:function(D,m){uo(m)&&(jr={clientX:m.clientX,clientY:m.clientY}),i=m.type==="focus"},onHidden:function(){t.props.followCursor&&(c(),l(),o=!0)}}}};Dn.setDefaultProps({render:bo});var St,Eo,fe,te,mt,wo,Po={showTotalDistance:!1,showDashDistance:!0,showWhen:["normal","active"],format:function(t){return 1e3>t?+t.toFixed(2)+"m":+(t/1e3).toFixed(2)+"km"}},xo={showWhen:["normal","active"],format:function(t){return t>1e6?"".concat(+(t/1e6).toFixed(2),"km\xB2"):"".concat(+t.toFixed(2),"m\xB2")}},ko={maxSize:100},Mo={remove:["del","backspace"],revert:["command+z","ctrl+z"],redo:["command+shift+z","ctrl+shift+z"]},Lo={allowHTML:!0,followCursor:!0,placement:"bottom-start",offset:[-10,20],plugins:[nu],trigger:"manual",hideOnClick:!1,theme:"light"},Ao={data:"drawData",pointAdsorbPixel:12,lineAdsorbPixel:10};function _o(t,n){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var e=Object.getOwnPropertySymbols(t);n&&(e=e.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),r.push.apply(r,e)}return r}function x(t){for(var n=1;arguments.length>n;n++){var r=arguments[n]!=null?arguments[n]:{};n%2?_o(Object(r),!0).forEach(function(e){Co(t,e,r[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):_o(Object(r)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))})}return t}function rt(t,n){if(!(t instanceof n))throw new TypeError("Cannot call a class as a function")}function Oo(t,n){for(var r=0;n.length>r;r++){var e=n[r];e.enumerable=e.enumerable||!1,e.configurable=!0,"value"in e&&(e.writable=!0),Object.defineProperty(t,Ro(e.key),e)}}function it(t,n,r){return n&&Oo(t.prototype,n),r&&Oo(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t}function Co(t,n,r){return(n=Ro(n))in t?Object.defineProperty(t,n,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[n]=r,t}function ft(t,n){if(typeof n!="function"&&n!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(n&&n.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),n&&Fr(t,n)}function R(t){return R=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},R(t)}function Fr(t,n){return Fr=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,e){return r.__proto__=e,r},Fr(t,n)}function En(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function pt(t){var n=function(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(r){return!1}}();return function(){var r,e=R(t);if(n){var i=R(this).constructor;r=Reflect.construct(e,arguments,i)}else r=e.apply(this,arguments);return function(o,a){if(a&&(typeof a=="object"||typeof a=="function"))return a;if(a!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return En(o)}(this,r)}}function S(){return S=typeof Reflect!="undefined"&&Reflect.get?Reflect.get.bind():function(t,n,r){var e=function(o,a){for(;!Object.prototype.hasOwnProperty.call(o,a)&&(o=R(o))!==null;);return o}(t,n);if(e){var i=Object.getOwnPropertyDescriptor(e,n);return i.get?i.get.call(3>arguments.length?t:r):i.value}},S.apply(this,arguments)}function wt(t,n){return function(r){if(Array.isArray(r))return r}(t)||function(r,e){var i=r==null?null:typeof Symbol!="undefined"&&r[Symbol.iterator]||r["@@iterator"];if(i!=null){var o,a,s,u,l=[],c=!0,f=!1;try{if(s=(i=i.call(r)).next,e===0){if(Object(i)!==i)return;c=!1}else for(;!(c=(o=s.call(i)).done)&&(l.push(o.value),l.length!==e);c=!0);}catch(p){f=!0,a=p}finally{try{if(!c&&i.return!=null&&(u=i.return(),Object(u)!==u))return}finally{if(f)throw a}}return l}}(t,n)||Br(t,n)||function(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}()}function ht(t){return function(n){if(Array.isArray(n))return Nr(n)}(t)||function(n){if(typeof Symbol!="undefined"&&n[Symbol.iterator]!=null||n["@@iterator"]!=null)return Array.from(n)}(t)||Br(t)||function(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}()}function Br(t,n){if(t){if(typeof t=="string")return Nr(t,n);var r=Object.prototype.toString.call(t).slice(8,-1);return r==="Object"&&t.constructor&&(r=t.constructor.name),r==="Map"||r==="Set"?Array.from(t):r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?Nr(t,n):void 0}}function Nr(t,n){(n==null||n>t.length)&&(n=t.length);for(var r=0,e=Array(n);n>r;r++)e[r]=t[r];return e}function Ro(t){var n=function(r,e){if(typeof r!="object"||r===null)return r;var i=r[Symbol.toPrimitive];if(i!==void 0){var o=i.call(r,e||"default");if(typeof o!="object")return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(r)}(t,"string");return typeof n=="symbol"?n:n+""}(St=h.DrawEvent||(h.DrawEvent={})).Init="init",St.Destroy="destroy",St.Enable="enable",St.Disable="disable",St.Add="add",St.Edit="edit",St.Remove="remove",St.Clear="clear",St.Change="change",St.DragStart="dragStart",St.Dragging="dragging",St.DragEnd="dragEnd",St.Select="select",St.AddNode="addNode",St.RemoveNode="removeNode",(Eo=h.SourceEvent||(h.SourceEvent={})).Change="change",Eo.Update="update",(fe=h.RenderEvent||(h.RenderEvent={})).Click="click",fe.UnClick="unclick",fe.Dragstart="dragstart",fe.Mousemove="mousemove",fe.Mouseout="mouseout",fe.Dragging="dragging",fe.Dragend="dragend",fe.DblClick="dblClick",fe.Contextmenu="contextmenu",(te=h.LayerEvent||(h.LayerEvent={})).Mousedown="mousedown",te.Mouseup="mouseup",te.Click="click",te.UnClick="unclick",te.Dblclick="dblclick",te.Mousemove="mousemove",te.Mouseover="mouseover",te.Mouseenter="mouseenter",te.Mouseleave="mouseleave",te.Mouseout="mouseout",te.Contextmenu="contextmenu",(mt=h.SceneEvent||(h.SceneEvent={})).Loaded="loaded",mt.MapMove="mapmove",mt.MoveStart="movestart",mt.MoveEnd="moveend",mt.ZoomChange="zoomchange",mt.ZoomStart="zoomstart",mt.ZoomEnd="zoomend",mt.Click="click",mt.Dblclick="dblclick",mt.Mousemove="mousemove",mt.Mousewheel="mousewheel",mt.Mouseover="mouseover",mt.Mouseout="mouseout",mt.Mouseup="mouseup",mt.Mousedown="mousedown",mt.Contextmenu="contextmenu",mt.Dragstart="dragstart",mt.Dragging="dragging",mt.Dragend="dragend",(wo=h.ControlEvent||(h.ControlEvent={})).DrawChange="drawchange",wo.DataChange="datachange";var qe=63710088e-1,Ur={centimeters:637100880,centimetres:637100880,degrees:57.22891354143274,feet:20902260511392e-6,inches:39.37*qe,kilometers:6371.0088,kilometres:6371.0088,meters:qe,metres:qe,miles:3958.761333810546,millimeters:6371008800,millimetres:6371008800,nauticalmiles:qe/1852,radians:1,yards:6967335223679999e-9},Ir={acres:247105e-9,centimeters:1e4,centimetres:1e4,feet:10.763910417,hectares:1e-4,inches:1550.003100006,kilometers:1e-6,kilometres:1e-6,meters:1,metres:1,miles:386e-9,millimeters:1e6,millimetres:1e6,yards:1.195990046};function Vt(t,n,r){r===void 0&&(r={});var e={type:"Feature"};return(r.id===0||r.id)&&(e.id=r.id),r.bbox&&(e.bbox=r.bbox),e.properties=n||{},e.geometry=t,e}function ot(t,n,r){if(r===void 0&&(r={}),!t)throw Error("coordinates is required");if(!Array.isArray(t))throw Error("coordinates must be an Array");if(2>t.length)throw Error("coordinates must be at least 2 numbers long");if(!Zn(t[0])||!Zn(t[1]))throw Error("coordinates must contain numbers");return Vt({type:"Point",coordinates:t},n,r)}function wn(t,n,r){r===void 0&&(r={});for(var e=0,i=t;i.length>e;e++){var o=i[e];if(4>o.length)throw Error("Each LinearRing of a Polygon must have 4 or more Positions.");for(var a=0;o[o.length-1].length>a;a++)if(o[o.length-1][a]!==o[0][a])throw Error("First and last Position are not equivalent.")}return Vt({type:"Polygon",coordinates:t},n,r)}function Rt(t,n,r){if(r===void 0&&(r={}),2>t.length)throw Error("coordinates must be an array of two or more positions");return Vt({type:"LineString",coordinates:t},n,r)}function Q(t,n){n===void 0&&(n={});var r={type:"FeatureCollection"};return n.id&&(r.id=n.id),n.bbox&&(r.bbox=n.bbox),r.features=t,r}function Yr(t,n,r){return r===void 0&&(r={}),Vt({type:"MultiLineString",coordinates:t},n,r)}function So(t,n,r){return r===void 0&&(r={}),Vt({type:"MultiPoint",coordinates:t},n,r)}function To(t,n,r){return r===void 0&&(r={}),Vt({type:"MultiPolygon",coordinates:t},n,r)}function Xr(t,n){n===void 0&&(n="kilometers");var r=Ur[n];if(!r)throw Error(n+" units is invalid");return t*r}function qn(t,n){n===void 0&&(n="kilometers");var r=Ur[n];if(!r)throw Error(n+" units is invalid");return t/r}function Pn(t){return 180*(t%(2*Math.PI))/Math.PI}function qt(t){return t%360*Math.PI/180}function Zn(t){return!isNaN(t)&&t!==null&&!Array.isArray(t)}function zr(t){return!!t&&t.constructor===Object}var ru=Object.freeze({__proto__:null,earthRadius:qe,factors:Ur,unitsFactors:{centimeters:100,centimetres:100,degrees:1/111325,feet:3.28084,inches:39.37,kilometers:.001,kilometres:.001,meters:1,metres:1,miles:1/1609.344,millimeters:1e3,millimetres:1e3,nauticalmiles:1/1852,radians:1/qe,yards:1.0936133},areaFactors:Ir,feature:Vt,geometry:function(t,n,r){switch(t){case"Point":return ot(n).geometry;case"LineString":return Rt(n).geometry;case"Polygon":return wn(n).geometry;case"MultiPoint":return So(n).geometry;case"MultiLineString":return Yr(n).geometry;case"MultiPolygon":return To(n).geometry;default:throw Error(t+" is invalid")}},point:ot,points:function(t,n,r){return r===void 0&&(r={}),Q(t.map(function(e){return ot(e,n)}),r)},polygon:wn,polygons:function(t,n,r){return r===void 0&&(r={}),Q(t.map(function(e){return wn(e,n)}),r)},lineString:Rt,lineStrings:function(t,n,r){return r===void 0&&(r={}),Q(t.map(function(e){return Rt(e,n)}),r)},featureCollection:Q,multiLineString:Yr,multiPoint:So,multiPolygon:To,geometryCollection:function(t,n,r){return r===void 0&&(r={}),Vt({type:"GeometryCollection",geometries:t},n,r)},round:function(t,n){if(n===void 0&&(n=0),n&&n<0)throw Error("precision must be a positive number");var r=Math.pow(10,n||0);return Math.round(t*r)/r},radiansToLength:Xr,lengthToRadians:qn,lengthToDegrees:function(t,n){return Pn(qn(t,n))},bearingToAzimuth:function(t){var n=t%360;return 0>n&&(n+=360),n},radiansToDegrees:Pn,degreesToRadians:qt,convertLength:function(t,n,r){if(n===void 0&&(n="kilometers"),r===void 0&&(r="kilometers"),t<0)throw Error("length must be a positive number");return Xr(qn(t,n),r)},convertArea:function(t,n,r){if(n===void 0&&(n="meters"),r===void 0&&(r="kilometers"),t<0)throw Error("area must be a positive number");var e=Ir[n];if(!e)throw Error("invalid original units");var i=Ir[r];if(!i)throw Error("invalid final units");return t/e*i},isNumber:Zn,isObject:zr,validateBBox:function(t){if(!t)throw Error("bbox is required");if(!Array.isArray(t))throw Error("bbox must be an Array");if(t.length!==4&&t.length!==6)throw Error("bbox must be an Array of 4 or 6 numbers");t.forEach(function(n){if(!Zn(n))throw Error("bbox must only contain numbers")})},validateId:function(t){if(!t)throw Error("id is required");if(["string","number"].indexOf(typeof t)===-1)throw Error("id must be a number or a string")}});function pe(t,n,r){if(t!==null)for(var e,i,o,a,s,u,l,c,f=0,p=0,b=t.type,D=b==="FeatureCollection",m=b==="Feature",y=D?t.features.length:1,v=0;y>v;v++){s=(c=!!(l=D?t.features[v].geometry:m?t.geometry:t)&&l.type==="GeometryCollection")?l.geometries.length:1;for(var g=0;s>g;g++){var d=0,E=0;if((a=c?l.geometries[g]:l)!==null){u=a.coordinates;var w=a.type;switch(f=!r||w!=="Polygon"&&w!=="MultiPolygon"?0:1,w){case null:break;case"Point":if(n(u,p,v,d,E)===!1)return!1;p++,d++;break;case"LineString":case"MultiPoint":for(e=0;u.length>e;e++){if(n(u[e],p,v,d,E)===!1)return!1;p++,w==="MultiPoint"&&d++}w==="LineString"&&d++;break;case"Polygon":case"MultiLineString":for(e=0;u.length>e;e++){for(i=0;u[e].length-f>i;i++){if(n(u[e][i],p,v,d,E)===!1)return!1;p++}w==="MultiLineString"&&d++,w==="Polygon"&&E++}w==="Polygon"&&d++;break;case"MultiPolygon":for(e=0;u.length>e;e++){for(E=0,i=0;u[e].length>i;i++){for(o=0;u[e][i].length-f>o;o++){if(n(u[e][i][o],p,v,d,E)===!1)return!1;p++}E++}d++}break;case"GeometryCollection":for(e=0;a.geometries.length>e;e++)if(pe(a.geometries[e],n,r)===!1)return!1;break;default:throw Error("Unknown Geometry Type")}}}}}function jo(t,n){var r;switch(t.type){case"FeatureCollection":for(r=0;t.features.length>r&&n(t.features[r].properties,r)!==!1;r++);break;case"Feature":n(t.properties,0)}}function Kn(t,n){if(t.type==="Feature")n(t,0);else if(t.type==="FeatureCollection")for(var r=0;t.features.length>r&&n(t.features[r],r)!==!1;r++);}function Ut(t){var n=[];return pe(t,function(r){n.push(r)}),n}function Wr(t,n){var r,e,i,o,a,s,u,l,c,f,p=0,b=t.type==="FeatureCollection",D=t.type==="Feature",m=b?t.features.length:1;for(r=0;m>r;r++){for(l=b?t.features[r].properties:D?t.properties:{},c=b?t.features[r].bbox:D?t.bbox:void 0,f=b?t.features[r].id:D?t.id:void 0,a=(u=!!(s=b?t.features[r].geometry:D?t.geometry:t)&&s.type==="GeometryCollection")?s.geometries.length:1,i=0;a>i;i++)if((o=u?s.geometries[i]:s)!==null)switch(o.type){case"Point":case"LineString":case"MultiPoint":case"Polygon":case"MultiLineString":case"MultiPolygon":if(n(o,p,l,c,f)===!1)return!1;break;case"GeometryCollection":for(e=0;o.geometries.length>e;e++)if(n(o.geometries[e],p,l,c,f)===!1)return!1;break;default:throw Error("Unknown Geometry Type")}else if(n(null,p,l,c,f)===!1)return!1;p++}}function Ho(t,n,r){var e=r;return Wr(t,function(i,o,a,s,u){e=o===0&&r===void 0?i:n(e,i,o,a,s,u)}),e}function Ze(t,n){Wr(t,function(r,e,i,o,a){var s,u=r===null?null:r.type;switch(u){case null:case"Point":case"LineString":case"Polygon":return n(Vt(r,i,{bbox:o,id:a}),e,0)!==!1&&void 0}switch(u){case"MultiPoint":s="Point";break;case"MultiLineString":s="LineString";break;case"MultiPolygon":s="Polygon"}for(var l=0;r.coordinates.length>l;l++)if(n(Vt({type:s,coordinates:r.coordinates[l]},i),e,l)===!1)return!1})}function Fo(t,n){Ze(t,function(r,e,i){var o=0;if(r.geometry){var a=r.geometry.type;if(a!=="Point"&&a!=="MultiPoint"){var s,u=0,l=0,c=0;return pe(r,function(f,p,b,D,m){if(s===void 0||e>u||D>l||m>c)return s=f,u=e,l=D,c=m,void(o=0);var y=Rt([s,f],r.properties);if(n(y,e,i,m,o)===!1)return!1;o++,s=f})!==!1&&void 0}}})}function Bo(t,n,r){var e=r,i=!1;return Fo(t,function(o,a,s,u,l){e=i===!1&&r===void 0?o:n(e,o,a,s,u,l),i=!0}),e}function No(t,n){if(!t)throw Error("geojson is required");Ze(t,function(r,e,i){if(r.geometry!==null){var o=r.geometry.coordinates;switch(r.geometry.type){case"LineString":if(n(r,e,i,0,0)===!1)return!1;break;case"Polygon":for(var a=0;o.length>a;a++)if(n(Rt(o[a],r.properties),e,i,a)===!1)return!1}}})}var iu=Object.freeze({__proto__:null,coordAll:Ut,coordEach:pe,coordReduce:function(t,n,r,e){var i=r;return pe(t,function(o,a,s,u,l){i=a===0&&r===void 0?o:n(i,o,a,s,u,l)},e),i},featureEach:Kn,featureReduce:function(t,n,r){var e=r;return Kn(t,function(i,o){e=o===0&&r===void 0?i:n(e,i,o)}),e},findPoint:function(t,n){if(!zr(n=n||{}))throw Error("options is invalid");var r,e=n.featureIndex||0,i=n.multiFeatureIndex||0,o=n.geometryIndex||0,a=n.coordIndex||0,s=n.properties;switch(t.type){case"FeatureCollection":0>e&&(e=t.features.length+e),s=s||t.features[e].properties,r=t.features[e].geometry;break;case"Feature":s=s||t.properties,r=t.geometry;break;case"Point":case"MultiPoint":return null;case"LineString":case"Polygon":case"MultiLineString":case"MultiPolygon":r=t;break;default:throw Error("geojson is invalid")}if(r===null)return null;var u=r.coordinates;switch(r.type){case"Point":return ot(u,s,n);case"MultiPoint":return 0>i&&(i=u.length+i),ot(u[i],s,n);case"LineString":return 0>a&&(a=u.length+a),ot(u[a],s,n);case"Polygon":return 0>o&&(o=u.length+o),0>a&&(a=u[o].length+a),ot(u[o][a],s,n);case"MultiLineString":return 0>i&&(i=u.length+i),0>a&&(a=u[i].length+a),ot(u[i][a],s,n);case"MultiPolygon":return 0>i&&(i=u.length+i),0>o&&(o=u[i].length+o),0>a&&(a=u[i][o].length-a),ot(u[i][o][a],s,n)}throw Error("geojson is invalid")},findSegment:function(t,n){if(!zr(n=n||{}))throw Error("options is invalid");var r,e=n.featureIndex||0,i=n.multiFeatureIndex||0,o=n.geometryIndex||0,a=n.segmentIndex||0,s=n.properties;switch(t.type){case"FeatureCollection":0>e&&(e=t.features.length+e),s=s||t.features[e].properties,r=t.features[e].geometry;break;case"Feature":s=s||t.properties,r=t.geometry;break;case"Point":case"MultiPoint":return null;case"LineString":case"Polygon":case"MultiLineString":case"MultiPolygon":r=t;break;default:throw Error("geojson is invalid")}if(r===null)return null;var u=r.coordinates;switch(r.type){case"Point":case"MultiPoint":return null;case"LineString":return 0>a&&(a=u.length+a-1),Rt([u[a],u[a+1]],s,n);case"Polygon":return 0>o&&(o=u.length+o),0>a&&(a=u[o].length+a-1),Rt([u[o][a],u[o][a+1]],s,n);case"MultiLineString":return 0>i&&(i=u.length+i),0>a&&(a=u[i].length+a-1),Rt([u[i][a],u[i][a+1]],s,n);case"MultiPolygon":return 0>i&&(i=u.length+i),0>o&&(o=u[i].length+o),0>a&&(a=u[i][o].length-a-1),Rt([u[i][o][a],u[i][o][a+1]],s,n)}throw Error("geojson is invalid")},flattenEach:Ze,flattenReduce:function(t,n,r){var e=r;return Ze(t,function(i,o,a){e=o===0&&a===0&&r===void 0?i:n(e,i,o,a)}),e},geomEach:Wr,geomReduce:Ho,lineEach:No,lineReduce:function(t,n,r){var e=r;return No(t,function(i,o,a,s){e=o===0&&r===void 0?i:n(e,i,o,a,s)}),e},propEach:jo,propReduce:function(t,n,r){var e=r;return jo(t,function(i,o){e=o===0&&r===void 0?i:n(e,i,o)}),e},segmentEach:Fo,segmentReduce:Bo});function Ce(t){var n=[1/0,1/0,-1/0,-1/0];return pe(t,function(r){n[0]>r[0]&&(n[0]=r[0]),n[1]>r[1]&&(n[1]=r[1]),r[0]>n[2]&&(n[2]=r[0]),r[1]>n[3]&&(n[3]=r[1])}),n}Ce.default=Ce;var ou=Object.freeze({__proto__:null,default:Ce});function Ke(t){if(!t)throw Error("coord is required");if(!Array.isArray(t)){if(t.type==="Feature"&&t.geometry!==null&&t.geometry.type==="Point")return t.geometry.coordinates;if(t.type==="Point")return t.coordinates}if(Array.isArray(t)&&t.length>=2&&!Array.isArray(t[0])&&!Array.isArray(t[1]))return t;throw Error("coord must be GeoJSON Point or an Array of numbers")}function Re(t){if(Array.isArray(t))return t;if(t.type==="Feature"){if(t.geometry!==null)return t.geometry.coordinates}else if(t.coordinates)return t.coordinates;throw Error("coords must be GeoJSON Feature, Geometry Object or an Array")}function $n(t){return t.type==="Feature"?t.geometry:t}function Uo(t,n){return t.type==="FeatureCollection"?"FeatureCollection":t.type==="GeometryCollection"?"GeometryCollection":t.type==="Feature"&&t.geometry!==null?t.geometry.type:t.type}function Io(t,n,r,e,i){Yo(t,n,r||0,e||t.length-1,i||au)}function Yo(t,n,r,e,i){for(;e>r;){if(e-r>600){var o=e-r+1,a=n-r+1,s=Math.log(o),u=.5*Math.exp(2*s/3),l=.5*Math.sqrt(s*u*(o-u)/o)*(0>a-o/2?-1:1);Yo(t,n,Math.max(r,Math.floor(n-a*u/o+l)),Math.min(e,Math.floor(n+(o-a)*u/o+l)),i)}var c=t[n],f=r,p=e;for(xn(t,r,n),i(t[e],c)>0&&xn(t,r,e);p>f;){for(xn(t,f,p),f++,p--;0>i(t[f],c);)f++;for(;i(t[p],c)>0;)p--}i(t[r],c)===0?xn(t,r,p):xn(t,++p,e),p>n||(r=p+1),n>p||(e=p-1)}}function xn(t,n,r){var e=t[n];t[n]=t[r],t[r]=e}function au(t,n){return n>t?-1:t>n?1:0}function su(t,n,r){if(!r)return n.indexOf(t);for(let e=0;n.length>e;e++)if(r(t,n[e]))return e;return-1}function $e(t,n){kn(t,0,t.children.length,n,t)}function kn(t,n,r,e,i){i||(i=Ge(null)),i.minX=1/0,i.minY=1/0,i.maxX=-1/0,i.maxY=-1/0;for(let o=n;r>o;o++){const a=t.children[o];Mn(i,t.leaf?e(a):a)}return i}function Mn(t,n){return t.minX=Math.min(t.minX,n.minX),t.minY=Math.min(t.minY,n.minY),t.maxX=Math.max(t.maxX,n.maxX),t.maxY=Math.max(t.maxY,n.maxY),t}function uu(t,n){return t.minX-n.minX}function lu(t,n){return t.minY-n.minY}function Vr(t){return(t.maxX-t.minX)*(t.maxY-t.minY)}function Gn(t){return t.maxX-t.minX+(t.maxY-t.minY)}function cu(t,n){const r=Math.max(t.minX,n.minX),e=Math.max(t.minY,n.minY),i=Math.min(t.maxX,n.maxX),o=Math.min(t.maxY,n.maxY);return Math.max(0,i-r)*Math.max(0,o-e)}function qr(t,n){return!(t.minX>n.minX||t.minY>n.minY||n.maxX>t.maxX||n.maxY>t.maxY)}function Jn(t,n){return!(n.minX>t.maxX||n.minY>t.maxY||t.minX>n.maxX||t.minY>n.maxY)}function Ge(t){return{children:t,height:1,leaf:!0,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0}}function Xo(t,n,r,e,i){const o=[n,r];for(;o.length;){if(e>=(r=o.pop())-(n=o.pop()))continue;const a=n+Math.ceil((r-n)/e/2)*e;Io(t,a,n,r,i),o.push(n,a,a,r)}}var hu=Object.freeze({__proto__:null,default:class{constructor(t=9){this._maxEntries=Math.max(4,t),this._minEntries=Math.max(2,Math.ceil(.4*this._maxEntries)),this.clear()}all(){return this._all(this.data,[])}search(t){let n=this.data;const r=[];if(!Jn(t,n))return r;const e=this.toBBox,i=[];for(;n;){for(let o=0;n.children.length>o;o++){const a=n.children[o],s=n.leaf?e(a):a;Jn(t,s)&&(n.leaf?r.push(a):qr(t,s)?this._all(a,r):i.push(a))}n=i.pop()}return r}collides(t){let n=this.data;if(!Jn(t,n))return!1;const r=[];for(;n;){for(let e=0;n.children.length>e;e++){const i=n.children[e],o=n.leaf?this.toBBox(i):i;if(Jn(t,o)){if(n.leaf||qr(t,o))return!0;r.push(i)}}n=r.pop()}return!1}load(t){if(!t||!t.length)return this;if(this._minEntries>t.length){for(let r=0;t.length>r;r++)this.insert(t[r]);return this}let n=this._build(t.slice(),0,t.length-1,0);if(this.data.children.length)if(this.data.height===n.height)this._splitRoot(this.data,n);else{if(n.height>this.data.height){const r=this.data;this.data=n,n=r}this._insert(n,this.data.height-n.height-1,!0)}else this.data=n;return this}insert(t){return t&&this._insert(t,this.data.height-1),this}clear(){return this.data=Ge([]),this}remove(t,n){if(!t)return this;let r=this.data;const e=this.toBBox(t),i=[],o=[];let a,s,u;for(;r||i.length;){if(r||(r=i.pop(),s=i[i.length-1],a=o.pop(),u=!0),r.leaf){const l=su(t,r.children,n);if(l!==-1)return r.children.splice(l,1),i.push(r),this._condense(i),this}u||r.leaf||!qr(r,e)?s?(a++,r=s.children[a],u=!1):r=null:(i.push(r),o.push(a),a=0,s=r,r=r.children[0])}return this}toBBox(t){return t}compareMinX(t,n){return t.minX-n.minX}compareMinY(t,n){return t.minY-n.minY}toJSON(){return this.data}fromJSON(t){return this.data=t,this}_all(t,n){const r=[];for(;t;)t.leaf?n.push(...t.children):r.push(...t.children),t=r.pop();return n}_build(t,n,r,e){const i=r-n+1;let o,a=this._maxEntries;if(a>=i)return o=Ge(t.slice(n,r+1)),$e(o,this.toBBox),o;e||(a=Math.ceil(i/Math.pow(a,(e=Math.ceil(Math.log(i)/Math.log(a)))-1))),o=Ge([]),o.leaf=!1,o.height=e;const s=Math.ceil(i/a),u=s*Math.ceil(Math.sqrt(a));Xo(t,n,r,u,this.compareMinX);for(let l=n;r>=l;l+=u){const c=Math.min(l+u-1,r);Xo(t,l,c,s,this.compareMinY);for(let f=l;c>=f;f+=s)o.children.push(this._build(t,f,Math.min(f+s-1,c),e-1))}return $e(o,this.toBBox),o}_chooseSubtree(t,n,r,e){for(;e.push(n),!n.leaf&&e.length-1!==r;){let a,s=1/0,u=1/0;for(let l=0;n.children.length>l;l++){const c=n.children[l],f=Vr(c),p=(Math.max((o=c).maxX,(i=t).maxX)-Math.min(o.minX,i.minX))*(Math.max(o.maxY,i.maxY)-Math.min(o.minY,i.minY))-f;u>p?(u=p,s=s>f?f:s,a=c):p===u&&s>f&&(s=f,a=c)}n=a||n.children[0]}var i,o;return n}_insert(t,n,r){const e=r?t:this.toBBox(t),i=[],o=this._chooseSubtree(e,this.data,n,i);for(o.children.push(t),Mn(o,e);n>=0&&i[n].children.length>this._maxEntries;)this._split(i,n),n--;this._adjustParentBBoxes(e,i,n)}_split(t,n){const r=t[n],e=r.children.length,i=this._minEntries;this._chooseSplitAxis(r,i,e);const o=this._chooseSplitIndex(r,i,e),a=Ge(r.children.splice(o,r.children.length-o));a.height=r.height,a.leaf=r.leaf,$e(r,this.toBBox),$e(a,this.toBBox),n?t[n-1].children.push(a):this._splitRoot(r,a)}_splitRoot(t,n){this.data=Ge([t,n]),this.data.height=t.height+1,this.data.leaf=!1,$e(this.data,this.toBBox)}_chooseSplitIndex(t,n,r){let e,i=1/0,o=1/0;for(let a=n;r-n>=a;a++){const s=kn(t,0,a,this.toBBox),u=kn(t,a,r,this.toBBox),l=cu(s,u),c=Vr(s)+Vr(u);i>l?(i=l,e=a,o=o>c?c:o):l===i&&o>c&&(o=c,e=a)}return e||r-n}_chooseSplitAxis(t,n,r){const e=t.leaf?this.compareMinX:uu,i=t.leaf?this.compareMinY:lu,o=this._allDistMargin(t,n,r,e);this._allDistMargin(t,n,r,i)>o&&t.children.sort(e)}_allDistMargin(t,n,r,e){t.children.sort(e);const i=this.toBBox,o=kn(t,0,n,i),a=kn(t,r-n,r,i);let s=Gn(o)+Gn(a);for(let u=n;r-n>u;u++){const l=t.children[u];Mn(o,t.leaf?i(l):l),s+=Gn(o)}for(let u=r-n-1;u>=n;u--){const l=t.children[u];Mn(a,t.leaf?i(l):l),s+=Gn(a)}return s}_adjustParentBBoxes(t,n,r){for(let e=r;e>=0;e--)Mn(n[e],t)}_condense(t){for(let n,r=t.length-1;r>=0;r--)t[r].children.length===0?r>0?(n=t[r-1].children,n.splice(n.indexOf(t[r]),1)):this.clear():$e(t[r],this.toBBox)}}});function du(t,n){return n>t?-1:t>n?1:0}var fu=Object.freeze({__proto__:null,default:class{constructor(t=[],n=du){if(this.data=t,this.length=this.data.length,this.compare=n,this.length>0)for(let r=(this.length>>1)-1;r>=0;r--)this._down(r)}push(t){this.data.push(t),this.length++,this._up(this.length-1)}pop(){if(this.length===0)return;const t=this.data[0],n=this.data.pop();return this.length--,this.length>0&&(this.data[0]=n,this._down(0)),t}peek(){return this.data[0]}_up(t){const{data:n,compare:r}=this,e=n[t];for(;t>0;){const i=t-1>>1,o=n[i];if(r(e,o)>=0)break;n[t]=o,t=i}n[t]=e}_down(t){const{data:n,compare:r}=this,e=this.length>>1,i=n[t];for(;e>t;){let o=1+(t<<1),a=n[o];const s=o+1;if(this.length>s&&0>r(n[s],a)&&(o=s,a=n[s]),r(a,i)>=0)break;n[t]=a,t=o}n[t]=i}}}),zo=function(t,n,r,e){var i=t[0],o=t[1],a=!1;r===void 0&&(r=0),e===void 0&&(e=n.length);for(var s=(e-r)/2,u=0,l=s-1;s>u;l=u++){var c=n[r+2*u+0],f=n[r+2*u+1],p=n[r+2*l+1];f>o!=p>o&&(n[r+2*l+0]-c)*(o-f)/(p-f)+c>i&&(a=!a)}return a},Wo=function(t,n,r,e){var i=t[0],o=t[1],a=!1;r===void 0&&(r=0),e===void 0&&(e=n.length);for(var s=e-r,u=0,l=s-1;s>u;l=u++){var c=n[u+r][0],f=n[u+r][1],p=n[l+r][1];f>o!=p>o&&(n[l+r][0]-c)*(o-f)/(p-f)+c>i&&(a=!a)}return a},Zr=function(t,n,r,e){return n.length>0&&Array.isArray(n[0])?Wo(t,n,r,e):zo(t,n,r,e)},pu=zo;Zr.nested=Wo,Zr.flat=pu;var Qn=typeof globalThis!="undefined"?globalThis:typeof window!="undefined"?window:typeof lt.g!="undefined"?lt.g:typeof self!="undefined"?self:{};function Je(t,n,r){return t(r={path:n,exports:{},require:function(e,i){return function(){throw Error("Dynamic requires are not currently supported by @rollup/plugin-commonjs")}()}},r.exports),r.exports}function Qe(t){if(t.__esModule)return t;var n=Object.defineProperty({},"__esModule",{value:!0});return Object.keys(t).forEach(function(r){var e=Object.getOwnPropertyDescriptor(t,r);Object.defineProperty(n,r,e.get?e:{enumerable:!0,get:function(){return t[r]}})}),n}var vu=Je(function(t,n){(function(r){const i=33306690738754706e-32;function o(m,y,v,g,d){let E,w,k,C,A=y[0],T=g[0],X=0,j=0;T>A==T>-A?(E=A,A=y[++X]):(E=T,T=g[++j]);let H=0;if(m>X&&v>j)for(T>A==T>-A?(k=E-((w=A+E)-A),A=y[++X]):(k=E-((w=T+E)-T),T=g[++j]),E=w,k!==0&&(d[H++]=k);m>X&&v>j;)T>A==T>-A?(k=E-((w=E+A)-(C=w-E))+(A-C),A=y[++X]):(k=E-((w=E+T)-(C=w-E))+(T-C),T=g[++j]),E=w,k!==0&&(d[H++]=k);for(;m>X;)k=E-((w=E+A)-(C=w-E))+(A-C),A=y[++X],E=w,k!==0&&(d[H++]=k);for(;v>j;)k=E-((w=E+T)-(C=w-E))+(T-C),T=g[++j],E=w,k!==0&&(d[H++]=k);return E===0&&H!==0||(d[H++]=E),H}function a(m){return new Float64Array(m)}const s=33306690738754716e-32,u=22204460492503146e-32,l=11093356479670487e-47,c=a(4),f=a(8),p=a(12),b=a(16),D=a(4);r.orient2d=function(m,y,v,g,d,E){const w=(y-E)*(v-d),k=(m-d)*(g-E),C=w-k;if(w===0||k===0||w>0!=k>0)return C;const A=Math.abs(w+k);return s*A>Math.abs(C)?-function(T,X,j,H,V,_,B){let F,L,I,z,M,O,U,J,W,at,Z,$,Pt,vt,xt,kt,bt,gt;const _t=T-V,Ot=j-V,Mt=X-_,Lt=H-_;M=(xt=(J=_t-(U=(O=134217729*_t)-(O-_t)))*(at=Lt-(W=(O=134217729*Lt)-(O-Lt)))-((vt=_t*Lt)-U*W-J*W-U*at))-(Z=xt-(bt=(J=Mt-(U=(O=134217729*Mt)-(O-Mt)))*(at=Ot-(W=(O=134217729*Ot)-(O-Ot)))-((kt=Mt*Ot)-U*W-J*W-U*at))),c[0]=xt-(Z+M)+(M-bt),M=(Pt=vt-(($=vt+Z)-(M=$-vt))+(Z-M))-(Z=Pt-kt),c[1]=Pt-(Z+M)+(M-kt),M=(gt=$+Z)-$,c[2]=$-(gt-M)+(Z-M),c[3]=gt;let Nt=function(q,K){let Dt=K[0];for(let dt=1;q>dt;dt++)Dt+=K[dt];return Dt}(4,c),It=u*B;if(Nt>=It||-Nt>=It||(F=T-(_t+(M=T-_t))+(M-V),I=j-(Ot+(M=j-Ot))+(M-V),L=X-(Mt+(M=X-Mt))+(M-_),z=H-(Lt+(M=H-Lt))+(M-_),F===0&&L===0&&I===0&&z===0)||(It=l*B+i*Math.abs(Nt),(Nt+=_t*z+Lt*F-(Mt*I+Ot*L))>=It||-Nt>=It))return Nt;M=(xt=(J=F-(U=(O=134217729*F)-(O-F)))*(at=Lt-(W=(O=134217729*Lt)-(O-Lt)))-((vt=F*Lt)-U*W-J*W-U*at))-(Z=xt-(bt=(J=L-(U=(O=134217729*L)-(O-L)))*(at=Ot-(W=(O=134217729*Ot)-(O-Ot)))-((kt=L*Ot)-U*W-J*W-U*at))),D[0]=xt-(Z+M)+(M-bt),M=(Pt=vt-(($=vt+Z)-(M=$-vt))+(Z-M))-(Z=Pt-kt),D[1]=Pt-(Z+M)+(M-kt),M=(gt=$+Z)-$,D[2]=$-(gt-M)+(Z-M),D[3]=gt;const P=o(4,c,4,D,f);M=(xt=(J=_t-(U=(O=134217729*_t)-(O-_t)))*(at=z-(W=(O=134217729*z)-(O-z)))-((vt=_t*z)-U*W-J*W-U*at))-(Z=xt-(bt=(J=Mt-(U=(O=134217729*Mt)-(O-Mt)))*(at=I-(W=(O=134217729*I)-(O-I)))-((kt=Mt*I)-U*W-J*W-U*at))),D[0]=xt-(Z+M)+(M-bt),M=(Pt=vt-(($=vt+Z)-(M=$-vt))+(Z-M))-(Z=Pt-kt),D[1]=Pt-(Z+M)+(M-kt),M=(gt=$+Z)-$,D[2]=$-(gt-M)+(Z-M),D[3]=gt;const N=o(P,f,4,D,p);M=(xt=(J=F-(U=(O=134217729*F)-(O-F)))*(at=z-(W=(O=134217729*z)-(O-z)))-((vt=F*z)-U*W-J*W-U*at))-(Z=xt-(bt=(J=L-(U=(O=134217729*L)-(O-L)))*(at=I-(W=(O=134217729*I)-(O-I)))-((kt=L*I)-U*W-J*W-U*at))),D[0]=xt-(Z+M)+(M-bt),M=(Pt=vt-(($=vt+Z)-(M=$-vt))+(Z-M))-(Z=Pt-kt),D[1]=Pt-(Z+M)+(M-kt),M=(gt=$+Z)-$,D[2]=$-(gt-M)+(Z-M),D[3]=gt;const Y=o(N,p,4,D,b);return b[Y-1]}(m,y,v,g,d,E,A):C},r.orient2dfast=function(m,y,v,g,d,E){return(y-E)*(v-d)-(m-d)*(g-E)},Object.defineProperty(r,"__esModule",{value:!0})})(n)}),Vo=Qe(hu),tr=Qe(fu),gu=vu.orient2d;tr.default&&(tr=tr.default);var qo=Zo;function Zo(t,n,r){n=Math.max(0,n===void 0?2:n),r=r||0;var e=function(g){for(var d=g[0],E=g[0],w=g[0],k=g[0],C=0;g.length>C;C++){var A=g[C];d[0]>A[0]&&(d=A),A[0]>w[0]&&(w=A),E[1]>A[1]&&(E=A),A[1]>k[1]&&(k=A)}var T=[d,E,w,k],X=T.slice();for(C=0;g.length>C;C++)Zr(g[C],T)||X.push(g[C]);return function(j){j.sort(Du);for(var H=[],V=0;j.length>V;V++){for(;H.length>=2&&0>=tn(H[H.length-2],H[H.length-1],j[V]);)H.pop();H.push(j[V])}for(var _=[],B=j.length-1;B>=0;B--){for(;_.length>=2&&0>=tn(_[_.length-2],_[_.length-1],j[B]);)_.pop();_.push(j[B])}return _.pop(),H.pop(),H.concat(_)}(X)}(t),i=new Vo(16);i.toBBox=function(g){return{minX:g[0],minY:g[1],maxX:g[0],maxY:g[1]}},i.compareMinX=function(g,d){return g[0]-d[0]},i.compareMinY=function(g,d){return g[1]-d[1]},i.load(t);for(var o,a=[],s=0;e.length>s;s++){var u=e[s];i.remove(u),o=Go(u,o),a.push(o)}var l=new Vo(16);for(s=0;a.length>s;s++)l.insert(Kr(a[s]));for(var c=n*n,f=r*r;a.length;){var p=a.shift(),b=p.p,D=p.next.p,m=$r(b,D);if(m>=f){var y=m/c;(u=yu(i,p.prev.p,b,D,p.next.next.p,y,l))&&Math.min($r(u,b),$r(u,D))<=y&&(a.push(p),a.push(Go(u,p)),i.remove(u),l.remove(p),l.insert(Kr(p)),l.insert(Kr(p.next)))}}p=o;var v=[];do v.push(p.p),p=p.next;while(p!==o);return v.push(p.p),v}function yu(t,n,r,e,i,o,a){for(var s=new tr([],mu),u=t.data;u;){for(var l=0;u.children.length>l;l++){var c=u.children[l],f=u.leaf?Gr(c,r,e):bu(r,e,c);o<f||s.push({node:c,dist:f})}for(;s.length&&!s.peek().node.children;){var p=s.pop(),b=p.node,D=Gr(b,n,r),m=Gr(b,e,i);if(D>p.dist&&m>p.dist&&$o(r,b,a)&&$o(e,b,a))return b}(u=s.pop())&&(u=u.node)}return null}function mu(t,n){return t.dist-n.dist}function bu(t,n,r){if(Ko(t,r)||Ko(n,r))return 0;var e=er(t[0],t[1],n[0],n[1],r.minX,r.minY,r.maxX,r.minY);if(e===0)return 0;var i=er(t[0],t[1],n[0],n[1],r.minX,r.minY,r.minX,r.maxY);if(i===0)return 0;var o=er(t[0],t[1],n[0],n[1],r.maxX,r.minY,r.maxX,r.maxY);if(o===0)return 0;var a=er(t[0],t[1],n[0],n[1],r.minX,r.maxY,r.maxX,r.maxY);return a===0?0:Math.min(e,i,o,a)}function Ko(t,n){return!(n.minX>t[0]||t[0]>n.maxX||n.minY>t[1]||t[1]>n.maxY)}function $o(t,n,r){for(var e,i,o,a,s=r.search({minX:Math.min(t[0],n[0]),minY:Math.min(t[1],n[1]),maxX:Math.max(t[0],n[0]),maxY:Math.max(t[1],n[1])}),u=0;s.length>u;u++)if(i=s[u].next.p,o=t,(e=s[u].p)!==(a=n)&&i!==o&&tn(e,i,o)>0!=tn(e,i,a)>0&&tn(o,a,e)>0!=tn(o,a,i)>0)return!1;return!0}function tn(t,n,r){return gu(t[0],t[1],n[0],n[1],r[0],r[1])}function Kr(t){var n=t.p,r=t.next.p;return t.minX=Math.min(n[0],r[0]),t.minY=Math.min(n[1],r[1]),t.maxX=Math.max(n[0],r[0]),t.maxY=Math.max(n[1],r[1]),t}function Go(t,n){var r={p:t,prev:null,next:null,minX:0,minY:0,maxX:0,maxY:0};return n?(r.next=n.next,r.prev=n,n.next.prev=r,n.next=r):(r.prev=r,r.next=r),r}function $r(t,n){var r=t[0]-n[0],e=t[1]-n[1];return r*r+e*e}function Gr(t,n,r){var e=n[0],i=n[1],o=r[0]-e,a=r[1]-i;if(o!==0||a!==0){var s=((t[0]-e)*o+(t[1]-i)*a)/(o*o+a*a);s>1?(e=r[0],i=r[1]):s>0&&(e+=o*s,i+=a*s)}return(o=t[0]-e)*o+(a=t[1]-i)*a}function er(t,n,r,e,i,o,a,s){var u,l,c,f,p=r-t,b=e-n,D=a-i,m=s-o,y=t-i,v=n-o,g=p*p+b*b,d=p*D+b*m,E=D*D+m*m,w=p*y+b*v,k=D*y+m*v,C=g*E-d*d,A=C,T=C;C===0?(l=0,A=1,f=k,T=E):(f=g*k-d*w,0>(l=d*k-E*w)?(l=0,f=k,T=E):l>A&&(l=A,f=k+d,T=E)),0>f?(f=0,0>-w?l=0:-w>g?l=A:(l=-w,A=g)):f>T&&(f=T,0>-w+d?l=0:-w+d>g?l=A:(l=-w+d,A=g));var X=(1-(c=f===0?0:f/T))*i+c*a-((1-(u=l===0?0:l/A))*t+u*r),j=(1-c)*o+c*s-((1-u)*n+u*e);return X*X+j*j}function Du(t,n){return t[0]===n[0]?t[1]-n[1]:t[0]-n[0]}function ve(t,n,r){r===void 0&&(r={});var e=Ke(t),i=Ke(n),o=qt(i[1]-e[1]),a=qt(i[0]-e[0]),s=qt(e[1]),u=qt(i[1]),l=Math.pow(Math.sin(o/2),2)+Math.pow(Math.sin(a/2),2)*Math.cos(s)*Math.cos(u);return Xr(2*Math.atan2(Math.sqrt(l),Math.sqrt(1-l)),r.units)}function Jo(t){return function(n,r){r===void 0&&(r={});var e=Number(n[0]),i=Number(n[1]),o=Number(n[2]),a=Number(n[3]);if(n.length===6)throw Error("@turf/bbox-polygon does not support BBox with 6 positions");var s=[e,i];return wn([[s,[o,i],[o,a],[e,a],s]],r.properties,{bbox:n,id:r.id})}(Ce(t))}function nr(t,n,r,e){e===void 0&&(e={});var i=Ke(t),o=qt(i[0]),a=qt(i[1]),s=qt(r),u=qn(n,e.units),l=Math.asin(Math.sin(a)*Math.cos(u)+Math.cos(a)*Math.sin(u)*Math.cos(s));return ot([Pn(o+Math.atan2(Math.sin(s)*Math.sin(u)*Math.cos(a),Math.cos(u)-Math.sin(a)*Math.sin(l))),Pn(l)],e.properties)}function Jr(t,n,r){if(r===void 0&&(r={}),r.final===!0)return function(l,c){var f=Jr(c,l);return f=(f+180)%360}(t,n);var e=Ke(t),i=Ke(n),o=qt(e[0]),a=qt(i[0]),s=qt(e[1]),u=qt(i[1]);return Pn(Math.atan2(Math.sin(a-o)*Math.cos(u),Math.cos(s)*Math.sin(u)-Math.sin(s)*Math.cos(u)*Math.cos(a-o)))}function Qr(t,n){n===void 0&&(n={});var r=Ce(t);return ot([(r[0]+r[2])/2,(r[1]+r[3])/2],n.properties,n)}function Qo(t,n){n===void 0&&(n={});var r=0,e=0,i=0;return pe(t,function(o){r+=o[0],e+=o[1],i++},!0),ot([r/i,e/i],n.properties)}function ta(t,n){switch(n===void 0&&(n={}),Uo(t)){case"Point":return ot(Ke(t),n.properties);case"Polygon":var r=[];pe(t,function(d){r.push(d)});var e,i,o,a,s,u,l,c,f=Qo(t,{properties:n.properties}),p=f.geometry.coordinates,b=0,D=0,m=0,y=r.map(function(d){return[d[0]-p[0],d[1]-p[1]]});for(e=0;r.length-1>e;e++)m+=c=(a=(i=y[e])[0])*(l=(o=y[e+1])[1])-(s=o[0])*(u=i[1]),b+=(a+s)*c,D+=(u+l)*c;if(m===0)return f;var v=1/(6*(.5*m));return ot([p[0]+v*b,p[1]+v*D],n.properties);default:var g=function(d,E){E===void 0&&(E={}),E.concavity=E.concavity||1/0;var w=[];if(pe(d,function(C){w.push([C[0],C[1]])}),!w.length)return null;var k=qo(w,E.concavity);return k.length>3?wn([k]):null}(t);return g?ta(g,{properties:n.properties}):Qo(t,{properties:n.properties})}}function ea(t){if(!t)throw Error("geojson is required");var n=[];return Ze(t,function(r){(function(e,i){var o=[],a=e.geometry;if(a!==null){switch(a.type){case"Polygon":o=Re(a);break;case"LineString":o=[Re(a)]}o.forEach(function(s){var u=function(l,c){var f=[];return l.reduce(function(p,b){var D,m,y,v,g,d,E=Rt([p,b],c);return E.bbox=[(g=(m=b)[0])>(y=(D=p)[0])?y:g,(d=m[1])>(v=D[1])?v:d,y>g?y:g,v>d?v:d],f.push(E),b}),f}(s,e.properties);u.forEach(function(l){l.id=i.length,i.push(l)})})}})(r,n)}),Q(n)}qo.default=Zo;function Eu(t,n,r){if(!r)return n.indexOf(t);for(let e=0;n.length>e;e++)if(r(t,n[e]))return e;return-1}function en(t,n){Ln(t,0,t.children.length,n,t)}function Ln(t,n,r,e,i){i||(i=nn(null)),i.minX=1/0,i.minY=1/0,i.maxX=-1/0,i.maxY=-1/0;for(let o=n;r>o;o++){const a=t.children[o];An(i,t.leaf?e(a):a)}return i}function An(t,n){return t.minX=Math.min(t.minX,n.minX),t.minY=Math.min(t.minY,n.minY),t.maxX=Math.max(t.maxX,n.maxX),t.maxY=Math.max(t.maxY,n.maxY),t}function wu(t,n){return t.minX-n.minX}function Pu(t,n){return t.minY-n.minY}function ti(t){return(t.maxX-t.minX)*(t.maxY-t.minY)}function rr(t){return t.maxX-t.minX+(t.maxY-t.minY)}function xu(t,n){const r=Math.max(t.minX,n.minX),e=Math.max(t.minY,n.minY),i=Math.min(t.maxX,n.maxX),o=Math.min(t.maxY,n.maxY);return Math.max(0,i-r)*Math.max(0,o-e)}function ei(t,n){return!(t.minX>n.minX||t.minY>n.minY||n.maxX>t.maxX||n.maxY>t.maxY)}function ir(t,n){return!(n.minX>t.maxX||n.minY>t.maxY||t.minX>n.maxX||t.minY>n.maxY)}function nn(t){return{children:t,height:1,leaf:!0,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0}}function na(t,n,r,e,i){const o=[n,r];for(;o.length;){if(e>=(r=o.pop())-(n=o.pop()))continue;const a=n+Math.ceil((r-n)/e/2)*e;Io(t,a,n,r,i),o.push(n,a,a,r)}}var ku=Object.freeze({__proto__:null,default:class{constructor(t=9){this._maxEntries=Math.max(4,t),this._minEntries=Math.max(2,Math.ceil(.4*this._maxEntries)),this.clear()}all(){return this._all(this.data,[])}search(t){let n=this.data;const r=[];if(!ir(t,n))return r;const e=this.toBBox,i=[];for(;n;){for(let o=0;n.children.length>o;o++){const a=n.children[o],s=n.leaf?e(a):a;ir(t,s)&&(n.leaf?r.push(a):ei(t,s)?this._all(a,r):i.push(a))}n=i.pop()}return r}collides(t){let n=this.data;if(!ir(t,n))return!1;const r=[];for(;n;){for(let e=0;n.children.length>e;e++){const i=n.children[e],o=n.leaf?this.toBBox(i):i;if(ir(t,o)){if(n.leaf||ei(t,o))return!0;r.push(i)}}n=r.pop()}return!1}load(t){if(!t||!t.length)return this;if(this._minEntries>t.length){for(let r=0;t.length>r;r++)this.insert(t[r]);return this}let n=this._build(t.slice(),0,t.length-1,0);if(this.data.children.length)if(this.data.height===n.height)this._splitRoot(this.data,n);else{if(n.height>this.data.height){const r=this.data;this.data=n,n=r}this._insert(n,this.data.height-n.height-1,!0)}else this.data=n;return this}insert(t){return t&&this._insert(t,this.data.height-1),this}clear(){return this.data=nn([]),this}remove(t,n){if(!t)return this;let r=this.data;const e=this.toBBox(t),i=[],o=[];let a,s,u;for(;r||i.length;){if(r||(r=i.pop(),s=i[i.length-1],a=o.pop(),u=!0),r.leaf){const l=Eu(t,r.children,n);if(l!==-1)return r.children.splice(l,1),i.push(r),this._condense(i),this}u||r.leaf||!ei(r,e)?s?(a++,r=s.children[a],u=!1):r=null:(i.push(r),o.push(a),a=0,s=r,r=r.children[0])}return this}toBBox(t){return t}compareMinX(t,n){return t.minX-n.minX}compareMinY(t,n){return t.minY-n.minY}toJSON(){return this.data}fromJSON(t){return this.data=t,this}_all(t,n){const r=[];for(;t;)t.leaf?n.push(...t.children):r.push(...t.children),t=r.pop();return n}_build(t,n,r,e){const i=r-n+1;let o,a=this._maxEntries;if(a>=i)return o=nn(t.slice(n,r+1)),en(o,this.toBBox),o;e||(a=Math.ceil(i/Math.pow(a,(e=Math.ceil(Math.log(i)/Math.log(a)))-1))),o=nn([]),o.leaf=!1,o.height=e;const s=Math.ceil(i/a),u=s*Math.ceil(Math.sqrt(a));na(t,n,r,u,this.compareMinX);for(let l=n;r>=l;l+=u){const c=Math.min(l+u-1,r);na(t,l,c,s,this.compareMinY);for(let f=l;c>=f;f+=s)o.children.push(this._build(t,f,Math.min(f+s-1,c),e-1))}return en(o,this.toBBox),o}_chooseSubtree(t,n,r,e){for(;e.push(n),!n.leaf&&e.length-1!==r;){let a,s=1/0,u=1/0;for(let l=0;n.children.length>l;l++){const c=n.children[l],f=ti(c),p=(Math.max((o=c).maxX,(i=t).maxX)-Math.min(o.minX,i.minX))*(Math.max(o.maxY,i.maxY)-Math.min(o.minY,i.minY))-f;u>p?(u=p,s=s>f?f:s,a=c):p===u&&s>f&&(s=f,a=c)}n=a||n.children[0]}var i,o;return n}_insert(t,n,r){const e=r?t:this.toBBox(t),i=[],o=this._chooseSubtree(e,this.data,n,i);for(o.children.push(t),An(o,e);n>=0&&i[n].children.length>this._maxEntries;)this._split(i,n),n--;this._adjustParentBBoxes(e,i,n)}_split(t,n){const r=t[n],e=r.children.length,i=this._minEntries;this._chooseSplitAxis(r,i,e);const o=this._chooseSplitIndex(r,i,e),a=nn(r.children.splice(o,r.children.length-o));a.height=r.height,a.leaf=r.leaf,en(r,this.toBBox),en(a,this.toBBox),n?t[n-1].children.push(a):this._splitRoot(r,a)}_splitRoot(t,n){this.data=nn([t,n]),this.data.height=t.height+1,this.data.leaf=!1,en(this.data,this.toBBox)}_chooseSplitIndex(t,n,r){let e,i=1/0,o=1/0;for(let a=n;r-n>=a;a++){const s=Ln(t,0,a,this.toBBox),u=Ln(t,a,r,this.toBBox),l=xu(s,u),c=ti(s)+ti(u);i>l?(i=l,e=a,o=o>c?c:o):l===i&&o>c&&(o=c,e=a)}return e||r-n}_chooseSplitAxis(t,n,r){const e=t.leaf?this.compareMinX:wu,i=t.leaf?this.compareMinY:Pu,o=this._allDistMargin(t,n,r,e);this._allDistMargin(t,n,r,i)>o&&t.children.sort(e)}_allDistMargin(t,n,r,e){t.children.sort(e);const i=this.toBBox,o=Ln(t,0,n,i),a=Ln(t,r-n,r,i);let s=rr(o)+rr(a);for(let u=n;r-n>u;u++){const l=t.children[u];An(o,t.leaf?i(l):l),s+=rr(o)}for(let u=r-n-1;u>=n;u--){const l=t.children[u];An(a,t.leaf?i(l):l),s+=rr(a)}return s}_adjustParentBBoxes(t,n,r){for(let e=r;e>=0;e--)An(n[e],t)}_condense(t){for(let n,r=t.length-1;r>=0;r--)t[r].children.length===0?r>0?(n=t[r-1].children,n.splice(n.indexOf(t[r]),1)):this.clear():en(t[r],this.toBBox)}}}),oe=Qe(ku),Mu=Qe(ru),Lu=Qe(iu),rn=Qe(ou).default,Au=Lu.featureEach,ra=Mu.featureCollection;function ia(t){var n=new oe(t);return n.insert=function(r){if(r.type!=="Feature")throw Error("invalid feature");return r.bbox=r.bbox?r.bbox:rn(r),oe.prototype.insert.call(this,r)},n.load=function(r){var e=[];return Array.isArray(r)?r.forEach(function(i){if(i.type!=="Feature")throw Error("invalid features");i.bbox=i.bbox?i.bbox:rn(i),e.push(i)}):Au(r,function(i){if(i.type!=="Feature")throw Error("invalid features");i.bbox=i.bbox?i.bbox:rn(i),e.push(i)}),oe.prototype.load.call(this,e)},n.remove=function(r,e){if(r.type!=="Feature")throw Error("invalid feature");return r.bbox=r.bbox?r.bbox:rn(r),oe.prototype.remove.call(this,r,e)},n.clear=function(){return oe.prototype.clear.call(this)},n.search=function(r){var e=oe.prototype.search.call(this,this.toBBox(r));return ra(e)},n.collides=function(r){return oe.prototype.collides.call(this,this.toBBox(r))},n.all=function(){var r=oe.prototype.all.call(this);return ra(r)},n.toJSON=function(){return oe.prototype.toJSON.call(this)},n.fromJSON=function(r){return oe.prototype.fromJSON.call(this,r)},n.toBBox=function(r){var e;if(r.bbox)e=r.bbox;else if(Array.isArray(r)&&r.length===4)e=r;else if(Array.isArray(r)&&r.length===6)e=[r[0],r[1],r[3],r[4]];else if(r.type==="Feature")e=rn(r);else{if(r.type!=="FeatureCollection")throw Error("invalid geojson");e=rn(r)}return{minX:e[0],minY:e[1],maxX:e[2],maxY:e[3]}},n}var oa=ia;function _u(t,n){var r={},e=[];if(t.type==="LineString"&&(t=Vt(t)),n.type==="LineString"&&(n=Vt(n)),t.type==="Feature"&&n.type==="Feature"&&t.geometry!==null&&n.geometry!==null&&t.geometry.type==="LineString"&&n.geometry.type==="LineString"&&t.geometry.coordinates.length===2&&n.geometry.coordinates.length===2){var i=aa(t,n);return i&&e.push(i),Q(e)}var o=oa();return o.load(ea(n)),Kn(ea(t),function(a){Kn(o.search(a),function(s){var u=aa(a,s);if(u){var l=Re(u).join(",");r[l]||(r[l]=!0,e.push(u))}})}),Q(e)}function aa(t,n){var r=Re(t),e=Re(n);if(r.length!==2)throw Error("<intersects> line1 must only contain 2 coordinates");if(e.length!==2)throw Error("<intersects> line2 must only contain 2 coordinates");var i=r[0][0],o=r[0][1],a=r[1][0],s=r[1][1],u=e[0][0],l=e[0][1],c=e[1][0],f=e[1][1],p=(f-l)*(a-i)-(c-u)*(s-o),b=(c-u)*(o-l)-(f-l)*(i-u),D=(a-i)*(o-l)-(s-o)*(i-u);if(p===0)return null;var m=b/p,y=D/p;return 0>m||m>1||0>y||y>1?null:ot([i+m*(a-i),o+m*(s-o)])}oa.default=ia;var sa=6378137;function Ou(t){return Ho(t,function(n,r){return n+function(e){var i,o=0;switch(e.type){case"Polygon":return ua(e.coordinates);case"MultiPolygon":for(i=0;e.coordinates.length>i;i++)o+=ua(e.coordinates[i]);return o;case"Point":case"MultiPoint":case"LineString":case"MultiLineString":return 0}return 0}(r)},0)}function ua(t){var n=0;if(t&&t.length>0){n+=Math.abs(la(t[0]));for(var r=1;t.length>r;r++)n-=Math.abs(la(t[r]))}return n}function la(t){var n,r,e,i,o,a,s=0,u=t.length;if(u>2){for(a=0;u>a;a++)a===u-2?(e=u-2,i=u-1,o=0):a===u-1?(e=u-1,i=0,o=1):(e=a,i=a+1,o=a+2),n=t[e],r=t[i],s+=(ni(t[o][0])-ni(n[0]))*Math.sin(ni(r[1]));s=s*sa*sa/2}return s}function ni(t){return t*Math.PI/180}function ca(t,n){return n===void 0&&(n={}),Bo(t,function(r,e){var i=e.geometry.coordinates;return r+ve(i[0],i[1],n)},0)}function Cu(t,n){n===void 0&&(n={});var r=$n(t);switch(n.properties||t.type!=="Feature"||(n.properties=t.properties),r.type){case"Polygon":return function(e,i){i===void 0&&(i={});var o=$n(e),a=o.coordinates,s=i.properties?i.properties:e.type==="Feature"?e.properties:{};return ha(a,s)}(r,n);case"MultiPolygon":return function(e,i){i===void 0&&(i={});var o=$n(e),a=o.coordinates,s=i.properties?i.properties:e.type==="Feature"?e.properties:{},u=[];return a.forEach(function(l){u.push(ha(l,s))}),Q(u)}(r,n);default:throw Error("invalid poly")}}function ha(t,n){return t.length>1?Yr(t,n):Rt(t[0],n)}function Ru(t){for(var n,r,e=Re(t),i=0,o=1;e.length>o;)n=r||e[0],i+=((r=e[o])[0]-n[0])*(r[1]+n[1]),o++;return i>0}var or=Je(function(t){var n=Object.prototype.hasOwnProperty,r="~";function e(){}function i(u,l,c){this.fn=u,this.context=l,this.once=c||!1}function o(u,l,c,f,p){if(typeof c!="function")throw new TypeError("The listener must be a function");var b=new i(c,f||u,p),D=r?r+l:l;return u._events[D]?u._events[D].fn?u._events[D]=[u._events[D],b]:u._events[D].push(b):(u._events[D]=b,u._eventsCount++),u}function a(u,l){--u._eventsCount==0?u._events=new e:delete u._events[l]}function s(){this._events=new e,this._eventsCount=0}Object.create&&(e.prototype=Object.create(null),new e().__proto__||(r=!1)),s.prototype.eventNames=function(){var u,l,c=[];if(this._eventsCount===0)return c;for(l in u=this._events)n.call(u,l)&&c.push(r?l.slice(1):l);return Object.getOwnPropertySymbols?c.concat(Object.getOwnPropertySymbols(u)):c},s.prototype.listeners=function(u){var l=this._events[r?r+u:u];if(!l)return[];if(l.fn)return[l.fn];for(var c=0,f=l.length,p=Array(f);f>c;c++)p[c]=l[c].fn;return p},s.prototype.listenerCount=function(u){var l=this._events[r?r+u:u];return l?l.fn?1:l.length:0},s.prototype.emit=function(u,l,c,f,p,b){var D=r?r+u:u;if(!this._events[D])return!1;var m,y,v=this._events[D],g=arguments.length;if(v.fn){switch(v.once&&this.removeListener(u,v.fn,void 0,!0),g){case 1:return v.fn.call(v.context),!0;case 2:return v.fn.call(v.context,l),!0;case 3:return v.fn.call(v.context,l,c),!0;case 4:return v.fn.call(v.context,l,c,f),!0;case 5:return v.fn.call(v.context,l,c,f,p),!0;case 6:return v.fn.call(v.context,l,c,f,p,b),!0}for(y=1,m=Array(g-1);g>y;y++)m[y-1]=arguments[y];v.fn.apply(v.context,m)}else{var d,E=v.length;for(y=0;E>y;y++)switch(v[y].once&&this.removeListener(u,v[y].fn,void 0,!0),g){case 1:v[y].fn.call(v[y].context);break;case 2:v[y].fn.call(v[y].context,l);break;case 3:v[y].fn.call(v[y].context,l,c);break;case 4:v[y].fn.call(v[y].context,l,c,f);break;default:if(!m)for(d=1,m=Array(g-1);g>d;d++)m[d-1]=arguments[d];v[y].fn.apply(v[y].context,m)}}return!0},s.prototype.on=function(u,l,c){return o(this,u,l,c,!1)},s.prototype.once=function(u,l,c){return o(this,u,l,c,!0)},s.prototype.removeListener=function(u,l,c,f){var p=r?r+u:u;if(!this._events[p])return this;if(!l)return a(this,p),this;var b=this._events[p];if(b.fn)b.fn!==l||f&&!b.once||c&&b.context!==c||a(this,p);else{for(var D=0,m=[],y=b.length;y>D;D++)(b[D].fn!==l||f&&!b[D].once||c&&b[D].context!==c)&&m.push(b[D]);m.length?this._events[p]=m.length===1?m[0]:m:a(this,p)}return this},s.prototype.removeAllListeners=function(u){var l;return u?this._events[l=r?r+u:u]&&a(this,l):(this._events=new e,this._eventsCount=0),this},s.prototype.off=s.prototype.removeListener,s.prototype.addListener=s.prototype.on,s.prefixed=r,s.EventEmitter=s,t.exports=s}),Se=function(t){ft(r,t);var n=pt(r);function r(e,i){var o,a=i.style;return rt(this,r),(o=n.call(this)).scene=void 0,o.style=void 0,o.layers=void 0,o.data=[],o.scene=e,o.style=a,o.layers=o.initLayers(),o.layers.forEach(function(s){e.addLayer(s)}),a.callback instanceof Function&&a.callback(o.layers),o}return it(r,[{key:"getLayers",value:function(){return this.layers}},{key:"show",value:function(){this.layers.forEach(function(e){e.show()})}},{key:"hide",value:function(){this.layers.forEach(function(e){e.hide()})}},{key:"setData",value:function(e){this.data=e;var i=Q(e);this.layers.forEach(function(o){o.setData(i)})}},{key:"destroy",value:function(){var e=this;this.layers.forEach(function(i){e.scene.removeLayer(i)})}}]),r}(or.EventEmitter),da=function(t){ft(r,t);var n=pt(r);function r(){return rt(this,r),n.apply(this,arguments)}return it(r,[{key:"initLayers",value:function(){var e=this.style,i=e.normal,o=e.style,a=e.options;return[new st.LineLayer(a!=null?a:{}).source(Q([])).size(i.size).color(i.color).shape("line").style(o)]}}]),r}(Se),ee=function(t){var n=typeof t;return t!=null&&(n=="object"||n=="function")},fa=typeof Qn=="object"&&Qn&&Qn.Object===Object&&Qn,Su=typeof self=="object"&&self&&self.Object===Object&&self,ne=fa||Su||Function("return this")(),ri=function(){return ne.Date.now()},Tu=/\s/,ju=function(t){for(var n=t.length;n--&&Tu.test(t.charAt(n)););return n},Hu=/^\s+/,Fu=function(t){return t&&t.slice(0,ju(t)+1).replace(Hu,"")},me=ne.Symbol,pa=Object.prototype,Bu=pa.hasOwnProperty,Nu=pa.toString,_n=me?me.toStringTag:void 0,Uu=function(t){var n=Bu.call(t,_n),r=t[_n];try{t[_n]=void 0;var e=!0}catch(o){}var i=Nu.call(t);return e&&(n?t[_n]=r:delete t[_n]),i},Iu=Object.prototype.toString,Yu=function(t){return Iu.call(t)},va=me?me.toStringTag:void 0,Te=function(t){return t==null?t===void 0?"[object Undefined]":"[object Null]":va&&va in Object(t)?Uu(t):Yu(t)},ae=function(t){return t!=null&&typeof t=="object"},Xu=function(t){return typeof t=="symbol"||ae(t)&&Te(t)=="[object Symbol]"},zu=/^[-+]0x[0-9a-f]+$/i,Wu=/^0b[01]+$/i,Vu=/^0o[0-7]+$/i,qu=parseInt,ga=function(t){if(typeof t=="number")return t;if(Xu(t))return NaN;if(ee(t)){var n=typeof t.valueOf=="function"?t.valueOf():t;t=ee(n)?n+"":n}if(typeof t!="string")return t===0?t:+t;t=Fu(t);var r=Wu.test(t);return r||Vu.test(t)?qu(t.slice(2),r?2:8):zu.test(t)?NaN:+t},Zu=Math.max,Ku=Math.min,be=function(t,n,r){var e,i,o,a,s,u,l=0,c=!1,f=!1,p=!0;if(typeof t!="function")throw new TypeError("Expected a function");function b(g){var d=e,E=i;return e=i=void 0,l=g,a=t.apply(E,d)}function D(g){var d=g-u;return u===void 0||d>=n||0>d||f&&g-l>=o}function m(){var g=ri();if(D(g))return y(g);s=setTimeout(m,function(d){var E=n-(d-u);return f?Ku(E,o-(d-l)):E}(g))}function y(g){return s=void 0,p&&e?b(g):(e=i=void 0,a)}function v(){var g=ri(),d=D(g);if(e=arguments,i=this,u=g,d){if(s===void 0)return function(E){return l=E,s=setTimeout(m,n),c?b(E):a}(u);if(f)return clearTimeout(s),s=setTimeout(m,n),b(u)}return s===void 0&&(s=setTimeout(m,n)),a}return n=ga(n)||0,ee(r)&&(c=!!r.leading,o=(f="maxWait"in r)?Zu(ga(r.maxWait)||0,n):o,p="trailing"in r?!!r.trailing:p),v.cancel=function(){s!==void 0&&clearTimeout(s),l=0,e=u=i=s=void 0},v.flush=function(){return s===void 0?a:y(ri())},v},ya=function(t){ft(r,t);var n=pt(r);function r(){var e;rt(this,r);for(var i=arguments.length,o=Array(i),a=0;i>a;a++)o[a]=arguments[a];return(e=n.call.apply(n,[this].concat(o))).onMouseMove=function(s){e.emit(h.RenderEvent.Mousemove,s)},e.onMouseOut=function(s){e.emit(h.RenderEvent.Mouseout,s)},e.onMouseDown=function(s){e.emit(h.RenderEvent.Dragstart,s)},e.onDragging=function(s){e.emit(h.RenderEvent.Dragging,s)},e.onDragEnd=be(function(s){e.emit(h.RenderEvent.Dragend,s)},0),e.onUnClick=function(s){e.emit(h.RenderEvent.UnClick,s)},e.enableHover=function(){var s,u;e.disableHover(),(s=e.layers[0])===null||s===void 0||s.on(h.LayerEvent.Mousemove,e.onMouseMove),(u=e.layers[0])===null||u===void 0||u.on(h.LayerEvent.Mouseout,e.onMouseOut)},e.disableHover=function(){var s,u;(s=e.layers[0])===null||s===void 0||s.off(h.LayerEvent.Mousemove,e.onMouseMove),(u=e.layers[0])===null||u===void 0||u.off(h.LayerEvent.Mouseout,e.onMouseOut)},e}return it(r,[{key:"initLayers",value:function(){var e=this.style,i=e.normal,o=e.hover,a=e.active,s=e.style,u=e.options;return[new st.LineLayer(u!=null?u:{}).source(Q([])).size("isHover*isActive",function(l,c){return c?a.size:l?o.size:i.size}).color("isHover*isActive",function(l,c){return c?a.color:l?o.color:i.color}).shape("line").style(s)]}},{key:"enableDrag",value:function(){this.disableDrag(),this.layers[0].on(h.LayerEvent.Mousedown,this.onMouseDown),this.scene.on(h.SceneEvent.Dragging,this.onDragging),this.scene.on(h.SceneEvent.Mouseup,this.onDragEnd),this.scene.on(h.SceneEvent.Dragend,this.onDragEnd)}},{key:"disableDrag",value:function(){this.layers[0].off(h.LayerEvent.Mousedown,this.onMouseDown),this.scene.off(h.SceneEvent.Dragging,this.onDragging),this.scene.off(h.SceneEvent.Mouseup,this.onDragEnd),this.scene.off(h.SceneEvent.Dragend,this.onDragEnd)}},{key:"enableUnClick",value:function(){this.disableUnClick(),this.layers[0].on(h.LayerEvent.UnClick,this.onUnClick)}},{key:"disableUnClick",value:function(){this.layers[0].off(h.LayerEvent.UnClick,this.onUnClick)}}]),r}(Se),ma=function(t){ft(r,t);var n=pt(r);function r(){var e;rt(this,r);for(var i=arguments.length,o=Array(i),a=0;i>a;a++)o[a]=arguments[a];return(e=n.call.apply(n,[this].concat(o))).onMouseMove=function(s){e.emit(h.RenderEvent.Mousemove,s)},e.onMouseOut=function(s){e.emit(h.RenderEvent.Mouseout,s)},e.onMouseDown=function(s){e.emit(h.RenderEvent.Click,s)},e}return it(r,[{key:"initLayers",value:function(){var e=this.style,i=e.normal,o=e.style,a=e.options,s=i.shape,u=i.size,l=i.color,c=i.stroke;return[new st.PointLayer(a!=null?a:{}).source(Q([])).size(u).color(l).shape(s).style(x({stroke:c},o))]}},{key:"enableClick",value:function(){this.disableClick(),this.layers[0].on(h.LayerEvent.Mousedown,this.onMouseDown)}},{key:"disableClick",value:function(){this.layers[0].off(h.LayerEvent.Mousedown,this.onMouseDown)}},{key:"enableHover",value:function(){var e,i;this.disableHover(),(e=this.layers[0])===null||e===void 0||e.on(h.LayerEvent.Mousemove,this.onMouseMove),(i=this.layers[0])===null||i===void 0||i.on(h.LayerEvent.Mouseout,this.onMouseOut)}},{key:"disableHover",value:function(){var e,i;(e=this.layers[0])===null||e===void 0||e.off(h.LayerEvent.Mousemove,this.onMouseMove),(i=this.layers[0])===null||i===void 0||i.off(h.LayerEvent.Mouseout,this.onMouseOut)}}]),r}(Se),ba=function(t){ft(r,t);var n=pt(r);function r(){var e;rt(this,r);for(var i=arguments.length,o=Array(i),a=0;i>a;a++)o[a]=arguments[a];return(e=n.call.apply(n,[this].concat(o))).onCreate=function(s){e.emit(h.RenderEvent.UnClick,s)},e.onMouseMove=function(s){e.emit(h.RenderEvent.Mousemove,s)},e.onMouseOut=function(s){e.emit(h.RenderEvent.Mouseout,s)},e.onMouseDown=function(s){e.emit(h.RenderEvent.Dragstart,s)},e.onDragging=function(s){e.emit(h.RenderEvent.Dragging,s)},e.onDragEnd=be(function(s){e.emit(h.RenderEvent.Dragend,s)},0),e.onClick=function(s){e.emit(h.RenderEvent.Click,s)},e.onContextmenu=function(s){e.emit(h.RenderEvent.Contextmenu,s)},e}return it(r,[{key:"initLayers",value:function(){var e=this.style,i=e.normal,o=e.hover,a=e.active,s=e.style,u=e.options;return[new st.PointLayer(u!=null?u:{}).source(Q([])).size("isHover*isActive",function(l,c){return c?a.size:l?o.size:i.size}).color("isHover*isActive",function(l,c){return c?a.color:l?o.color:i.color}).shape("isHover*isActive",function(l,c){return c?a.shape:l?o.shape:i.shape}).style(x({stroke:["isHover*isActive",function(l,c){return c?a.stroke:l?o.stroke:i.stroke}]},s))]}},{key:"enableCreate",value:function(){this.disableCreate(),this.layers[0].on(h.LayerEvent.UnClick,this.onCreate)}},{key:"disableCreate",value:function(){this.layers[0].off(h.LayerEvent.UnClick,this.onCreate)}},{key:"enableHover",value:function(){var e,i;this.disableHover(),(e=this.layers[0])===null||e===void 0||e.on(h.LayerEvent.Mousemove,this.onMouseMove),(i=this.layers[0])===null||i===void 0||i.on(h.LayerEvent.Mouseout,this.onMouseOut)}},{key:"disableHover",value:function(){var e,i;(e=this.layers[0])===null||e===void 0||e.off(h.LayerEvent.Mousemove,this.onMouseMove),(i=this.layers[0])===null||i===void 0||i.off(h.LayerEvent.Mouseout,this.onMouseOut)}},{key:"enableDrag",value:function(){this.disableDrag(),this.layers[0].on(h.LayerEvent.Mousedown,this.onMouseDown),this.scene.on(h.SceneEvent.Dragging,this.onDragging),this.scene.on(h.SceneEvent.Mouseup,this.onDragEnd),this.scene.on(h.SceneEvent.Dragend,this.onDragEnd)}},{key:"disableDrag",value:function(){this.layers[0].off(h.LayerEvent.Mousedown,this.onMouseDown),this.scene.off(h.SceneEvent.Dragging,this.onDragging),this.scene.off(h.SceneEvent.Mouseup,this.onDragEnd),this.scene.off(h.SceneEvent.Dragend,this.onDragEnd)}},{key:"enableClick",value:function(){this.disableClick(),this.layers[0].on(h.LayerEvent.Click,this.onClick)}},{key:"disableClick",value:function(){this.layers[0].off(h.LayerEvent.Click,this.onClick)}},{key:"enableContextMenu",value:function(){this.disableContextMenu(),this.layers[0].on(h.LayerEvent.Contextmenu,this.onContextmenu)}},{key:"disableContextMenu",value:function(){this.layers[0].off(h.LayerEvent.Contextmenu,this.onContextmenu)}}]),r}(Se),Da=function(t){ft(r,t);var n=pt(r);function r(){var e;rt(this,r);for(var i=arguments.length,o=Array(i),a=0;i>a;a++)o[a]=arguments[a];return(e=n.call.apply(n,[this].concat(o))).onMouseMove=function(s){e.emit(h.RenderEvent.Mousemove,s)},e.onMouseOut=function(s){e.emit(h.RenderEvent.Mouseout,s)},e.onMouseDown=function(s){e.emit(h.RenderEvent.Dragstart,s)},e.onDragging=function(s){e.emit(h.RenderEvent.Dragging,s)},e.onDragEnd=be(function(s){e.emit(h.RenderEvent.Dragend,s)},0),e.onUnClick=function(s){e.emit(h.RenderEvent.UnClick,s)},e.enableHover=function(){var s,u;e.disableHover(),(s=e.layers[0])===null||s===void 0||s.on(h.LayerEvent.Mousemove,e.onMouseMove),(u=e.layers[0])===null||u===void 0||u.on(h.LayerEvent.Mouseout,e.onMouseOut)},e.disableHover=function(){var s,u;(s=e.layers[0])===null||s===void 0||s.off(h.LayerEvent.Mousemove,e.onMouseMove),(u=e.layers[0])===null||u===void 0||u.off(h.LayerEvent.Mouseout,e.onMouseOut)},e}return it(r,[{key:"initLayers",value:function(){var e=this.style,i=e.normal,o=e.hover,a=e.active,s=e.style,u=e.options,l=new st.PolygonLayer(u!=null?u:{});return l.source(Q([])).color("isHover*isActive",function(c,f){return f?a.color:c?o.color:i.color}).style(s),[l]}},{key:"enableDrag",value:function(){this.disableDrag(),this.layers[0].on(h.LayerEvent.Mousedown,this.onMouseDown),this.scene.on(h.SceneEvent.Dragging,this.onDragging),this.scene.on(h.SceneEvent.Mouseup,this.onDragEnd),this.scene.on(h.SceneEvent.Dragend,this.onDragEnd)}},{key:"disableDrag",value:function(){this.layers[0].off(h.LayerEvent.Mousedown,this.onMouseDown),this.scene.off(h.SceneEvent.Dragging,this.onDragging),this.scene.off(h.SceneEvent.Mouseup,this.onDragEnd),this.scene.off(h.SceneEvent.Dragend,this.onDragEnd)}},{key:"enableUnClick",value:function(){this.disableUnClick(),this.layers[0].on(h.LayerEvent.UnClick,this.onUnClick)}},{key:"disableUnClick",value:function(){this.layers[0].off(h.LayerEvent.UnClick,this.onUnClick)}}]),r}(Se),Ea=function(t){ft(r,t);var n=pt(r);function r(e){var i;return rt(this,r),(i=n.call(this)).scene=void 0,i.previousClick=void 0,i.onDblClick=function(o){var a,s,u=(a=(s=o.pixel)!==null&&s!==void 0?s:o.point)!==null&&a!==void 0?a:{},l=u.x,c=l===void 0?0:l,f=u.y,p=f===void 0?0:f,b=Date.now();if(i.previousClick){var D=i.previousClick,m=D.y;300>b-D.time&&5>Math.abs(c-D.x)&&5>Math.abs(p-m)&&i.emit(h.RenderEvent.DblClick,o)}i.previousClick={x:c,y:p,time:b}},i.onMouseMove=function(o){i.emit(h.RenderEvent.Mousemove,o)},i.onMouseDown=function(o){i.emit(h.RenderEvent.Dragstart,o)},i.onDragging=function(o){i.emit(h.RenderEvent.Dragging,o)},i.onDragEnd=be(function(o){i.emit(h.RenderEvent.Dragend,o)},0),i.scene=e,i}return it(r,[{key:"enableDrag",value:function(){this.disableDrag(),this.scene.on(h.SceneEvent.Mousedown,this.onMouseDown),this.scene.on(h.SceneEvent.Dragging,this.onDragging),this.scene.on(h.SceneEvent.Mouseup,this.onDragEnd),this.scene.on(h.SceneEvent.Dragend,this.onDragEnd)}},{key:"disableDrag",value:function(){this.scene.off(h.SceneEvent.Mousedown,this.onMouseDown),this.scene.off(h.SceneEvent.Dragging,this.onDragging),this.scene.off(h.SceneEvent.Mouseup,this.onDragEnd),this.scene.off(h.SceneEvent.Dragend,this.onDragEnd)}},{key:"enableMouseMove",value:function(){this.disableMouseMove(),this.scene.on(h.SceneEvent.Mousemove,this.onMouseMove)}},{key:"disableMouseMove",value:function(){this.scene.off(h.SceneEvent.Mousemove,this.onMouseMove)}},{key:"enableDblClick",value:function(){this.disableDblClick(),this.scene.on(h.SceneEvent.Mousedown,this.onDblClick)}},{key:"disableDblClick",value:function(){this.scene.off(h.SceneEvent.Mousedown,this.onDblClick)}}]),r}(or),wa=function(t){ft(r,t);var n=pt(r);function r(){return rt(this,r),n.apply(this,arguments)}return it(r,[{key:"initLayers",value:function(){var e=this.style,i=e.normal,o=e.active,a=e.style,s=e.options;return[new st.PointLayer(s!=null?s:{}).source(Q([])).size("isActive",function(u){return u?o.size:i.size}).color("isActive",function(u){return u?o.color:i.color}).shape("text","text").style(x({stroke:["isActive",function(u){return u?o.stroke:i.stroke}]},a))]}}]),r}(Se),Pa={point:ba,line:ya,dashLine:da,midPoint:ma,text:wa,polygon:Da},je="#1990FF",De="#ED9D48",Ee={blend:"normal",pickingBuffer:5},ar={color:je,shape:"circle",size:6,stroke:"#ffffff"},sr={color:De,shape:"circle",size:6,stroke:"#ffffff"},xa={shape:"circle",size:6,color:De,stroke:"#ffffff"},ka={options:Ee,normal:ar,hover:x(x({},ar),{},{size:8}),active:x(x({},ar),{},{size:8,color:De}),style:{strokeWidth:2}},Ma={options:Ee,normal:sr,hover:x(x({},sr),{},{size:8}),active:x(x({},sr),{},{size:8}),style:{strokeWidth:2}},ur={color:je,size:12,stroke:"#ffffff"},La={point:Ma,line:{options:Ee,normal:{color:je,size:2},hover:{color:je,size:2},active:{color:De,size:2},style:{}},polygon:{options:Ee,normal:{color:je},hover:{color:je},active:{color:De},style:{opacity:.15}},midPoint:{options:Ee,normal:xa},dashLine:{options:Ee,normal:{color:De,size:2},style:{lineType:"dash",dashArray:[6,6]}},text:{options:Ee,normal:ur,active:x(x({},ur),{},{color:De}),style:{fontWeight:"800",textOffset:[0,ur.size+6],textAllowOverlap:!0,strokeWidth:2}}},On=function(t,n){return t===n||t!=t&&n!=n},lr=function(t,n){for(var r=t.length;r--;)if(On(t[r][0],n))return r;return-1},$u=Array.prototype.splice,Gu=function(t){var n=this.__data__,r=lr(n,t);return r>=0&&(r==n.length-1?n.pop():$u.call(n,r,1),--this.size,!0)},Ju=function(t){var n=this.__data__,r=lr(n,t);return 0>r?void 0:n[r][1]},Qu=function(t){return lr(this.__data__,t)>-1},tl=function(t,n){var r=this.__data__,e=lr(r,t);return 0>e?(++this.size,r.push([t,n])):r[e][1]=n,this};function on(t){var n=-1,r=t==null?0:t.length;for(this.clear();++n<r;){var e=t[n];this.set(e[0],e[1])}}on.prototype.clear=function(){this.__data__=[],this.size=0},on.prototype.delete=Gu,on.prototype.get=Ju,on.prototype.has=Qu,on.prototype.set=tl;var cr=on,el=function(){this.__data__=new cr,this.size=0},nl=function(t){var n=this.__data__,r=n.delete(t);return this.size=n.size,r},rl=function(t){return this.__data__.get(t)},il=function(t){return this.__data__.has(t)},Aa,ii=function(t){if(!ee(t))return!1;var n=Te(t);return n=="[object Function]"||n=="[object GeneratorFunction]"||n=="[object AsyncFunction]"||n=="[object Proxy]"},oi=ne["__core-js_shared__"],_a=(Aa=/[^.]+$/.exec(oi&&oi.keys&&oi.keys.IE_PROTO||""))?"Symbol(src)_1."+Aa:"",ol=function(t){return!!_a&&_a in t},al=Function.prototype.toString,He=function(t){if(t!=null){try{return al.call(t)}catch(n){}try{return t+""}catch(n){}}return""},sl=/^\[object .+?Constructor\]$/,ul=RegExp("^"+Function.prototype.toString.call(Object.prototype.hasOwnProperty).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),ll=function(t){return!(!ee(t)||ol(t))&&(ii(t)?ul:sl).test(He(t))},cl=function(t,n){return t==null?void 0:t[n]},Fe=function(t,n){var r=cl(t,n);return ll(r)?r:void 0},Cn=Fe(ne,"Map"),Rn=Fe(Object,"create"),hl=function(t){var n=this.has(t)&&delete this.__data__[t];return this.size-=n?1:0,n},dl=Object.prototype.hasOwnProperty,fl=function(t){var n=this.__data__;if(Rn){var r=n[t];return r==="__lodash_hash_undefined__"?void 0:r}return dl.call(n,t)?n[t]:void 0},pl=Object.prototype.hasOwnProperty,vl=function(t){var n=this.__data__;return Rn?n[t]!==void 0:pl.call(n,t)},gl=function(t,n){var r=this.__data__;return this.size+=this.has(t)?0:1,r[t]=Rn&&n===void 0?"__lodash_hash_undefined__":n,this};function an(t){var n=-1,r=t==null?0:t.length;for(this.clear();++n<r;){var e=t[n];this.set(e[0],e[1])}}an.prototype.clear=function(){this.__data__=Rn?Rn(null):{},this.size=0},an.prototype.delete=hl,an.prototype.get=fl,an.prototype.has=vl,an.prototype.set=gl;var Oa=an,yl=function(t){var n=typeof t;return n=="string"||n=="number"||n=="symbol"||n=="boolean"?t!=="__proto__":t===null},hr=function(t,n){var r=t.__data__;return yl(n)?r[typeof n=="string"?"string":"hash"]:r.map},ml=function(t){var n=hr(this,t).delete(t);return this.size-=n?1:0,n},bl=function(t){return hr(this,t).get(t)},Dl=function(t){return hr(this,t).has(t)},El=function(t,n){var r=hr(this,t),e=r.size;return r.set(t,n),this.size+=r.size==e?0:1,this};function sn(t){var n=-1,r=t==null?0:t.length;for(this.clear();++n<r;){var e=t[n];this.set(e[0],e[1])}}sn.prototype.clear=function(){this.size=0,this.__data__={hash:new Oa,map:new(Cn||cr),string:new Oa}},sn.prototype.delete=ml,sn.prototype.get=bl,sn.prototype.has=Dl,sn.prototype.set=El;var Ca=sn,wl=function(t,n){var r=this.__data__;if(r instanceof cr){var e=r.__data__;if(!Cn||199>e.length)return e.push([t,n]),this.size=++r.size,this;r=this.__data__=new Ca(e)}return r.set(t,n),this.size=r.size,this};function un(t){var n=this.__data__=new cr(t);this.size=n.size}un.prototype.clear=el,un.prototype.delete=nl,un.prototype.get=rl,un.prototype.has=il,un.prototype.set=wl;var Sn=un,Pl=function(t,n){for(var r=-1,e=t==null?0:t.length;++r<e&&n(t[r],r,t)!==!1;);return t},dr=function(){try{var t=Fe(Object,"defineProperty");return t({},"",{}),t}catch(n){}}(),ai=function(t,n,r){n=="__proto__"&&dr?dr(t,n,{configurable:!0,enumerable:!0,value:r,writable:!0}):t[n]=r},xl=Object.prototype.hasOwnProperty,Ra=function(t,n,r){var e=t[n];xl.call(t,n)&&On(e,r)&&(r!==void 0||n in t)||ai(t,n,r)},Tn=function(t,n,r,e){var i=!r;r||(r={});for(var o=-1,a=n.length;++o<a;){var s=n[o],u=e?e(r[s],t[s],s,r,t):void 0;u===void 0&&(u=t[s]),i?ai(r,s,u):Ra(r,s,u)}return r},kl=function(t,n){for(var r=-1,e=Array(t);++r<t;)e[r]=n(r);return e},Sa=function(t){return ae(t)&&Te(t)=="[object Arguments]"},Ta=Object.prototype,Ml=Ta.hasOwnProperty,Ll=Ta.propertyIsEnumerable,Al=Sa(function(){return arguments}())?Sa:function(t){return ae(t)&&Ml.call(t,"callee")&&!Ll.call(t,"callee")},si=Al,Be=Array.isArray,_l=function(){return!1},jn=Je(function(t,n){var r=n&&!n.nodeType&&n,e=r&&t&&!t.nodeType&&t,i=e&&e.exports===r?ne.Buffer:void 0;t.exports=(i?i.isBuffer:void 0)||_l}),Ol=/^(?:0|[1-9]\d*)$/,ja=function(t,n){var r=typeof t;return!!(n=n==null?9007199254740991:n)&&(r=="number"||r!="symbol"&&Ol.test(t))&&t>-1&&t%1==0&&n>t},Ha=function(t){return typeof t=="number"&&t>-1&&t%1==0&&9007199254740991>=t},et={};et["[object Float32Array]"]=et["[object Float64Array]"]=et["[object Int8Array]"]=et["[object Int16Array]"]=et["[object Int32Array]"]=et["[object Uint8Array]"]=et["[object Uint8ClampedArray]"]=et["[object Uint16Array]"]=et["[object Uint32Array]"]=!0,et["[object Arguments]"]=et["[object Array]"]=et["[object ArrayBuffer]"]=et["[object Boolean]"]=et["[object DataView]"]=et["[object Date]"]=et["[object Error]"]=et["[object Function]"]=et["[object Map]"]=et["[object Number]"]=et["[object Object]"]=et["[object RegExp]"]=et["[object Set]"]=et["[object String]"]=et["[object WeakMap]"]=!1;var Cl=function(t){return ae(t)&&Ha(t.length)&&!!et[Te(t)]},ui=function(t){return function(n){return t(n)}},ln=Je(function(t,n){var r=n&&!n.nodeType&&n,e=r&&t&&!t.nodeType&&t,i=e&&e.exports===r&&fa.process,o=function(){try{var a=e&&e.require&&e.require("util").types;return a||i&&i.binding&&i.binding("util")}catch(s){}}();t.exports=o}),Fa=ln&&ln.isTypedArray,li=Fa?ui(Fa):Cl,Rl=Object.prototype.hasOwnProperty,Ba=function(t,n){var r=Be(t),e=!r&&si(t),i=!r&&!e&&jn(t),o=!r&&!e&&!i&&li(t),a=r||e||i||o,s=a?kl(t.length,String):[],u=s.length;for(var l in t)!n&&!Rl.call(t,l)||a&&(l=="length"||i&&(l=="offset"||l=="parent")||o&&(l=="buffer"||l=="byteLength"||l=="byteOffset")||ja(l,u))||s.push(l);return s},Sl=Object.prototype,ci=function(t){var n=t&&t.constructor;return t===(typeof n=="function"&&n.prototype||Sl)},Na=function(t,n){return function(r){return t(n(r))}},Tl=Na(Object.keys,Object),jl=Object.prototype.hasOwnProperty,Hl=function(t){if(!ci(t))return Tl(t);var n=[];for(var r in Object(t))jl.call(t,r)&&r!="constructor"&&n.push(r);return n},fr=function(t){return t!=null&&Ha(t.length)&&!ii(t)},pr=function(t){return fr(t)?Ba(t):Hl(t)},Fl=function(t,n){return t&&Tn(n,pr(n),t)},Bl=function(t){var n=[];if(t!=null)for(var r in Object(t))n.push(r);return n},Nl=Object.prototype.hasOwnProperty,Ul=function(t){if(!ee(t))return Bl(t);var n=ci(t),r=[];for(var e in t)(e!="constructor"||!n&&Nl.call(t,e))&&r.push(e);return r},Hn=function(t){return fr(t)?Ba(t,!0):Ul(t)},Il=function(t,n){return t&&Tn(n,Hn(n),t)},Ua=Je(function(t,n){var r=n&&!n.nodeType&&n,e=r&&t&&!t.nodeType&&t,i=e&&e.exports===r?ne.Buffer:void 0,o=i?i.allocUnsafe:void 0;t.exports=function(a,s){if(s)return a.slice();var u=a.length,l=o?o(u):new a.constructor(u);return a.copy(l),l}}),Ia=function(t,n){var r=-1,e=t.length;for(n||(n=Array(e));++r<e;)n[r]=t[r];return n},Yl=function(t,n){for(var r=-1,e=t==null?0:t.length,i=0,o=[];++r<e;){var a=t[r];n(a,r,t)&&(o[i++]=a)}return o},Ya=function(){return[]},Xl=Object.prototype.propertyIsEnumerable,Xa=Object.getOwnPropertySymbols,hi=Xa?function(t){return t==null?[]:Yl(Xa(t=Object(t)),function(n){return Xl.call(t,n)})}:Ya,zl=function(t,n){return Tn(t,hi(t),n)},za=function(t,n){for(var r=-1,e=n.length,i=t.length;++r<e;)t[i+r]=n[r];return t},di=Na(Object.getPrototypeOf,Object),Wa=Object.getOwnPropertySymbols?function(t){for(var n=[];t;)za(n,hi(t)),t=di(t);return n}:Ya,Wl=function(t,n){return Tn(t,Wa(t),n)},Va=function(t,n,r){var e=n(t);return Be(t)?e:za(e,r(t))},fi=function(t){return Va(t,pr,hi)},Vl=function(t){return Va(t,Hn,Wa)},pi=Fe(ne,"DataView"),vi=Fe(ne,"Promise"),gi=Fe(ne,"Set"),yi=Fe(ne,"WeakMap"),qa="[object Map]",Za="[object Promise]",Ka="[object Set]",$a="[object WeakMap]",Ga="[object DataView]",ql=He(pi),Zl=He(Cn),Kl=He(vi),$l=He(gi),Gl=He(yi),Ne=Te;(pi&&Ne(new pi(new ArrayBuffer(1)))!=Ga||Cn&&Ne(new Cn)!=qa||vi&&Ne(vi.resolve())!=Za||gi&&Ne(new gi)!=Ka||yi&&Ne(new yi)!=$a)&&(Ne=function(t){var n=Te(t),r=n=="[object Object]"?t.constructor:void 0,e=r?He(r):"";if(e)switch(e){case ql:return Ga;case Zl:return qa;case Kl:return Za;case $l:return Ka;case Gl:return $a}return n});var cn=Ne,Jl=Object.prototype.hasOwnProperty,Ql=function(t){var n=t.length,r=new t.constructor(n);return n&&typeof t[0]=="string"&&Jl.call(t,"index")&&(r.index=t.index,r.input=t.input),r},vr=ne.Uint8Array,mi=function(t){var n=new t.constructor(t.byteLength);return new vr(n).set(new vr(t)),n},tc=function(t,n){var r=n?mi(t.buffer):t.buffer;return new t.constructor(r,t.byteOffset,t.byteLength)},ec=/\w*$/,nc=function(t){var n=new t.constructor(t.source,ec.exec(t));return n.lastIndex=t.lastIndex,n},Ja=me?me.prototype:void 0,Qa=Ja?Ja.valueOf:void 0,rc=function(t){return Qa?Object(Qa.call(t)):{}},ts=function(t,n){var r=n?mi(t.buffer):t.buffer;return new t.constructor(r,t.byteOffset,t.length)},ic=function(t,n,r){var e=t.constructor;switch(n){case"[object ArrayBuffer]":return mi(t);case"[object Boolean]":case"[object Date]":return new e(+t);case"[object DataView]":return tc(t,r);case"[object Float32Array]":case"[object Float64Array]":case"[object Int8Array]":case"[object Int16Array]":case"[object Int32Array]":case"[object Uint8Array]":case"[object Uint8ClampedArray]":case"[object Uint16Array]":case"[object Uint32Array]":return ts(t,r);case"[object Map]":case"[object Set]":return new e;case"[object Number]":case"[object String]":return new e(t);case"[object RegExp]":return nc(t);case"[object Symbol]":return rc(t)}},es=Object.create,oc=function(){function t(){}return function(n){if(!ee(n))return{};if(es)return es(n);t.prototype=n;var r=new t;return t.prototype=void 0,r}}(),ns=function(t){return typeof t.constructor!="function"||ci(t)?{}:oc(di(t))},ac=function(t){return ae(t)&&cn(t)=="[object Map]"},rs=ln&&ln.isMap,sc=rs?ui(rs):ac,uc=function(t){return ae(t)&&cn(t)=="[object Set]"},is=ln&&ln.isSet,lc=is?ui(is):uc,os="[object Arguments]",as="[object Function]",ss="[object Object]",tt={};tt[os]=tt["[object Array]"]=tt["[object ArrayBuffer]"]=tt["[object DataView]"]=tt["[object Boolean]"]=tt["[object Date]"]=tt["[object Float32Array]"]=tt["[object Float64Array]"]=tt["[object Int8Array]"]=tt["[object Int16Array]"]=tt["[object Int32Array]"]=tt["[object Map]"]=tt["[object Number]"]=tt[ss]=tt["[object RegExp]"]=tt["[object Set]"]=tt["[object String]"]=tt["[object Symbol]"]=tt["[object Uint8Array]"]=tt["[object Uint8ClampedArray]"]=tt["[object Uint16Array]"]=tt["[object Uint32Array]"]=!0,tt["[object Error]"]=tt[as]=tt["[object WeakMap]"]=!1;var cc=function t(n,r,e,i,o,a){var s,u=1&r,l=2&r,c=4&r;if(e&&(s=o?e(n,i,o,a):e(n)),s!==void 0)return s;if(!ee(n))return n;var f=Be(n);if(f){if(s=Ql(n),!u)return Ia(n,s)}else{var p=cn(n),b=p==as||p=="[object GeneratorFunction]";if(jn(n))return Ua(n,u);if(p==ss||p==os||b&&!o){if(s=l||b?{}:ns(n),!u)return l?Wl(n,Il(s,n)):zl(n,Fl(s,n))}else{if(!tt[p])return o?n:{};s=ic(n,p,u)}}a||(a=new Sn);var D=a.get(n);if(D)return D;a.set(n,s),lc(n)?n.forEach(function(y){s.add(t(y,r,e,y,n,a))}):sc(n)&&n.forEach(function(y,v){s.set(v,t(y,r,e,v,n,a))});var m=f?void 0:(c?l?Vl:fi:l?Hn:pr)(n);return Pl(m||n,function(y,v){m&&(y=n[v=y]),Ra(s,v,t(y,r,e,v,n,a))}),s},Tt=function(t){return cc(t,5)},bi=function(t){for(var n=-1,r=t==null?0:t.length,e={};++n<r;){var i=t[n];e[i[0]]=i[1]}return e},hc=function(t){return this.__data__.has(t)};function gr(t){var n=-1,r=t==null?0:t.length;for(this.__data__=new Ca;++n<r;)this.add(t[n])}gr.prototype.add=gr.prototype.push=function(t){return this.__data__.set(t,"__lodash_hash_undefined__"),this},gr.prototype.has=hc;var dc=gr,fc=function(t,n){for(var r=-1,e=t==null?0:t.length;++r<e;)if(n(t[r],r,t))return!0;return!1},pc=function(t,n){return t.has(n)},us=function(t,n,r,e,i,o){var a=1&r,s=t.length,u=n.length;if(!(s==u||a&&u>s))return!1;var l=o.get(t),c=o.get(n);if(l&&c)return l==n&&c==t;var f=-1,p=!0,b=2&r?new dc:void 0;for(o.set(t,n),o.set(n,t);++f<s;){var D=t[f],m=n[f];if(e)var y=a?e(m,D,f,n,t,o):e(D,m,f,t,n,o);if(y!==void 0){if(y)continue;p=!1;break}if(b){if(!fc(n,function(v,g){if(!pc(b,g)&&(D===v||i(D,v,r,e,o)))return b.push(g)})){p=!1;break}}else if(D!==m&&!i(D,m,r,e,o)){p=!1;break}}return o.delete(t),o.delete(n),p},ls=function(t){var n=-1,r=Array(t.size);return t.forEach(function(e,i){r[++n]=[i,e]}),r},vc=function(t){var n=-1,r=Array(t.size);return t.forEach(function(e){r[++n]=e}),r},cs=me?me.prototype:void 0,Di=cs?cs.valueOf:void 0,gc=function(t,n,r,e,i,o,a){switch(r){case"[object DataView]":if(t.byteLength!=n.byteLength||t.byteOffset!=n.byteOffset)return!1;t=t.buffer,n=n.buffer;case"[object ArrayBuffer]":return!(t.byteLength!=n.byteLength||!o(new vr(t),new vr(n)));case"[object Boolean]":case"[object Date]":case"[object Number]":return On(+t,+n);case"[object Error]":return t.name==n.name&&t.message==n.message;case"[object RegExp]":case"[object String]":return t==n+"";case"[object Map]":var s=ls;case"[object Set]":if(s||(s=vc),t.size!=n.size&&!(1&e))return!1;var u=a.get(t);if(u)return u==n;e|=2,a.set(t,n);var l=us(s(t),s(n),e,i,o,a);return a.delete(t),l;case"[object Symbol]":if(Di)return Di.call(t)==Di.call(n)}return!1},yc=Object.prototype.hasOwnProperty,mc=function(t,n,r,e,i,o){var a=1&r,s=fi(t),u=s.length;if(u!=fi(n).length&&!a)return!1;for(var l=u;l--;){var c=s[l];if(!(a?c in n:yc.call(n,c)))return!1}var f=o.get(t),p=o.get(n);if(f&&p)return f==n&&p==t;var b=!0;o.set(t,n),o.set(n,t);for(var D=a;++l<u;){var m=t[c=s[l]],y=n[c];if(e)var v=a?e(y,m,c,n,t,o):e(m,y,c,t,n,o);if(!(v===void 0?m===y||i(m,y,r,e,o):v)){b=!1;break}D||(D=c=="constructor")}if(b&&!D){var g=t.constructor,d=n.constructor;g==d||!("constructor"in t)||!("constructor"in n)||typeof g=="function"&&g instanceof g&&typeof d=="function"&&d instanceof d||(b=!1)}return o.delete(t),o.delete(n),b},hs="[object Arguments]",ds="[object Array]",yr="[object Object]",fs=Object.prototype.hasOwnProperty,bc=function(t,n,r,e,i,o){var a=Be(t),s=Be(n),u=a?ds:cn(t),l=s?ds:cn(n),c=(u=u==hs?yr:u)==yr,f=(l=l==hs?yr:l)==yr,p=u==l;if(p&&jn(t)){if(!jn(n))return!1;a=!0,c=!1}if(p&&!c)return o||(o=new Sn),a||li(t)?us(t,n,r,e,i,o):gc(t,n,u,r,e,i,o);if(!(1&r)){var b=c&&fs.call(t,"__wrapped__"),D=f&&fs.call(n,"__wrapped__");if(b||D){var m=b?t.value():t,y=D?n.value():n;return o||(o=new Sn),i(m,y,r,e,o)}}return!!p&&(o||(o=new Sn),mc(t,n,r,e,i,o))},Dc=function t(n,r,e,i,o){return n===r||(n==null||r==null||!ae(n)&&!ae(r)?n!=n&&r!=r:bc(n,r,e,i,t,o))},hn=function(t,n){return Dc(t,n)},Ei=function(t,n,r){(r!==void 0&&!On(t[n],r)||r===void 0&&!(n in t))&&ai(t,n,r)},Ec=function(t){return function(n,r,e){for(var i=-1,o=Object(n),a=e(n),s=a.length;s--;){var u=a[t?s:++i];if(r(o[u],u,o)===!1)break}return n}},wc=Ec(),Pc=function(t){return ae(t)&&fr(t)},ps=Function.prototype.toString,xc=Object.prototype.hasOwnProperty,kc=ps.call(Object),Mc=function(t){if(!ae(t)||Te(t)!="[object Object]")return!1;var n=di(t);if(n===null)return!0;var r=xc.call(n,"constructor")&&n.constructor;return typeof r=="function"&&r instanceof r&&ps.call(r)==kc},wi=function(t,n){if((n!=="constructor"||typeof t[n]!="function")&&n!="__proto__")return t[n]},Lc=function(t){return Tn(t,Hn(t))},Ac=function(t,n,r,e,i,o,a){var s=wi(t,r),u=wi(n,r),l=a.get(u);if(l)Ei(t,r,l);else{var c=o?o(s,u,r+"",t,n,a):void 0,f=c===void 0;if(f){var p=Be(u),b=!p&&jn(u),D=!p&&!b&&li(u);c=u,p||b||D?Be(s)?c=s:Pc(s)?c=Ia(s):b?(f=!1,c=Ua(u,!0)):D?(f=!1,c=ts(u,!0)):c=[]:Mc(u)||si(u)?(c=s,si(s)?c=Lc(s):ee(s)&&!ii(s)||(c=ns(u))):f=!1}f&&(a.set(u,c),i(c,u,e,o,a),a.delete(u)),Ei(t,r,c)}},_c=function t(n,r,e,i,o){n!==r&&wc(r,function(a,s){if(o||(o=new Sn),ee(a))Ac(n,r,s,e,t,i,o);else{var u=i?i(wi(n,s),a,s+"",n,r,o):void 0;u===void 0&&(u=a),Ei(n,s,u)}},Hn)},vs=function(t){return t},Oc=function(t,n,r){switch(r.length){case 0:return t.call(n);case 1:return t.call(n,r[0]);case 2:return t.call(n,r[0],r[1]);case 3:return t.call(n,r[0],r[1],r[2])}return t.apply(n,r)},gs=Math.max,Cc=function(t,n,r){return n=gs(n===void 0?t.length-1:n,0),function(){for(var e=arguments,i=-1,o=gs(e.length-n,0),a=Array(o);++i<o;)a[i]=e[n+i];i=-1;for(var s=Array(n+1);++i<n;)s[i]=e[i];return s[n]=r(a),Oc(t,this,s)}},Rc=function(t){return function(){return t}},Sc=Date.now,Tc=function(t){var n=0,r=0;return function(){var e=Sc(),i=16-(e-r);if(r=e,i>0){if(++n>=800)return arguments[0]}else n=0;return t.apply(void 0,arguments)}},jc=Tc(dr?function(t,n){return dr(t,"toString",{configurable:!0,enumerable:!1,value:Rc(n),writable:!0})}:vs),Hc=function(t,n){return jc(Cc(t,n,vs),t+"")},Fc=function(t,n,r){if(!ee(r))return!1;var e=typeof n;return!!(e=="number"?fr(r)&&ja(n,r.length):e=="string"&&n in r)&&On(r[n],t)},Bc=function(t){return Hc(function(n,r){var e=-1,i=r.length,o=i>1?r[i-1]:void 0,a=i>2?r[2]:void 0;for(o=t.length>3&&typeof o=="function"?(i--,o):void 0,a&&Fc(r[0],r[1],a)&&(o=3>i?void 0:o,i=1),n=Object(n);++e<i;){var s=r[e];s&&t(n,s,e,o)}return n})},Nc=Bc(function(t,n,r){_c(t,n,r)}),Uc=function(t,n){for(var r=-1,e=t==null?0:t.length,i=Array(e);++r<e;)i[r]=n(t[r],r,t);return i},Ic=function(t,n){return Uc(n,function(r){return[r,t[r]]})},Yc=function(t){var n=-1,r=Array(t.size);return t.forEach(function(e){r[++n]=[e,e]}),r},ys=function(t){return function(n){var r=cn(n);return r=="[object Map]"?ls(n):r=="[object Set]"?Yc(n):Ic(n,t(n))}}(pr),dn=Je(function(t){(function(n,r,e){if(n){for(var i,o={8:"backspace",9:"tab",13:"enter",16:"shift",17:"ctrl",18:"alt",20:"capslock",27:"esc",32:"space",33:"pageup",34:"pagedown",35:"end",36:"home",37:"left",38:"up",39:"right",40:"down",45:"ins",46:"del",91:"meta",93:"meta",224:"meta"},a={106:"*",107:"+",109:"-",110:".",111:"/",186:";",187:"=",188:",",189:"-",190:".",191:"/",192:"`",219:"[",220:"\\",221:"]",222:"'"},s={"~":"`","!":"1","@":"2","#":"3",$:"4","%":"5","^":"6","&":"7","*":"8","(":"9",")":"0",_:"-","+":"=",":":";",'"':"'","<":",",">":".","?":"/","|":"\\"},u={option:"alt",command:"meta",return:"enter",escape:"esc",plus:"+",mod:/Mac|iPod|iPhone|iPad/.test(navigator.platform)?"meta":"ctrl"},l=1;20>l;++l)o[111+l]="f"+l;for(l=0;9>=l;++l)o[l+96]=""+l;y.prototype.bind=function(v,g,d){var E=this;return E._bindMultiple.call(E,v=v instanceof Array?v:[v],g,d),E},y.prototype.unbind=function(v,g){return this.bind.call(this,v,function(){},g)},y.prototype.trigger=function(v,g){var d=this;return d._directMap[v+":"+g]&&d._directMap[v+":"+g]({},v),d},y.prototype.reset=function(){var v=this;return v._callbacks={},v._directMap={},v},y.prototype.stopCallback=function(v,g){if((" "+g.className+" ").indexOf(" mousetrap ")>-1||m(g,this.target))return!1;if("composedPath"in v&&typeof v.composedPath=="function"){var d=v.composedPath()[0];d!==v.target&&(g=d)}return g.tagName=="INPUT"||g.tagName=="SELECT"||g.tagName=="TEXTAREA"||g.isContentEditable},y.prototype.handleKey=function(){return this._handleKey.apply(this,arguments)},y.addKeycodes=function(v){for(var g in v)v.hasOwnProperty(g)&&(o[g]=v[g]);i=null},y.init=function(){var v=y(r);for(var g in v)g.charAt(0)!=="_"&&(y[g]=function(d){return function(){return v[d].apply(v,arguments)}}(g))},y.init(),n.Mousetrap=y,t.exports&&(t.exports=y)}function c(v,g,d){v.addEventListener?v.addEventListener(g,d,!1):v.attachEvent("on"+g,d)}function f(v){if(v.type=="keypress"){var g=String.fromCharCode(v.which);return v.shiftKey||(g=g.toLowerCase()),g}return o[v.which]?o[v.which]:a[v.which]?a[v.which]:String.fromCharCode(v.which).toLowerCase()}function p(v){return v=="shift"||v=="ctrl"||v=="alt"||v=="meta"}function b(v,g,d){return d||(d=function(){if(!i)for(var E in i={},o)E>95&&112>E||o.hasOwnProperty(E)&&(i[o[E]]=E);return i}()[v]?"keydown":"keypress"),d=="keypress"&&g.length&&(d="keydown"),d}function D(v,g){var d,E,w,k=[];for(d=function(C){return C==="+"?["+"]:(C=C.replace(/\+{2}/g,"+plus")).split("+")}(v),w=0;d.length>w;++w)u[E=d[w]]&&(E=u[E]),g&&g!="keypress"&&s[E]&&(E=s[E],k.push("shift")),p(E)&&k.push(E);return{key:E,modifiers:k,action:g=b(E,k,g)}}function m(v,g){return v!==null&&v!==r&&(v===g||m(v.parentNode,g))}function y(v){var g=this;if(v=v||r,!(g instanceof y))return new y(v);g.target=v,g._callbacks={},g._directMap={};var d,E={},w=!1,k=!1,C=!1;function A(_){_=_||{};var B,F=!1;for(B in E)_[B]?F=!0:E[B]=0;F||(C=!1)}function T(_,B,F,L,I,z){var M,O,U,J=[],W=F.type;if(!g._callbacks[_])return[];for(W=="keyup"&&p(_)&&(B=[_]),M=0;g._callbacks[_].length>M;++M)O=g._callbacks[_][M],(L||!O.seq||E[O.seq]==O.level)&&W==O.action&&(W=="keypress"&&!F.metaKey&&!F.ctrlKey||(U=O.modifiers,B.sort().join(",")===U.sort().join(",")))&&((!L&&O.combo==I||L&&O.seq==L&&O.level==z)&&g._callbacks[_].splice(M,1),J.push(O));return J}function X(_,B,F,L){g.stopCallback(B,B.target||B.srcElement,F,L)||_(B,F)===!1&&(function(I){I.preventDefault?I.preventDefault():I.returnValue=!1}(B),function(I){I.stopPropagation?I.stopPropagation():I.cancelBubble=!0}(B))}function j(_){typeof _.which!="number"&&(_.which=_.keyCode);var B=f(_);B&&(_.type!="keyup"||w!==B?g.handleKey(B,function(F){var L=[];return F.shiftKey&&L.push("shift"),F.altKey&&L.push("alt"),F.ctrlKey&&L.push("ctrl"),F.metaKey&&L.push("meta"),L}(_),_):w=!1)}function H(_,B,F,L){function I(U){return function(){C=U,++E[_],clearTimeout(d),d=setTimeout(A,1e3)}}function z(U){X(F,U,_),L!=="keyup"&&(w=f(U)),setTimeout(A,10)}E[_]=0;for(var M=0;B.length>M;++M){var O=M+1===B.length?z:I(L||D(B[M+1]).action);V(B[M],O,L,_,M)}}function V(_,B,F,L,I){g._directMap[_+":"+F]=B;var z,M=(_=_.replace(/\s+/g," ")).split(" ");M.length>1?H(_,M,B,F):(z=D(_,F),g._callbacks[z.key]=g._callbacks[z.key]||[],T(z.key,z.modifiers,{type:z.action},L,_,I),g._callbacks[z.key][L?"unshift":"push"]({callback:B,modifiers:z.modifiers,action:z.action,seq:L,level:I,combo:_}))}g._handleKey=function(_,B,F){var L,I=T(_,B,F),z={},M=0,O=!1;for(L=0;I.length>L;++L)I[L].seq&&(M=Math.max(M,I[L].level));for(L=0;I.length>L;++L)if(I[L].seq){if(I[L].level!=M)continue;O=!0,z[I[L].seq]=1,X(I[L].callback,F,I[L].combo,I[L].seq)}else O||X(I[L].callback,F,I[L].combo);var U=F.type=="keypress"&&k;F.type!=C||p(_)||U||A(z),k=O&&F.type=="keydown"},g._bindMultiple=function(_,B,F){for(var L=0;_.length>L;++L)V(_[L],B,F)},c(v,"keypress",j),c(v,"keydown",j),c(v,"keyup",j)}})(typeof window!="undefined"?window:null,typeof window!="undefined"?document:null)}),ms,we=function(t){return t&&t.length?t[0]:void 0},Pe=(ms=1,function(t){return"".concat(t,"-").concat(ms++)}),nt=function(t,n){var r,e;return!(!t||!n||((r=t.properties)===null||r===void 0?void 0:r.id)!==((e=n.properties)===null||e===void 0?void 0:e.id))},Ft=function(t){var n=t.target,r=t.targetHandler,e=t.otherHandler;return t.data.map(function(i,o){var a,s=nt(i,n)?r:e;return(a=s==null?void 0:s(i,o))!==null&&a!==void 0?a:i})},Pi=function(){return{id:Pe("point"),isHover:!1,isActive:!1,isDrag:!1,createTime:Date.now()}},xi=function(){return{id:Pe("line"),isHover:!1,isActive:!1,isDrag:!1,isDraw:!1,createTime:Date.now()}},Fn=function(){return{id:Pe("polygon"),isHover:!1,isActive:!1,isDrag:!1,isDraw:!1,createTime:Date.now()}},Bt=function(t){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return ot(t,x(x({},Pi()),n))},Bn=function(t){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return{type:"Feature",properties:x(x({},xi()),{},{nodes:t},n),geometry:{type:"LineString",coordinates:Ut(Q(t))}}},Nn=function(t){return Rt(t,{id:Pe("dashLine")})},ki=function(t){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return{type:"Feature",properties:x(x({},Fn()),{},{nodes:t},n),geometry:{type:"Polygon",coordinates:[Ut(Q([].concat(ht(t),[we(t)])))]}}},bs=function(t){return function(n,r,e){e===void 0&&(e={});for(var i=$n(n).coordinates,o=0,a=0;i.length>a&&(o>r||a!==i.length-1);a++){if(o>=r){var s=r-o;if(s){var u=Jr(i[a],i[a-1])-180;return nr(i[a],s,u,e)}return ot(i[a])}o+=ve(i[a],i[a+1],e)}return ot(i[i.length-1])}(t,ca(t,{units:"meters"})/2,{units:"meters"})},mr=function(t,n){var r=n.format,e=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},i=[];if(n.showTotalDistance){var o=bs(t),a=ca(t,{units:"meters"});o.properties=x({id:Pe("text"),isActive:!1,meters:a,text:r(a),type:"totalDistance"},e),i.push(o)}else for(var s=t.geometry.coordinates,u=0;s.length-1>u;u++){var l=ot(s[u]),c=ot(s[u+1]),f=ve(l,c,{units:"meters"}),p=Qr(Q([l,c]));p.properties=x({id:Pe("text"),isActive:!1,meters:f,text:r(f),type:"distance"},e),i.push(p)}return i},Mi=function(t,n){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},e=n.format,i=Ou(t);return ta(t,{properties:x({meters:i,text:e(i),type:"area",isActive:!1},r)})},Li=function(t){var n,r,e=t.getContainer();return(n=(r=e==null?void 0:e.querySelector(".l7-marker-container"))!==null&&r!==void 0?r:e==null?void 0:e.querySelector(".amap-maps"))!==null&&n!==void 0?n:null},xe=function(t){return t.lngLat||t.lnglat},Zt=function(t){var n=xe(t);return[n.lng,n.lat]},br=function(t){return[t.lng,t.lat]},Ai=function(t){for(var n=Number.MAX_SAFE_INTEGER,r=0,e=t.length,i=0;e>i;i++)n>t[i]&&(n=t[i],r=i);return r},Ds=function(t,n){var r=[],e=[];return t.forEach(function(i){hn(i,n)?e.length&&(r.push(e),e=[]):e.push(i)}),e.length&&r.push(e),r},Es=function(t,n,r){var e=[],i=[],o=[];return(e=t==="drawData"?n.getData():t instanceof Function?t(r):t).length&&(i=e.map(function(a){var s,u=(s=a.properties)!==null&&s!==void 0?s:{},l=u.nodes,c=l===void 0?[]:l,f=u.isActive;return f!==void 0&&f?c.filter(function(p){return!hn(p.geometry.coordinates,r)}):c}).flat().filter(function(a){return a}),i.length||(i=Ut(Q(e)).map(function(a){return ot(a)})),o=e.map(function(a){var s,u,l=(s=a.properties)===null||s===void 0?void 0:s.line;return!((u=a.properties)===null||u===void 0)&&u.isActive&&l?Ds(l.properties.nodes.map(function(c){return c.geometry.coordinates}),r).filter(function(c){return c.length>1}).map(function(c){return Rt(c)}):[l]}).flat().filter(function(a){return a}),o.length||e.forEach(function(a){var s=Uo(a);if(/linestring/i.test(s)&&o.push(a),/polygon/i.test(s)){var u,l,c=Cu(a);return(u=o).push.apply(u,ht((l=c==null?void 0:c.features)!==null&&l!==void 0?l:[c]))}})),{points:i,lines:o}},ws=function(t,n,r,e){var i=r.pointAdsorbPixel,o=wt(t,2),a=e.lngLatToPixel([o[0],o[1]]),s=a.x,u=a.y,l=n.map(function(f){var p=wt(f.geometry.coordinates,2),b=e.lngLatToPixel([p[0],p[1]]),D=b.y;return Math.pow(s-b.x,2)+Math.pow(u-D,2)}),c=Ai(l);return Math.pow(l[c],.5)>i?null:n[c].geometry.coordinates},Ps=function(t,n,r,e){var i=r.lineAdsorbPixel,o=wt(t,2),a=e.lngLatToPixel([o[0],o[1]]),s=a.x,u=a.y,l=n.filter(function(p){return Ut(p).length>1}).map(function(p){return function(b,D,m){m===void 0&&(m={});var y=ot([1/0,1/0],{dist:1/0}),v=0;return Ze(b,function(g){for(var d=Re(g),E=0;d.length-1>E;E++){var w=ot(d[E]);w.properties.dist=ve(D,w,m);var k=ot(d[E+1]);k.properties.dist=ve(D,k,m);var C=ve(w,k,m),A=Math.max(w.properties.dist,k.properties.dist),T=Jr(w,k),X=nr(D,A,T+90,m),j=nr(D,A,T-90,m),H=_u(Rt([X.geometry.coordinates,j.geometry.coordinates]),Rt([w.geometry.coordinates,k.geometry.coordinates])),V=null;H.features.length>0&&((V=H.features[0]).properties.dist=ve(D,V,m),V.properties.location=v+ve(w,V,m)),y.properties.dist>w.properties.dist&&((y=w).properties.index=E,y.properties.location=v),y.properties.dist>k.properties.dist&&((y=k).properties.index=E+1,y.properties.location=v+C),V&&y.properties.dist>V.properties.dist&&((y=V).properties.index=E),v+=C}}),y}(p,t)}),c=l.map(function(p){var b=wt(p.geometry.coordinates,2),D=e.lngLatToPixel([b[0],b[1]]),m=D.y;return Math.pow(s-D.x,2)+Math.pow(u-m,2)}),f=Ai(c);return Math.pow(c[f],.5)>i?null:l[f].geometry.coordinates},xs=function(t,n){var r=wt(n,2),e=r[0],i=r[1];t.lngLat&&(t.lngLat={lng:e,lat:i}),t.lnglat&&(t.lnglat={lng:e,lat:i})},Xc=function(){function t(n,r){rt(this,t),this.container=void 0,this.cursor=null,this.options=void 0,this.container=Li(n),this.options=r}return it(t,[{key:"setCursor",value:function(n){n!==this.cursor&&this.container&&(this.container.style.cursor=n?this.options[n]:"",this.cursor=n)}},{key:"destroy",value:function(){this.setCursor(null)}}]),t}();function _i(t,n){n===void 0&&(n={});var r=n.insertAt;if(t&&typeof document!="undefined"){var e=document.head||document.getElementsByTagName("head")[0],i=document.createElement("style");i.type="text/css",r==="top"&&e.firstChild?e.insertBefore(i,e.firstChild):e.appendChild(i),i.styleSheet?i.styleSheet.cssText=t:i.appendChild(document.createTextNode(t))}}_i('.tippy-box[data-animation=fade][data-state=hidden]{opacity:0}[data-tippy-root]{max-width:calc(100vw - 10px)}.tippy-box{position:relative;background-color:#333;color:#fff;border-radius:4px;font-size:14px;line-height:1.4;white-space:normal;outline:0;transition-property:transform,visibility,opacity}.tippy-box[data-placement^=top]>.tippy-arrow{bottom:0}.tippy-box[data-placement^=top]>.tippy-arrow:before{bottom:-7px;left:0;border-width:8px 8px 0;border-top-color:initial;transform-origin:center top}.tippy-box[data-placement^=bottom]>.tippy-arrow{top:0}.tippy-box[data-placement^=bottom]>.tippy-arrow:before{top:-7px;left:0;border-width:0 8px 8px;border-bottom-color:initial;transform-origin:center bottom}.tippy-box[data-placement^=left]>.tippy-arrow{right:0}.tippy-box[data-placement^=left]>.tippy-arrow:before{border-width:8px 0 8px 8px;border-left-color:initial;right:-7px;transform-origin:center left}.tippy-box[data-placement^=right]>.tippy-arrow{left:0}.tippy-box[data-placement^=right]>.tippy-arrow:before{left:-7px;border-width:8px 8px 8px 0;border-right-color:initial;transform-origin:center right}.tippy-box[data-inertia][data-state=visible]{transition-timing-function:cubic-bezier(.54,1.5,.38,1.11)}.tippy-arrow{width:16px;height:16px;color:#333}.tippy-arrow:before{content:"";position:absolute;border-color:transparent;border-style:solid}.tippy-content{position:relative;padding:5px 9px;z-index:1}'),_i(".tippy-box[data-theme~=light]{color:#26323d;box-shadow:0 0 20px 4px rgba(154,161,177,.15),0 4px 80px -8px rgba(36,40,47,.25),0 4px 4px -2px rgba(91,94,105,.15);background-color:#fff}.tippy-box[data-theme~=light][data-placement^=top]>.tippy-arrow:before{border-top-color:#fff}.tippy-box[data-theme~=light][data-placement^=bottom]>.tippy-arrow:before{border-bottom-color:#fff}.tippy-box[data-theme~=light][data-placement^=left]>.tippy-arrow:before{border-left-color:#fff}.tippy-box[data-theme~=light][data-placement^=right]>.tippy-arrow:before{border-right-color:#fff}.tippy-box[data-theme~=light]>.tippy-backdrop{background-color:#fff}.tippy-box[data-theme~=light]>.tippy-svg-arrow{fill:#fff}");var zc=function(){function t(n,r){var e=this;rt(this,t),this.content="",this.tippy=void 0,this.scene=void 0,this.isMouseInner=!1,this.onMouseMove=function(){e.isMouseInner=!0,e.checkTippyShow()},this.onMouseOut=function(){e.isMouseInner=!1,e.checkTippyShow()},this.setContent=be(function(i){e.content=i!=null?i:"",e.tippy.setContent(i!=null?i:""),e.checkTippyShow()},16,{maxWait:16}),this.tippy=Dn(Li(n),x(x({},Lo),r)),this.tippy.hide(),this.scene=n,n.on(h.SceneEvent.Mousemove,this.onMouseMove),n.on(h.SceneEvent.Mouseout,this.onMouseOut)}return it(t,[{key:"getContent",value:function(){return this.content}},{key:"checkTippyShow",value:function(){this.content&&this.isMouseInner?this.tippy.show():this.tippy.hide()}},{key:"destroy",value:function(){this.scene.off(h.SceneEvent.Mousemove,this.onMouseMove),this.scene.off(h.SceneEvent.Mouseout,this.onMouseOut),this.tippy.destroy()}}]),t}(),Wc=function(){function t(n){var r=n.config;rt(this,t),this.historyList=[],this.historyIndex=0,this.config=void 0,this.config=r}return it(t,[{key:"save",value:function(n){if(this.config){var r=this.config.maxSize;this.historyIndex&&(this.historyList=this.historyList.slice(this.historyIndex),this.historyIndex=0),r>this.historyList.length||this.historyList.pop();var e=Tt(n);return this.historyList.unshift(e),e}}},{key:"revert",value:function(){if(this.historyList.length&&this.historyList.length-1>this.historyIndex){var n=this.historyList[++this.historyIndex];return n?Tt(n):void 0}}},{key:"redo",value:function(){if(this.historyList.length&&this.historyIndex>0){var n=this.historyList[--this.historyIndex];return n?Tt(n):void 0}}}]),t}(),ks=function(t){ft(r,t);var n=pt(r);function r(e){var i,o=e.data,a=e.render,s=e.history,u=e.scene;return rt(this,r),(i=n.call(this)).scene=void 0,i.render=void 0,i.data=Tt(zt),i.timeout=null,i.diffData={},i.history=void 0,i.scene=u,i.render=a,s&&(i.history=new Wc({config:s})),o&&i.setData(o),i}return it(r,[{key:"saveHistory",value:function(){var e;return(e=this.history)===null||e===void 0?void 0:e.save(this.data)}},{key:"revertHistory",value:function(){var e,i=(e=this.history)===null||e===void 0?void 0:e.revert();if(i)return this.setData(i),i}},{key:"redoHistory",value:function(){var e,i=(e=this.history)===null||e===void 0?void 0:e.redo();if(i)return this.setData(i),i}},{key:"setData",value:function(e){var i=this;return Object.keys(e).length&&(this.data=x(x({},this.data),e),this.diffData=x(x({},this.diffData),e),this.timeout||(this.timeout=requestAnimationFrame(function(){return i.updateDiffData()})),this.emit(h.SourceEvent.Change,{data:this.data})),this.data}},{key:"getData",value:function(){return this.data}},{key:"getRenderData",value:function(e){return this.data[e]}},{key:"setRenderData",value:function(e,i){var o=typeof i=="function"?i(this.getRenderData(e)):i;return this.setData(Co({},e,ht(o).sort(function(a,s){return+a.properties.isActive-+s.properties.isActive}))),this.emit(h.SourceEvent.Change,this.data),o}},{key:"updateDiffData",value:function(){var e=this,i=Object.entries(this.diffData);i.length&&(i.forEach(function(o){var a,s=wt(o,2),u=s[0],l=s[1];Array.isArray(l)&&((a=e.getRender(u))===null||a===void 0||a.setData(l))}),this.emit(h.SourceEvent.Update,this.data,this.diffData),this.diffData={},this.timeout=null,requestAnimationFrame(function(){e.scene.render()}))}},{key:"getRender",value:function(e){return this.render[e]}},{key:"clear",value:function(){this.setData(bi(Object.keys(this.render).map(function(e){return[e,[]]})))}}]),r}(or),Ms=function(t){ft(r,t);var n=pt(r);function r(e,i){var o;rt(this,r),(o=n.call(this)).scene=void 0,o.source=void 0,o.render=void 0,o.cursor=void 0,o.options=void 0,o.enabled=!1,o.allowCreate=!1,o.sceneRender=void 0,o.mouseLngLat={lng:0,lat:0},o.popup=void 0,o.addCount=0,o.saveMouseLngLat=be(function(l){o.mouseLngLat=xe(l)},100,{maxWait:100}),o.saveHistory=be(function(){o.options.history&&o.source.saveHistory()},100),o.bindThis(),o.scene=e,o.sceneRender=new Ea(e),o.options=Nc({},o.getDefaultOptions(i),i),o.render=o.initRender(),o.source=new ks({render:o.render,history:o.options.history||void 0,scene:e}),o.cursor=new Xc(e,o.options.cursor);var a=o.options,s=a.initialData,u=a.popup;return s&&o.setData(s),u&&(o.popup=new zc(e,u instanceof Object?u:{})),o.saveHistory(),o.bindCommonEvent(),o.emit(h.DrawEvent.Init,En(o)),o.bindEnableEvent(),o}return it(r,[{key:"addable",get:function(){var e=this.getData(),i=this.options,o=i.multiple,a=i.maxCount,s=e.find(function(u){return u.properties.isDraw});return!(!this.enabled||!this.allowCreate)&&(!!(o&&0>=a||s)||!(!o&&this.addCount>=1)&&(0>=a||a>e.length))}},{key:"getOptions",value:function(){return this.options}},{key:"getEditItem",value:function(){return this.editItem}},{key:"getDragItem",value:function(){return this.dragItem}},{key:"setHelper",value:function(e){var i,o,a=this.options.helper;if(a){var s=(i=e in a?a[e]:e)!==null&&i!==void 0?i:null;(o=this.popup)===null||o===void 0||o.setContent(s)}}},{key:"isEnable",value:function(){return this.enabled}},{key:"bindThis",value:function(){this.initRender=this.initRender.bind(this),this.getData=this.getData.bind(this),this.setData=this.setData.bind(this),this.emitChangeEvent=this.emitChangeEvent.bind(this),this.saveHistory=this.saveHistory.bind(this),this.onSceneMouseMove=this.onSceneMouseMove.bind(this),this.revertHistory=this.revertHistory.bind(this),this.redoHistory=this.redoHistory.bind(this),this.removeActiveFeature=this.removeActiveFeature.bind(this),this.bindCommonEvent=this.bindCommonEvent.bind(this),this.bindEnableEvent=this.bindEnableEvent.bind(this),this.unbindEnableEvent=this.unbindEnableEvent.bind(this),this.setActiveFeature=this.setActiveFeature.bind(this)}},{key:"bindCommonEvent",value:function(){var e=this;this.on(h.DrawEvent.Add,this.emitChangeEvent),this.on(h.DrawEvent.Add,function(){e.addCount++}),this.on(h.DrawEvent.Edit,this.emitChangeEvent),this.on(h.DrawEvent.Remove,this.emitChangeEvent),this.on(h.DrawEvent.Clear,this.emitChangeEvent),this.on(h.DrawEvent.AddNode,this.saveHistory),this.on(h.DrawEvent.RemoveNode,this.emitChangeEvent),this.bindEmitSelectEvent(!0)}},{key:"bindEmitSelectEvent",value:function(){var e=this,i=arguments.length>0&&arguments[0]!==void 0&&arguments[0],o=null,a=function(){var s,u,l,c=e.getData().find(function(f){var p;return(p=f.properties)===null||p===void 0?void 0:p.isActive})||null;((s=o)===null||s===void 0||(u=s.properties)===null||u===void 0?void 0:u.id)!==(c==null||(l=c.properties)===null||l===void 0?void 0:l.id)&&(o=c,e.emit(h.DrawEvent.Select,c))};this.source.on(h.SourceEvent.Change,a),i&&a()}},{key:"bindEnableEvent",value:function(){this.unbindKeyboardEvent(),this.scene.setMapStatus({doubleClickZoom:!1}),this.scene.on(h.SceneEvent.Mousemove,this.saveMouseLngLat),this.bindKeyboardEvent()}},{key:"unbindEnableEvent",value:function(){this.scene.setMapStatus({doubleClickZoom:!0}),this.scene.off(h.SceneEvent.Mousemove,this.saveMouseLngLat),this.unbindKeyboardEvent()}},{key:"bindKeyboardEvent",value:function(){var e=this,i=this.options.keyboard||{},o=i.revert,a=i.redo,s=i.remove;s&&dn.bind(s,function(){e.removeActiveFeature()}),this.options.history&&(o&&dn.bind(o,this.revertHistory),a&&dn.bind(a,this.redoHistory))}},{key:"unbindKeyboardEvent",value:function(){var e=this.options.keyboard||{},i=e.revert,o=e.redo,a=e.remove;a&&dn.unbind(a),this.options.history&&(i&&dn.unbind(i),o&&dn.unbind(o))}},{key:"emitChangeEvent",value:function(){this.emit(h.DrawEvent.Change,this.getData()),this.saveHistory()}},{key:"revertHistory",value:function(){this.enabled&&this.options.history&&this.source.revertHistory()&&this.correctDrawItem()}},{key:"redoHistory",value:function(){this.enabled&&this.options.history&&this.source.redoHistory()&&this.correctDrawItem()}},{key:"getRenderLayers",value:function(){return bi(ys(this.render).map(function(e){var i=wt(e,2);return[i[0],i[1].getLayers()]}))}},{key:"getTargetFeature",value:function(e){var i,o,a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:this.getData(),s=null;return e&&(s=(i=a.find(function(u){var l;return u.properties.id===(typeof e=="string"?e:(l=e.properties)===null||l===void 0?void 0:l.id)}))!==null&&i!==void 0?i:null,!s&&e instanceof Object&&(s=(o=a.find(function(u){return hn(e.geometry,u.geometry)}))!==null&&o!==void 0?o:null)),s}},{key:"removeActiveFeature",value:function(){var e=this.getData().find(function(i){var o=i.properties;return o.isActive||o.isDraw});return e&&this.removeFeature(e),e}},{key:"removeFeature",value:function(e){var i=this.getData(),o=this.getTargetFeature(e);o&&(this.setData(i.filter(function(a){return!nt(o,a)})),this.emit(h.DrawEvent.Remove,e,this.getData()))}},{key:"correctDrawItem",value:function(){this.getData().find(function(e){return e.properties.isDraw})&&this.onSceneMouseMove({type:"mousemove",lnglat:this.mouseLngLat,lngLat:this.mouseLngLat})}},{key:"initRender",value:function(){var e,i={},o=function(s,u){var l=typeof Symbol!="undefined"&&s[Symbol.iterator]||s["@@iterator"];if(!l){if(Array.isArray(s)||(l=Br(s))||u&&s&&typeof s.length=="number"){l&&(s=l);var c=0,f=function(){};return{s:f,n:function(){return s.length>c?{done:!1,value:s[c++]}:{done:!0}},e:function(m){throw m},f}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var p,b=!0,D=!1;return{s:function(){l=l.call(s)},n:function(){var m=l.next();return b=m.done,m},e:function(m){D=!0,p=m},f:function(){try{b||l.return==null||l.return()}finally{if(D)throw p}}}}(this.getRenderTypes());try{for(o.s();!(e=o.n()).done;){var a=e.value;i[a]=new Pa[a](this.scene,{style:this.options.style[a]})}}catch(s){o.e(s)}finally{o.f()}return i}},{key:"getCommonOptions",value:function(e){return{initialData:[],autoActive:!0,cursor:Tt(ge),editable:!0,style:Tt(La),multiple:!0,history:Tt(ko),keyboard:Tt(Mo),popup:!0,helper:{},maxCount:-1}}},{key:"setCursor",value:function(e){this.cursor.setCursor(e)}},{key:"resetCursor",value:function(){this.setCursor(this.addable?"draw":null)}},{key:"enable",value:function(){var e=this;this.allowCreate=0>=arguments.length||arguments[0]===void 0||arguments[0],this.addCount=0,this.enabled=!0,this.bindEnableEvent(),this.resetCursor(),this.setHelper(this.addable?"draw":null),setTimeout(function(){e.emit(h.DrawEvent.Enable,e)},0)}},{key:"disable",value:function(){var e=this;this.resetFeatures(),this.enabled=!1,this.setCursor(null),this.unbindEnableEvent(),this.addCount=0,this.setHelper(null),setTimeout(function(){e.emit(h.DrawEvent.Disable,e)},0)}},{key:"clear",value:function(){var e=arguments.length>0&&arguments[0]!==void 0&&arguments[0];this.source.clear(),this.emit(h.DrawEvent.Clear,this),e&&this.disable()}},{key:"show",value:function(){return Object.values(this.render).forEach(function(e){e.show()})}},{key:"hide",value:function(){return Object.values(this.render).forEach(function(e){e.hide()})}},{key:"destroy",value:function(){var e,i=this;Object.values(this.render).forEach(function(o){o.destroy()}),Object.values(h.RenderEvent).forEach(function(o){Object.values(i.render).forEach(function(a){a.removeAllListeners(o)}),i.sceneRender.removeAllListeners(o)}),setTimeout(function(){Object.values(h.DrawEvent).forEach(function(o){i.removeAllListeners(o)})},0),(e=this.popup)===null||e===void 0||e.destroy(),this.cursor.destroy(),this.emit(h.DrawEvent.Destroy,this)}}]),r}(or),ke=function(t){var n=t==null?0:t.length;return n?t[n-1]:void 0},Oi=function(t){ft(r,t);var n=pt(r);function r(){return rt(this,r),n.apply(this,arguments)}return it(r,[{key:"pointRender",get:function(){return this.render.point}},{key:"dragPoint",get:function(){return this.getPointData().find(function(e){return e.properties.isDrag})}},{key:"editPoint",get:function(){return this.getPointData().find(function(e){return e.properties.isActive})}},{key:"hoverPoint",get:function(){return this.getPointData().find(function(e){return e.properties.isHover})}},{key:"getDragPoint",value:function(){return this.dragPoint}},{key:"getEditPoint",value:function(){return this.editPoint}},{key:"getPointData",value:function(){return this.source.getRenderData("point")}},{key:"setPointData",value:function(e){return this.source.setRenderData("point",e)}},{key:"bindPointRenderEvent",value:function(){var e,i,o,a,s,u;(e=this.pointRender)===null||e===void 0||e.on(h.RenderEvent.UnClick,this.onPointCreate.bind(this)),(i=this.pointRender)===null||i===void 0||i.on(h.RenderEvent.Mousemove,this.onPointMouseMove.bind(this)),(o=this.pointRender)===null||o===void 0||o.on(h.RenderEvent.Mouseout,this.onPointMouseOut.bind(this)),(a=this.pointRender)===null||a===void 0||a.on(h.RenderEvent.Dragstart,this.onPointDragStart.bind(this)),(s=this.pointRender)===null||s===void 0||s.on(h.RenderEvent.Dragging,this.onPointDragging.bind(this)),(u=this.pointRender)===null||u===void 0||u.on(h.RenderEvent.Dragend,this.onPointDragEnd.bind(this))}},{key:"handleCreatePoint",value:function(e){var i=this.options,o=i.autoActive,a=i.editable,s=Bt(e);return this.setPointData(function(u){return Ft({target:s,data:[].concat(ht(u),[s]),targetHandler:function(l){l.properties=x(x({},l.properties),{},{isHover:a,isActive:o&&a})},otherHandler:function(l){l.properties=x(x({},l.properties),{},{isHover:!1,isActive:!1,isDrag:!1})}})}),s}},{key:"handlePointHover",value:function(e){return this.setCursor("pointHover"),nt(e,this.hoverPoint)||this.setPointData(function(i){return Ft({target:e,data:i,targetHandler:function(o){o.properties.isHover=!0},otherHandler:function(o){o.properties.isHover=!1}})}),e}},{key:"handlePointUnHover",value:function(e){return this.resetCursor(),this.setPointData(function(i){return i.map(function(o){return o.properties.isHover=!1,o})}),e}},{key:"handlePointDragStart",value:function(e){return this.setPointData(function(i){return Ft({target:e,data:i,targetHandler:function(o){o.properties=x(x({},o.properties),{},{isDrag:!0,isActive:!0})},otherHandler:function(o){o.properties=x(x({},o.properties),{},{isDrag:!1,isActive:!1})}})}),this.scene.setMapStatus({dragEnable:!1}),this.setCursor("pointDrag"),e}},{key:"handlePointDragging",value:function(e,i){return this.setPointData(function(o){return Ft({target:e,data:o,targetHandler:function(a){a.geometry.coordinates=br(i)}})}),this.scene.setMapStatus({dragEnable:!1}),this.setCursor("pointDrag"),e}},{key:"handlePointDragEnd",value:function(e){return this.setPointData(function(i){return Ft({target:e,data:i,targetHandler:function(o){o.properties.isDrag=!1}})}),this.scene.setMapStatus({dragEnable:!0}),this.setCursor("pointHover"),e}},{key:"onPointCreate",value:function(e){return this.handleCreatePoint(br(xe(e)))}},{key:"onPointMouseMove",value:function(e){return this.handlePointHover(e.feature)}},{key:"onPointMouseOut",value:function(e){return this.handlePointUnHover(e.feature)}},{key:"onPointDragStart",value:function(e){if(this.options.editable)return this.handlePointDragStart(e.feature)}},{key:"onPointDragging",value:function(e){var i=this.dragPoint;if(this.options.editable&&i)return this.handlePointDragging(i,xe(e))}},{key:"onPointDragEnd",value:function(e){var i=this.dragPoint;if(this.options.editable&&i)return this.handlePointDragEnd(i)}},{key:"enablePointRenderAction",value:function(){var e,i,o,a,s=this.options.editable;this.enabled&&((i=this.pointRender)===null||i===void 0||i.enableCreate()),(e=this.pointRender)===null||e===void 0||e.enableClick(),s&&((o=this.pointRender)===null||o===void 0||o.enableHover(),(a=this.pointRender)===null||a===void 0||a.enableDrag())}},{key:"disablePointRenderAction",value:function(){var e,i,o,a;(e=this.pointRender)===null||e===void 0||e.disableCreate(),(i=this.pointRender)===null||i===void 0||i.disableHover(),(o=this.pointRender)===null||o===void 0||o.disableDrag(),(a=this.pointRender)===null||a===void 0||a.disableClick()}}]),r}(Ms),Ls=function(t){ft(r,t);var n=pt(r);function r(){return rt(this,r),n.apply(this,arguments)}return it(r,[{key:"midPointRender",get:function(){return this.render.midPoint}},{key:"getCommonOptions",value:function(e){return x(x({},S(R(r.prototype),"getCommonOptions",this).call(this,e)),{},{showMidPoint:!0})}},{key:"bindMidPointRenderEvent",value:function(){var e,i,o;(e=this.midPointRender)===null||e===void 0||e.on(h.RenderEvent.Click,this.onMidPointClick.bind(this)),(i=this.midPointRender)===null||i===void 0||i.on(h.RenderEvent.Mousemove,this.onMidPointHover.bind(this)),(o=this.midPointRender)===null||o===void 0||o.on(h.RenderEvent.Mouseout,this.onMidPointUnHover.bind(this))}},{key:"getMidPointData",value:function(){return this.source.getRenderData("midPoint")}},{key:"setMidPointData",value:function(e){return this.source.setRenderData("midPoint",e)}},{key:"getMidPointsByLine",value:function(e){var i=e.properties.nodes;if(!this.options.showMidPoint||2>i.length)return[];for(var o=[],a=0;i.length-1>a;a++){var s,u,l,c,f=Qr(Q([i[a],i[a+1]]),{properties:{id:Pe("midPoint"),startId:(s=(u=i[a].properties)===null||u===void 0?void 0:u.id)!==null&&s!==void 0?s:"",endId:(l=(c=i[a+1].properties)===null||c===void 0?void 0:c.id)!==null&&l!==void 0?l:""}});o.push(f)}return o}},{key:"onMidPointHover",value:function(e){this.setCursor("pointHover")}},{key:"onMidPointUnHover",value:function(e){this.resetCursor()}},{key:"enableMidPointRenderAction",value:function(){var e,i;(e=this.midPointRender)===null||e===void 0||e.enableClick(),(i=this.midPointRender)===null||i===void 0||i.enableHover()}},{key:"disableMidPointRenderAction",value:function(){var e,i;(e=this.midPointRender)===null||e===void 0||e.disableClick(),(i=this.midPointRender)===null||i===void 0||i.disableHover()}}]),r}(Oi),Vc={draw:"\u5355\u51FB\u7ED8\u5236\u70B9",pointHover:"\u53EF\u62D6\u62FD\u8C03\u6574\u70B9\u4F4D\u7F6E",pointDrag:null},qc={draw:"\u5355\u51FB\u7ED8\u5236\u9996\u4E2A\u8282\u70B9",pointHover:"\u53EF\u62D6\u62FD\u8C03\u6574\u8282\u70B9\u4F4D\u7F6E",pointDrag:null,lineHover:"\u53EF\u62D6\u62FD\u8C03\u6574\u7EBF\u4F4D\u7F6E",lineDrag:null,midPointHover:"\u5355\u51FB\u5728\u8BE5\u4F4D\u7F6E\u65B0\u589E\u8282\u70B9",drawFinish:"\u5355\u51FB\u7EE7\u7EED\u7ED8\u5236\uFF0C\u53CC\u51FB\u7ED3\u675F\u7ED8\u5236"},As={draw:"\u5355\u51FB\u7ED8\u5236\u9996\u4E2A\u8282\u70B9",drawContinue:"\u5355\u51FB\u7EE7\u7EED\u7ED8\u5236",drawFinish:"\u5355\u51FB\u7EE7\u7EED\u7ED8\u5236\uFF0C\u53CC\u51FB\u7ED3\u675F\u7ED8\u5236",midPointHover:"\u5355\u51FB\u5728\u8BE5\u4F4D\u7F6E\u65B0\u589E\u8282\u70B9",pointHover:"\u53EF\u62D6\u62FD\u8C03\u6574\u8282\u70B9\u4F4D\u7F6E",pointDrag:null,lineHover:"\u53EF\u62D6\u62FD\u8C03\u6574\u9762\u4F4D\u7F6E",lineDrag:null,polygonHover:"\u53EF\u62D6\u62FD\u8C03\u6574\u9762\u4F4D\u7F6E",polygonDrag:null},Zc=x(x({},As),{},{draw:"\u5355\u51FB\u7ED8\u5236\u9996\u4E2A\u8282\u70B9",drawFinish:"\u5355\u51FB\u7ED3\u675F\u7ED8\u5236"}),Kc={draw:"\u62D6\u62FD\u5F00\u59CB\u7ED8\u5236",drawFinish:"\u677E\u5F00\u9F20\u6807\u7ED3\u675F\u7ED8\u5236"},$c={lineHover:"\u53EF\u62D6\u62FD\u8C03\u6574\u77E9\u5F62\u4F4D\u7F6E",polygonHover:"\u53EF\u62D6\u62FD\u8C03\u6574\u77E9\u5F62\u4F4D\u7F6E"},Gc={lineHover:"\u53EF\u62D6\u62FD\u8C03\u6574\u5706\u4F4D\u7F6E",polygonHover:"\u53EF\u62D6\u62FD\u8C03\u6574\u5706\u4F4D\u7F6E"},Ci=function(t){ft(r,t);var n=pt(r);function r(){var e;rt(this,r);for(var i=arguments.length,o=Array(i),a=0;i>a;a++)o[a]=arguments[a];return(e=n.call.apply(n,[this].concat(o))).previousPosition=[0,0],e}return it(r,[{key:"lineRender",get:function(){return this.render.line}},{key:"dragLine",get:function(){return this.getLineData().find(function(e){return e.properties.isDrag})}},{key:"drawLine",get:function(){return this.getLineData().find(function(e){return e.properties.isDraw})}},{key:"editLine",get:function(){return this.getLineData().find(function(e){var i=e.properties;return!i.isDraw&&i.isActive})}},{key:"hoverLine",get:function(){return this.getLineData().find(function(e){return e.properties.isHover})}},{key:"getDragLine",value:function(){return this.dragLine}},{key:"getDrawLine",value:function(){return this.drawLine}},{key:"getEditLine",value:function(){return this.editLine}},{key:"getDefaultOptions",value:function(e){var i=x(x({},this.getCommonOptions(e)),{},{showMidPoint:!0,distanceOptions:!1,helper:Tt(qc)});return e.distanceOptions&&(i.distanceOptions=x(x({},Po),i.distanceOptions)),e.adsorbOptions&&(i.adsorbOptions=x(x({},Ao),i.adsorbOptions)),i}},{key:"getAdsorbPosition",value:function(e){var i=this.options.adsorbOptions;if(typeof i=="boolean")return e;var o=this.scene,a=i.pointAdsorbPixel,s=i.lineAdsorbPixel,u=null,l=Es(i.data,this,e),c=l.points,f=l.lines;return c.length&&a>0&&(u=ws(e,c,i,o)),!u&&f.length&&s>0&&(u=Ps(e,f,i,o)),u}},{key:"bindSceneEvent",value:function(){this.sceneRender.on(h.RenderEvent.Mousemove,this.onSceneMouseMove.bind(this))}},{key:"bindPointRenderEvent",value:function(){var e;S(R(r.prototype),"bindPointRenderEvent",this).call(this),(e=this.pointRender)===null||e===void 0||e.on(h.RenderEvent.Click,this.onPointClick.bind(this))}},{key:"bindLineRenderEvent",value:function(){var e,i,o,a,s,u;(e=this.lineRender)===null||e===void 0||e.on(h.RenderEvent.UnClick,this.onLineUnClick.bind(this)),(i=this.lineRender)===null||i===void 0||i.on(h.RenderEvent.Mousemove,this.onLineMouseMove.bind(this)),(o=this.lineRender)===null||o===void 0||o.on(h.RenderEvent.Mouseout,this.onLineMouseOut.bind(this)),(a=this.lineRender)===null||a===void 0||a.on(h.RenderEvent.Dragstart,this.onLineDragStart.bind(this)),(s=this.lineRender)===null||s===void 0||s.on(h.RenderEvent.Dragging,this.onLineDragging.bind(this)),(u=this.lineRender)===null||u===void 0||u.on(h.RenderEvent.Dragend,this.onLineDragEnd.bind(this))}},{key:"getDashLineDistanceTexts",value:function(e,i){var o=i.showTotalDistance,a=i.format;return i.showDashDistance?e.map(function(s){return mr(s,{showTotalDistance:o,format:a},{isActive:!0,type:"dash"})}).flat():[]}},{key:"getLineDistanceTexts",value:function(e,i){var o=i.showTotalDistance,a=i.format,s=i.showWhen,u=[];if(s.includes("active")){var l=e.filter(function(f){return f.properties.isActive&&f.properties.nodes.length>1});u.push.apply(u,ht(l.map(function(f){return mr(f,{showTotalDistance:o,format:a},{isActive:!0})}).flat()))}if(s.includes("normal")){var c=e.filter(function(f){return!f.properties.isActive&&f.properties.nodes.length>1});u.push.apply(u,ht(c.map(function(f){return mr(f,{showTotalDistance:o,format:a})}).flat()))}return u}},{key:"getDistanceTexts",value:function(){var e=this.options.distanceOptions;if(!e)return[];var i=[],o=e.showWhen,a=e.showDashDistance,s=e.format,u=e.showTotalDistance;return i.push.apply(i,ht(this.getDashLineDistanceTexts(this.getDashLineData(),{showTotalDistance:!1,format:s,showDashDistance:a})).concat(ht(this.getLineDistanceTexts(this.getLineData(),{showTotalDistance:u,format:s,showWhen:o})))),i}},{key:"getAllTexts",value:function(){return this.getDistanceTexts()}},{key:"handleCreateLine",value:function(e){var i=Bn([e],{isActive:!0,isDraw:!0});return this.setLineData(function(o){return Ft({target:i,data:[].concat(ht(o),[i]),otherHandler:function(a){a.properties.isActive=!1}})}),this.setPointData([e]),this.setTextData(this.getAllTexts()),i}},{key:"syncLineNodes",value:function(e,i){return e.properties.nodes=i,e.geometry.coordinates=Ut(Q(i)),this.setLineData(function(o){return o.map(function(a){return nt(a,e)?e:a})}),nt(this.editLine,e)&&this.setMidPointData(this.getMidPointsByLine(e)),this.setPointData(e.properties.nodes),this.setTextData(this.getAllTexts()),e}},{key:"setActiveLine",value:function(e){var i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return this.setLineData(function(o){return Ft({target:e,data:o,targetHandler:function(a){a.properties=x(x({},a.properties),{},{isDraw:!1,isActive:!0,isDrag:!1,isHover:!1},i)},otherHandler:function(a){a.properties=x(x({},a.properties),{},{isDraw:!1,isActive:!1,isDrag:!1})}})}),this.setPointData(e.properties.nodes.map(function(o){return o.properties=x(x({},o.properties),{},{isHover:!1,isActive:!1}),o})),this.setMidPointData(this.getMidPointsByLine(e)),this.setDashLineData([]),this.setTextData(this.getAllTexts()),e}},{key:"clearActiveLine",value:function(){this.source.setData({point:[],line:this.getLineData().map(function(e){return e.properties=x(x({},e.properties),{},{isActive:!1,isHover:!1}),e}),midPoint:[],text:this.getAllTexts()})}},{key:"handleLineUnClick",value:function(e){return this.clearActiveLine(),e}},{key:"handleLineHover",value:function(e){if(!this.drawLine)return this.setCursor("lineHover"),nt(e,this.hoverLine)||this.setLineData(function(i){return Ft({target:e,data:i,targetHandler:function(o){o.properties.isHover=!0},otherHandler:function(o){o.properties.isHover=!1}})}),e}},{key:"handleLineUnHover",value:function(e){if(!this.drawLine)return this.resetCursor(),this.setLineData(function(i){return i.map(function(o){return o.properties.isHover=!1,o})}),e}},{key:"handleLineDragStart",value:function(e){return this.setActiveLine(e,{isDrag:!0,isActive:!0}),this.scene.setMapStatus({dragEnable:!1}),this.setCursor("lineDrag"),e}},{key:"handleLineDragging",value:function(e,i){var o=i.lng,a=i.lat,s=e.properties.nodes,u=wt(this.previousPosition,2),l=u[0],c=u[1];return s.forEach(function(f){var p=f.geometry.coordinates;f.geometry.coordinates=[p[0]+o-l,p[1]+a-c]}),this.syncLineNodes(e,s),this.setActiveLine(e,{isDrag:!0}),this.setCursor("lineDrag"),this.previousPosition=[o,a],e}},{key:"handleLineDragEnd",value:function(e){return e.properties.isDrag=!1,this.setLineData(function(i){return i}),this.scene.setMapStatus({dragEnable:!0}),e}},{key:"resetAdsorbLngLat",value:function(e){if(this.options.adsorbOptions){var i=this.getAdsorbPosition(br(xe(e)));return i&&xs(e,i),i}}},{key:"onPointCreate",value:function(e){if(!this.editLine){this.resetAdsorbLngLat(e);var i=S(R(r.prototype),"onPointCreate",this).call(this,e),o=this.drawLine;if(i)return o?(this.syncLineNodes(o,[].concat(ht(o.properties.nodes),[i])),this.setDashLineData([])):this.handleCreateLine(i),i}}},{key:"onPointDragStart",value:function(e){if(this.editLine)return this.setHelper("pointDrag"),S(R(r.prototype),"onPointDragStart",this).call(this,e)}},{key:"onPointDragging",value:function(e){var i=S(R(r.prototype),"onPointDragging",this).call(this,e);if(i){var o=this.resetAdsorbLngLat(e);o&&(i.geometry.coordinates=Tt(o))}var a=this.editLine;return a&&i&&(this.syncLineNodes(a,a.properties.nodes.map(function(s){return nt(i,s)?i:s})),this.setActiveLine(a)),i}},{key:"onPointDragEnd",value:function(e){if(this.editLine){var i=S(R(r.prototype),"onPointDragEnd",this).call(this,e);return this.setPointData(function(o){return o.map(function(a){return a.properties.isActive=!1,a})}),this.setHelper("pointHover"),i}}},{key:"onLineUnClick",value:function(e){var i=this.editLine;if(i)return this.handleLineUnClick(i)}},{key:"onLineMouseMove",value:function(e){if(!this.drawLine)return this.dragLine||this.drawLine||!this.options.editable||this.setHelper("lineHover"),this.handleLineHover(e.feature)}},{key:"onLineMouseOut",value:function(e){if(!this.drawLine)return this.dragLine||this.drawLine||this.setHelper(this.addable?"draw":null),this.handleLineUnHover(e.feature)}},{key:"onLineDragStart",value:function(e){if(this.options.editable&&!this.drawLine)return this.previousPosition=Zt(e),this.setHelper("lineDrag"),this.handleLineDragStart(e.feature)}},{key:"onLineDragging",value:function(e){var i=this.dragLine;if(i)return this.handleLineDragging(i,xe(e))}},{key:"onLineDragEnd",value:function(e){var i=this.dragLine;if(i)return this.setHelper("lineHover"),this.handleLineDragEnd(i)}},{key:"onPointMouseMove",value:function(e){var i=S(R(r.prototype),"onPointMouseMove",this).call(this,e);return this.dragLine||this.drawLine||this.dragPoint||this.setHelper("pointHover"),i}},{key:"onPointMouseOut",value:function(e){var i=S(R(r.prototype),"onPointMouseOut",this).call(this,e);return this.dragLine||this.drawLine||this.dragPoint||this.setHelper(this.addable?"draw":null),i}},{key:"onMidPointHover",value:function(e){S(R(r.prototype),"onMidPointHover",this).call(this,e),this.setHelper("midPointHover")}},{key:"onMidPointUnHover",value:function(e){S(R(r.prototype),"onMidPointUnHover",this).call(this,e),this.setHelper(null)}},{key:"onPointClick",value:function(e){}},{key:"getLineData",value:function(){return this.source.getRenderData("line")}},{key:"setLineData",value:function(e){return this.source.setRenderData("line",e)}},{key:"getTextData",value:function(){return this.source.getRenderData("text")}},{key:"setTextData",value:function(e){return this.source.setRenderData("text",e)}},{key:"getDashLineData",value:function(){return this.source.getRenderData("dashLine")}},{key:"setDashLineData",value:function(e){return this.source.setRenderData("dashLine",e)}},{key:"onMidPointClick",value:function(e){var i=this.editLine,o=e.feature;if(i&&o&&!this.dragPoint){var a=i.properties.nodes,s=o.properties,u=s.startId,l=s.endId,c=a.findIndex(function(b){return b.properties.id===u}),f=a.findIndex(function(b){return b.properties.id===l});if(c>-1&&f>-1){var p=Bt(o.geometry.coordinates,{isDrag:!0,isHover:!0});return this.setHelper("pointDrag"),a.splice(f,0,p),i.geometry.coordinates=Ut(Q(a)),this.syncLineNodes(i,a),this.setActiveLine(i),p}}}},{key:"enableSceneRenderAction",value:function(){this.sceneRender.enableDrag(),this.sceneRender.enableMouseMove(),this.sceneRender.enableDblClick()}},{key:"disableSceneRenderAction",value:function(){this.sceneRender.disableDrag(),this.sceneRender.disableMouseMove(),this.sceneRender.disableDblClick()}},{key:"enableLineRenderAction",value:function(){var e,i,o,a=this.options.editable;(e=this.lineRender)===null||e===void 0||e.enableUnClick(),a&&((i=this.lineRender)===null||i===void 0||i.enableHover(),(o=this.lineRender)===null||o===void 0||o.enableDrag())}},{key:"disableLineRenderAction",value:function(){var e,i,o;(e=this.lineRender)===null||e===void 0||e.disableUnClick(),(i=this.lineRender)===null||i===void 0||i.disableHover(),(o=this.lineRender)===null||o===void 0||o.disableDrag()}}]),r}(Ls),Ri=function(t){ft(r,t);var n=pt(r);function r(){return rt(this,r),n.apply(this,arguments)}return it(r,[{key:"dragItem",get:function(){return this.dragPolygon}},{key:"editItem",get:function(){return this.editPolygon}},{key:"polygonRender",get:function(){return this.render.polygon}},{key:"dragPolygon",get:function(){return this.getPolygonData().find(function(e){return e.properties.isDrag})}},{key:"drawPolygon",get:function(){return this.getPolygonData().find(function(e){return e.properties.isDraw})}},{key:"editPolygon",get:function(){return this.getPolygonData().find(function(e){var i=e.properties;return!i.isDraw&&i.isActive})}},{key:"hoverPolygon",get:function(){return this.getPolygonData().find(function(e){return e.properties.isHover})}},{key:"getDragPolygon",value:function(){return this.dragPolygon}},{key:"getDrawPolygon",value:function(){return this.drawPolygon}},{key:"getEditPolygon",value:function(){return this.editPolygon}},{key:"getRenderTypes",value:function(){return["polygon","line","dashLine","midPoint","point","text"]}},{key:"getData",value:function(){return this.getPolygonData()}},{key:"getMainLayer",value:function(){var e,i;return(e=(i=this.render.polygon)===null||i===void 0?void 0:i.getLayers())!==null&&e!==void 0?e:[]}},{key:"getDefaultOptions",value:function(e){var i=x(x({},S(R(r.prototype),"getDefaultOptions",this).call(this,e)),{},{areaOptions:!1,helper:Tt(As)});return e.areaOptions&&(i.areaOptions=x(x({},xo),e.areaOptions)),i}},{key:"getAreaTexts",value:function(e){var i=this.options.areaOptions;if(!i)return[];var o=i.format,a=i.showWhen,s=[],u=e.filter(function(l){return l.geometry.coordinates[0].length>=4});return a.includes("active")&&u.filter(function(l){return l.properties.isActive}).forEach(function(l){s.push(Mi(l,{format:o},{isActive:!0}))}),a.includes("normal")&&u.filter(function(l){return!l.properties.isActive}).forEach(function(l){s.push(Mi(l,{format:o},{isActive:!1}))}),s}},{key:"getAllTexts",value:function(){return[].concat(ht(S(R(r.prototype),"getAllTexts",this).call(this)),ht(this.getAreaTexts(this.getPolygonData())))}},{key:"getPolygonData",value:function(){return this.source.getRenderData("polygon")}},{key:"setPolygonData",value:function(e){return this.source.setRenderData("polygon",e)}},{key:"handleCreatePolygon",value:function(e,i){var o=ki(e,{nodes:e,line:i,isActive:!0,isDraw:!0});return this.setPolygonData(function(a){return Ft({target:o,data:[].concat(ht(a),[o]),otherHandler:function(s){s.properties.isActive=!1}})}),o}},{key:"handlePolygonUnClick",value:function(e){return this.clearActivePolygon(),e}},{key:"handlePolygonHover",value:function(e){return this.setCursor("polygonHover"),nt(e,this.hoverPolygon)||this.setPolygonData(function(i){return Ft({target:e,data:i,targetHandler:function(o){o.properties.isHover=!0},otherHandler:function(o){o.properties.isHover=!1}})}),e}},{key:"handlePolygonUnHover",value:function(){this.resetCursor(),this.setPolygonData(function(e){return e.map(function(i){return i.properties.isHover=!1,i})})}},{key:"handlePolygonDragStart",value:function(e){return this.setActivePolygon(e,{isDrag:!0}),this.scene.setMapStatus({dragEnable:!1}),this.setCursor("polygonDrag"),e}},{key:"bindPolygonRenderEvent",value:function(){var e,i,o,a;(e=this.polygonRender)===null||e===void 0||e.on(h.RenderEvent.UnClick,this.onPolygonUnClick.bind(this)),(i=this.polygonRender)===null||i===void 0||i.on(h.RenderEvent.Mousemove,this.onPolygonHover.bind(this)),(o=this.polygonRender)===null||o===void 0||o.on(h.RenderEvent.Mouseout,this.onPolygonUnHover.bind(this)),(a=this.polygonRender)===null||a===void 0||a.on(h.RenderEvent.Dragstart,this.onPolygonDragStart.bind(this))}},{key:"syncPolygonNodes",value:function(e,i){var o=Ut(Q([].concat(ht(i),[we(i)]))),a=e.properties,s=a.line;if(e.properties.nodes=i,e.geometry.coordinates=[Ru(Rt(o))?o:o.reverse()],this.setPolygonData(function(p){return p.map(function(b){return nt(b,e)?e:b})}),!nt(this.drawPolygon,e)){var u=s.properties.nodes,l=ht(i),c=we(l);l.push(u.length===i.length?Bt(c.geometry.coordinates):ke(u));var f=ke(l);hn(c.geometry.coordinates,f.geometry.coordinates)||(f.geometry.coordinates=Tt(c.geometry.coordinates)),this.syncLineNodes(s,l)}return e}},{key:"setActivePolygon",value:function(e){var i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return this.setActiveLine(e.properties.line,i),this.setPolygonData(function(o){return Ft({target:e,data:o,targetHandler:function(a){a.properties=x(x({},a.properties),{},{isDraw:!1,isActive:!0,isDrag:!1,isHover:!1},i)},otherHandler:function(a){a.properties=x(x({},a.properties),{},{isDraw:!1,isActive:!1,isDrag:!1})}})}),this.setTextData(this.getAllTexts()),e}},{key:"clearActivePolygon",value:function(){this.setPolygonData(function(e){return e.map(function(i){return i.properties=x(x({},i.properties),{},{isActive:!1,isHover:!1}),i})}),this.clearActiveLine()}},{key:"onLineDragStart",value:function(e){var i=S(R(r.prototype),"onLineDragStart",this).call(this,e),o=this.getPolygonData().find(function(a){return nt(a.properties.line,i)});return o&&(this.setActivePolygon(o,{isDrag:!0}),this.emit(h.DrawEvent.DragStart,o,this.getPolygonData())),i}},{key:"onLineUnClick",value:function(e){return this.editLine}},{key:"onLineDragEnd",value:function(e){var i=S(R(r.prototype),"onLineDragEnd",this).call(this,e),o=this.dragPolygon;return i&&o&&(o.properties.isDrag=!1,this.emit(h.DrawEvent.DragEnd,o,this.getPolygonData()),this.emit(h.DrawEvent.Edit,o,this.getPolygonData())),i}},{key:"onPolygonUnClick",value:function(e){var i=this.editPolygon;if(i)return this.handlePolygonUnClick(i)}},{key:"onPolygonHover",value:function(e){if(!this.drawPolygon)return this.dragPolygon||this.setHelper("polygonHover"),this.handlePolygonHover(e.feature)}},{key:"onPolygonUnHover",value:function(e){if(!this.drawPolygon)return this.setHelper(this.addable?"draw":null),this.handlePolygonUnHover()}},{key:"onPolygonDragStart",value:function(e){if(this.options.editable&&!this.drawPolygon){var i=e.feature;return this.previousPosition=Zt(e),this.setHelper("polygonDrag"),this.emit(h.DrawEvent.DragStart,i,this.getPolygonData()),this.handlePolygonDragStart(i)}}},{key:"onMidPointClick",value:function(e){var i=this.editPolygon,o=S(R(r.prototype),"onMidPointClick",this).call(this,e);if(o&&i){var a=i.properties.line.properties.nodes;this.syncPolygonNodes(i,a.slice(0,a.length-1)),this.setActivePolygon(i)}return o}},{key:"onPointDragEnd",value:function(e){var i=this.editPolygon,o=S(R(r.prototype),"onPointDragEnd",this).call(this,e);return o&&i&&this.emit(h.DrawEvent.Edit,i,this.getPolygonData()),o}},{key:"enablePolygonRenderAction",value:function(){var e,i,o,a=this.options.editable;(e=this.polygonRender)===null||e===void 0||e.enableUnClick(),a&&((i=this.polygonRender)===null||i===void 0||i.enableHover(),(o=this.polygonRender)===null||o===void 0||o.enableDrag())}},{key:"disablePolygonRenderAction",value:function(){var e,i,o;(e=this.polygonRender)===null||e===void 0||e.disableUnClick(),(i=this.polygonRender)===null||i===void 0||i.disableHover(),(o=this.polygonRender)===null||o===void 0||o.disableDrag()}},{key:"bindEnableEvent",value:function(){S(R(r.prototype),"bindEnableEvent",this).call(this),this.enableSceneRenderAction(),this.enablePointRenderAction(),this.enableLineRenderAction(),this.enableMidPointRenderAction(),this.enablePolygonRenderAction()}},{key:"unbindEnableEvent",value:function(){S(R(r.prototype),"unbindEnableEvent",this).call(this),this.disableSceneRenderAction(),this.disablePointRenderAction(),this.disableLineRenderAction(),this.disableMidPointRenderAction(),this.disablePolygonRenderAction()}},{key:"bindThis",value:function(){S(R(r.prototype),"bindThis",this).call(this),this.bindPointRenderEvent=this.bindPointRenderEvent.bind(this),this.bindSceneEvent=this.bindSceneEvent.bind(this),this.bindLineRenderEvent=this.bindLineRenderEvent.bind(this),this.bindMidPointRenderEvent=this.bindMidPointRenderEvent.bind(this),this.bindPolygonRenderEvent=this.bindPolygonRenderEvent.bind(this)}},{key:"setActiveFeature",value:function(e){var i=this.getTargetFeature(e);i?this.setActivePolygon(i):this.clearActivePolygon()}},{key:"resetFeatures",value:function(){var e=this.getPolygonData();this.drawPolygon&&(e=e.filter(function(i){return!i.properties.isDraw}),this.source.setData({point:[],dashLine:[],midPoint:[]}),this.setLineData(function(i){return i.filter(function(o){return!o.properties.isDraw})}),this.setTextData(function(i){return i.filter(function(o){return!o.properties.isActive})})),this.editPolygon&&this.handlePolygonUnClick(this.editPolygon),this.setPolygonData(e.map(function(i){return i.properties=x(x({},i.properties),{},{isDrag:!1,isActive:!1,isHover:!1}),i}))}}]),r}(Ci),Si=function(t){ft(r,t);var n=pt(r);function r(e,i){var o;return rt(this,r),(o=n.call(this,e,i)).onSceneDragStart=o.onSceneDragStart.bind(En(o)),o.onSceneDragEnd=o.onSceneDragEnd.bind(En(o)),o}return it(r,[{key:"drawLine",get:function(){var e;return(e=this.drawPolygon)===null||e===void 0?void 0:e.properties.line}},{key:"isDragTrigger",get:function(){return this.options.trigger==="drag"}},{key:"isClickTrigger",get:function(){return this.options.trigger==="click"}},{key:"getDefaultOptions",value:function(e){var i=x(x({},S(R(r.prototype),"getDefaultOptions",this).call(this,e)),{},{showMidPoint:!1,trigger:"click",autoActive:!1,helper:Tt(Zc)});return e.trigger==="drag"&&(i.helper=x(x({},i.helper),Kc)),i}},{key:"getMidPointsByLine",value:function(e){return[]}},{key:"handleCreatePolygon",value:function(e,i){var o=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},a=i.properties.nodes;return ki(a.slice(0,a.length-1),x({nodes:e,line:i},o))}},{key:"handleFirstNodeCreate",value:function(e){var i=Bt(e.geometry.coordinates),o=this.handleCreatePolygonLine(e,i,{isDraw:!0,isActive:!0}),a=this.handleCreatePolygon([e,i],o,{isDraw:!0,isActive:!0});return this.setPolygonData(function(s){return Ft({target:a,data:[].concat(ht(s),[a]),targetHandler:function(u){u.properties=x(x({},u.properties),{},{isDraw:!0,isActive:!0})}})}),this.emit(h.DrawEvent.AddNode,e,this.drawPolygon,this.getPolygonData()),this.setHelper("drawFinish"),e}},{key:"handleLastNodeCreate",value:function(e){var i=this.options,o=i.autoActive,a=i.editable,s=this.drawPolygon;return s&&(this.setLineData(function(u){return[].concat(ht(u),[s.properties.line])}),this.setActivePolygon(s),o&&a||this.handlePolygonUnClick(s),this.emit(h.DrawEvent.Add,s,this.getPolygonData()),this.emit(h.DrawEvent.AddNode,s.properties.nodes[1],this.drawPolygon,this.getPolygonData()),this.setHelper(a?o?"pointHover":"polygonHover":this.addable?"draw":null)),e}},{key:"onPointCreate",value:function(e){var i=this;if(this.addable&&!this.dragPoint&&!this.editLine&&this.isClickTrigger){var o=this.drawPolygon,a=Zt(e),s=this.handleCreatePoint(a);return o?requestAnimationFrame(function(){i.handleLastNodeCreate(s)}):this.handleFirstNodeCreate(s),s}}},{key:"setActivePolygon",value:function(e){var i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};this.setActiveLine(e.properties.line,i),this.setPolygonData(function(a){return Ft({target:e,data:a,targetHandler:function(s){s.properties=x(x({},s.properties),{},{isDraw:!1,isActive:!0,isDrag:!1,isHover:!1},i)},otherHandler:function(s){s.properties=x(x({},s.properties),{},{isDraw:!1,isActive:!1,isDrag:!1})}})}),this.setPointData(e.properties.nodes),this.setDashLineData([]);var o=this.getAllTexts();return this.setTextData(o),e}},{key:"onPointDragging",value:function(e){var i=this.dragPoint;if(i){var o=this.handlePointDragging(i,xe(e)),a=this.editPolygon;return o&&a&&(this.syncPolygonNodes(a,a.properties.nodes.map(function(s){return nt(s,o)?o:s})),this.setActivePolygon(a)),o}}},{key:"onSceneDragStart",value:function(e){this.isDragTrigger&&this.addable&&!this.dragPoint&&!this.editLine&&(this.scene.setMapStatus({dragEnable:!1}),this.handleFirstNodeCreate(this.handleCreatePoint(Zt(e))))}},{key:"onSceneDragEnd",value:function(e){this.isDragTrigger&&this.addable&&!this.dragPoint&&!this.editLine&&this.drawPolygon&&(this.scene.setMapStatus({dragEnable:!1}),this.handleLastNodeCreate(this.handleCreatePoint(Zt(e))))}},{key:"onSceneMouseMove",value:function(e){var i=this.drawPolygon;if(i){var o=i.properties.nodes,a=we(o),s=ke(o);s.geometry.coordinates=Zt(e),this.syncPolygonNodes(i,[a,s]),this.setDashLineData([i.properties.line]),this.setTextData(this.getAllTexts()),this.resetCursor()}}},{key:"bindSceneDragEvent",value:function(){this.unbindSceneDragEvent(),this.sceneRender.on(h.RenderEvent.Dragstart,this.onSceneDragStart),this.sceneRender.on(h.RenderEvent.Dragend,this.onSceneDragEnd),this.scene.setMapStatus({dragEnable:!1})}},{key:"unbindSceneDragEvent",value:function(){this.sceneRender.off(h.RenderEvent.Dragstart,this.onSceneDragStart),this.sceneRender.off(h.RenderEvent.Dragend,this.onSceneDragEnd),this.scene.setMapStatus({dragEnable:!0})}},{key:"bindEnableEvent",value:function(){S(R(r.prototype),"bindEnableEvent",this).call(this),this.isDragTrigger&&this.bindSceneDragEvent()}},{key:"unbindEnableEvent",value:function(){S(R(r.prototype),"unbindEnableEvent",this).call(this),this.isDragTrigger&&this.unbindSceneDragEvent()}},{key:"bindThis",value:function(){S(R(r.prototype),"bindThis",this).call(this),this.onSceneDragStart=this.onSceneDragStart.bind(this),this.onSceneDragEnd=this.onSceneDragEnd.bind(this)}}]),r}(Ri),Ti=function(t){ft(r,t);var n=pt(r);function r(e,i){var o;return rt(this,r),(o=n.call(this,e,i)).bindPointRenderEvent(),o.bindSceneEvent(),o.bindMidPointRenderEvent(),o.bindLineRenderEvent(),o.bindPolygonRenderEvent(),o}return it(r,[{key:"getDefaultOptions",value:function(e){var i=x(x({},S(R(r.prototype),"getDefaultOptions",this).call(this,e)),{},{showMidPoint:!1,circleSteps:60});return i.distanceOptions&&(i.distanceOptions.showTotalDistance=!0,i.distanceOptions.showOnRadius===void 0&&(i.distanceOptions.showOnRadius=!0)),i.helper&&(i.helper=x(x({},i.helper),Gc)),i}},{key:"getDistanceTexts",value:function(){var e=this.options.distanceOptions;if(!e)return[];var i=[],o=e.showWhen,a=e.showDashDistance,s=e.format,u=e.showTotalDistance;return i.push.apply(i,ht(this.getDashLineDistanceTexts(this.getDashLineData(),{showTotalDistance:!0,format:s,showDashDistance:a})).concat(ht(this.getLineDistanceTexts(this.getLineData(),{showTotalDistance:u,format:s,showWhen:o})))),i}},{key:"setData",value:function(e){var i=this,o=e.map(function(a){var s,u,l;a.properties=x(x({},Fn()),a.properties);var c=(s=a.properties)===null||s===void 0?void 0:s.nodes;if(((u=c)===null||u===void 0?void 0:u.length)!==2){var f=wt(Qr(a).geometry.coordinates,2),p=f[0],b=f[1],D=Ce(a),m=D[2],y=(D[1]+D[3])/2;c=[Bt([p,b]),Bt([m,y])],a.properties.nodes=c}var v=c[0],g=c[1],d=!!(!((l=a.properties)===null||l===void 0)&&l.isActive),E=a.properties.line;return E||(E=i.handleCreatePolygonLine(v,g,{isActive:d}),a.properties.line=E),i.handleCreatePolygon([v,g],E,x(x({},a.properties),{},{isActive:d}))});this.source.setData({point:[],midPoint:[],dashLine:[],polygon:o,line:o.map(function(a){return a.properties.line})}),this.setTextData(this.getAllTexts()),this.editPolygon&&this.setActivePolygon(this.editPolygon)}},{key:"handleCreatePolygonLine",value:function(e,i){var o=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},a=this.getBoundaryPositions(e,i).map(function(s){return Bt(s)});return Bn(a,o)}},{key:"syncPolygonNodes",value:function(e,i){var o=e.properties.line,a=this.getBoundaryPositions(i[0],i[1]);return e.properties.nodes=i,e.geometry.coordinates=[a],this.setPolygonData(function(s){return s.map(function(u){return nt(u,e)?e:u})}),this.setPointData(e.properties.isDraw?[i[0]]:i),o.properties.nodes.forEach(function(s,u){s.geometry.coordinates=a[u]}),o.geometry.coordinates=a,e}},{key:"onLineDragging",value:function(e){var i=this.dragPolygon,o=wt(this.previousPosition,2),a=o[0],s=o[1],u=S(R(r.prototype),"onLineDragging",this).call(this,e);if(i){var l=wt(Zt(e),2),c=l[0],f=l[1];i.properties.nodes.forEach(function(p){var b=wt(p.geometry.coordinates,2);p.geometry.coordinates=[b[0]+c-a,b[1]+f-s]}),this.syncPolygonNodes(i,i.properties.nodes),this.setActivePolygon(i,{isDrag:!0}),this.emit(h.DrawEvent.Dragging,i,this.getPolygonData())}return u}},{key:"getBoundaryPositions",value:function(e,i){for(var o=this.options.circleSteps,a=ve(e,i,{units:"meters"}),s=[],u=0;o>u;u++)s.push(nr(e,a,-360*u/o,{units:"meters"}).geometry.coordinates);return s.push(s[0]),s}}]),r}(Si),ji=function(t){ft(r,t);var n=pt(r);function r(e,i){var o;return rt(this,r),(o=n.call(this,e,i)).drawLineFinish=function(){var a,s=o.drawLine,u=(a=s==null?void 0:s.properties.nodes)!==null&&a!==void 0?a:[];if(s&&(u==null?void 0:u.length)>1){o.setActiveLine(s);var l=o.options,c=l.autoActive,f=l.editable;c&&f||o.handleLineUnClick(s),o.setHelper(f&&c?"pointHover":o.addable?"draw":null),o.emit(h.DrawEvent.Add,s,o.getLineData())}},o.sceneRender.on(h.RenderEvent.DblClick,o.drawLineFinish),o.bindPointRenderEvent(),o.bindSceneEvent(),o.bindMidPointRenderEvent(),o.bindLineRenderEvent(),o}return it(r,[{key:"dragItem",get:function(){return this.dragLine}},{key:"editItem",get:function(){return this.editLine}},{key:"getMainLayer",value:function(){var e,i;return(e=(i=this.render.line)===null||i===void 0?void 0:i.getLayers())!==null&&e!==void 0?e:[]}},{key:"setData",value:function(e){var i=e.map(function(o){var a,s;return o.properties=x(x({},xi()),(a=o.properties)!==null&&a!==void 0?a:{}),!((s=o.properties.nodes)===null||s===void 0)&&s.length||(o.properties.nodes=Ut(o).map(function(u){return Bt(u)})),o});this.source.setData({point:[],midPoint:[],dashLine:[],line:i}),this.setTextData(this.getAllTexts()),this.editLine&&this.setActiveLine(this.editLine)}},{key:"getData",value:function(){return this.getLineData()}},{key:"getRenderTypes",value:function(){return["line","dashLine","midPoint","point","text"]}},{key:"bindPointRenderEvent",value:function(){var e;S(R(r.prototype),"bindPointRenderEvent",this).call(this),(e=this.pointRender)===null||e===void 0||e.on(h.RenderEvent.Contextmenu,this.onPointContextMenu.bind(this))}},{key:"onPointClick",value:function(e){var i,o=this,a=this.drawLine,s=(i=a==null?void 0:a.properties.nodes)!==null&&i!==void 0?i:[],u=e.feature;if(nt(u,ke(s)))requestAnimationFrame(function(){o.drawLineFinish()});else{var l=wt(u.geometry.coordinates,2);e.lngLat={lng:l[0],lat:l[1]},this.onPointCreate(e)}}},{key:"removeNode",value:function(e,i){var o,a=this.getTargetFeature(i),s=this.getTargetFeature(e,(o=a==null?void 0:a.properties.nodes)!==null&&o!==void 0?o:[]);if(a&&s){var u,l=(u=a==null?void 0:a.properties.nodes)!==null&&u!==void 0?u:[];if(3>l.length)return;this.syncLineNodes(a,l.filter(function(c){return!nt(s,c)})),this.emit(h.DrawEvent.RemoveNode,s,a,this.getLineData()),this.emit(h.DrawEvent.Edit,a,this.getLineData())}}},{key:"onPointContextMenu",value:function(e){var i,o=this.editLine,a=e.feature,s=(i=o==null?void 0:o.properties.nodes)!==null&&i!==void 0?i:[];if(o&&s.length>=3)return this.removeNode(a,o),this.scene.setMapStatus({dragEnable:!0}),a}},{key:"onPointCreate",value:function(e){if(this.addable){var i=S(R(r.prototype),"onPointCreate",this).call(this,e);return i&&(this.setHelper("drawFinish"),this.emit(h.DrawEvent.AddNode,i,this.drawLine,this.getLineData())),i}}},{key:"onPointDragEnd",value:function(e){var i=this.editLine,o=S(R(r.prototype),"onPointDragEnd",this).call(this,e);return i&&o&&this.emit(h.DrawEvent.Edit,i,this.getLineData()),o}},{key:"onLineDragStart",value:function(e){var i=S(R(r.prototype),"onLineDragStart",this).call(this,e);return i&&this.emit(h.DrawEvent.DragStart,i,this.getLineData()),i}},{key:"onLineDragging",value:function(e){var i=S(R(r.prototype),"onLineDragging",this).call(this,e);return i&&this.emit(h.DrawEvent.Dragging,i,this.getLineData()),i}},{key:"onLineDragEnd",value:function(e){var i=S(R(r.prototype),"onLineDragEnd",this).call(this,e);return i&&(this.emit(h.DrawEvent.DragEnd,i,this.getLineData()),this.emit(h.DrawEvent.Edit,i,this.getLineData())),i}},{key:"onMidPointClick",value:function(e){var i=this.editLine,o=S(R(r.prototype),"onMidPointClick",this).call(this,e);return i&&o&&(this.emit(h.DrawEvent.Edit,i,this.getLineData()),this.emit(h.DrawEvent.AddNode,o,i,this.getLineData())),o}},{key:"onSceneMouseMove",value:function(e){var i=this.drawLine;if(i){var o,a=ke(i.properties.nodes),s=Zt(e);this.options.adsorbOptions&&(s=(o=this.getAdsorbPosition(s))!==null&&o!==void 0?o:s),this.setDashLineData([Nn([s,a.geometry.coordinates])]),this.setTextData(this.getAllTexts())}}},{key:"setActiveFeature",value:function(e){var i=this.getTargetFeature(e);i?this.setActiveLine(i):this.clearActiveLine()}},{key:"resetFeatures",value:function(){var e=this.getLineData();this.drawLine&&(e=e.filter(function(i){return!i.properties.isDraw}),this.source.setData({point:[],dashLine:[],midPoint:[]}),this.setTextData(function(i){return i.filter(function(o){return!o.properties.isActive})})),this.editLine&&this.handleLineUnClick(this.editLine),this.setLineData(e.map(function(i){return i.properties=x(x({},i.properties),{},{isDrag:!1,isActive:!1,isHover:!1}),i}))}},{key:"enablePointRenderAction",value:function(){var e;S(R(r.prototype),"enablePointRenderAction",this).call(this),this.options.editable&&((e=this.pointRender)===null||e===void 0||e.enableContextMenu())}},{key:"disablePointRenderAction",value:function(){var e;S(R(r.prototype),"disablePointRenderAction",this).call(this),(e=this.pointRender)===null||e===void 0||e.disableContextMenu()}},{key:"bindEnableEvent",value:function(){S(R(r.prototype),"bindEnableEvent",this).call(this),this.enableSceneRenderAction(),this.enablePointRenderAction(),this.enableLineRenderAction(),this.enableMidPointRenderAction(),this.sceneRender.enableDblClick()}},{key:"unbindEnableEvent",value:function(){S(R(r.prototype),"unbindEnableEvent",this).call(this),this.disableSceneRenderAction(),this.disablePointRenderAction(),this.disableLineRenderAction(),this.disableMidPointRenderAction(),this.sceneRender.disableDblClick()}},{key:"bindThis",value:function(){S(R(r.prototype),"bindThis",this).call(this),this.bindPointRenderEvent=this.bindPointRenderEvent.bind(this),this.bindSceneEvent=this.bindSceneEvent.bind(this),this.bindLineRenderEvent=this.bindLineRenderEvent.bind(this),this.bindMidPointRenderEvent=this.bindMidPointRenderEvent.bind(this)}}]),r}(Ci),Hi=function(t){ft(r,t);var n=pt(r);function r(e,i){var o;return rt(this,r),(o=n.call(this,e,i)).bindPointRenderEvent(),o}return it(r,[{key:"dragItem",get:function(){return this.dragPoint}},{key:"editItem",get:function(){return this.editPoint}},{key:"getDefaultOptions",value:function(e){var i=x(x({},this.getCommonOptions(e)),{},{helper:Tt(Vc),initialData:e.initialData});return i.style.point=ka,i}},{key:"bindEnableEvent",value:function(){S(R(r.prototype),"bindEnableEvent",this).call(this),this.enablePointRenderAction()}},{key:"unbindEnableEvent",value:function(){S(R(r.prototype),"unbindEnableEvent",this).call(this),this.disablePointRenderAction()}},{key:"getRenderTypes",value:function(){return["point"]}},{key:"getMainLayer",value:function(){var e,i;return(e=(i=this.render.point)===null||i===void 0?void 0:i.getLayers())!==null&&e!==void 0?e:[]}},{key:"setData",value:function(e){this.setPointData(e.map(function(i){var o;return i.properties=x(x({},Pi()),(o=i.properties)!==null&&o!==void 0?o:{}),i}))}},{key:"getData",value:function(){return this.getPointData()}},{key:"onPointCreate",value:function(e){if(this.addable){var i=S(R(r.prototype),"onPointCreate",this).call(this,e);if(i)return this.options.editable&&this.setHelper("pointHover"),this.emit(h.DrawEvent.Add,i,this.getData()),i}else this.setPointData(function(o){return o.map(function(a){return a.properties=x(x({},a.properties),{},{isHover:!1,isActive:!1}),a})})}},{key:"onPointMouseMove",value:function(e){var i=S(R(r.prototype),"onPointMouseMove",this).call(this,e);return this.options.editable&&!this.dragPoint&&this.setHelper("pointHover"),i}},{key:"onPointMouseOut",value:function(e){var i=S(R(r.prototype),"onPointMouseOut",this).call(this,e);return this.setHelper(this.addable?"draw":null),i}},{key:"onPointDragStart",value:function(e){var i=S(R(r.prototype),"onPointDragStart",this).call(this,e);return this.setHelper("pointDrag"),this.emit(h.DrawEvent.DragStart,i,this.getData()),i}},{key:"onPointDragging",value:function(e){var i=S(R(r.prototype),"onPointDragging",this).call(this,e);return i&&this.options.editable&&this.emit(h.DrawEvent.Dragging,i,this.getData()),i}},{key:"onPointDragEnd",value:function(e){var i=S(R(r.prototype),"onPointDragEnd",this).call(this,e);return i&&this.options.editable&&(this.setHelper("pointHover"),this.emit(h.DrawEvent.DragEnd,i,this.getData()),this.emit(h.DrawEvent.Edit,i,this.getData())),i}},{key:"bindThis",value:function(){S(R(r.prototype),"bindThis",this).call(this),this.bindPointRenderEvent=this.bindPointRenderEvent.bind(this)}},{key:"onSceneMouseMove",value:function(e){}},{key:"setActiveFeature",value:function(e){var i=this.getTargetFeature(e);this.setPointData(function(o){return o.map(function(a){return a.properties.isActive=nt(i,a),a})})}},{key:"resetFeatures",value:function(){this.setPointData(function(e){return e.map(function(i){return i.properties=x(x({},i.properties),{},{isDrag:!1,isActive:!1,isHover:!1}),i})})}}]),r}(Oi),Fi=function(t){ft(r,t);var n=pt(r);function r(e,i){var o;return rt(this,r),(o=n.call(this,e,i)).drawPolygonFinish=function(){var a,s=o.drawPolygon,u=(a=s==null?void 0:s.properties.nodes)!==null&&a!==void 0?a:[];if(s&&u.length>=3){s.properties.isDraw=!1,o.syncPolygonNodes(s,u),o.setActivePolygon(s);var l=o.options,c=l.autoActive,f=l.editable;c&&f||o.handlePolygonUnClick(s),o.setHelper(f?c?"pointHover":"polygonHover":o.addable?"draw":null),o.emit(h.DrawEvent.Add,s,o.getPolygonData())}},o.sceneRender.on(h.RenderEvent.DblClick,o.drawPolygonFinish),o.bindPointRenderEvent(),o.bindSceneEvent(),o.bindMidPointRenderEvent(),o.bindLineRenderEvent(),o.bindPolygonRenderEvent(),o}return it(r,[{key:"getDefaultOptions",value:function(e){return x(x({},S(R(r.prototype),"getDefaultOptions",this).call(this,e)),{},{liveUpdate:!1})}},{key:"setData",value:function(e){var i=e.map(function(o){var a,s;if(o.properties=x(x({},Fn()),(a=o.properties)!==null&&a!==void 0?a:{}),!(!((s=o.properties.nodes)===null||s===void 0)&&s.length)){var u=Ut(o);u=u.slice(0,u.length-1),o.properties.nodes=u.map(function(c){return Bt(c)})}if(!o.properties.line){var l=o.properties.nodes;o.properties.line=Bn([].concat(ht(l),[Bt(we(l).geometry.coordinates)]))}return o});this.source.setData({point:[],midPoint:[],dashLine:[],polygon:i,line:i.map(function(o){return o.properties.line})}),this.setTextData(this.getAllTexts()),this.editPolygon&&this.setActivePolygon(this.editPolygon)}},{key:"onPointCreate",value:function(e){if(this.addable&&!this.dragPoint){var i=S(R(r.prototype),"onPointCreate",this).call(this,e),o=this.drawPolygon,a=this.drawLine;return i&&(o?(this.syncPolygonNodes(o,[].concat(ht(o.properties.nodes),[i])),this.setDashLineData([Nn([Zt(e),o.properties.nodes[0].geometry.coordinates])]),o.properties.nodes.length>1&&this.setHelper("drawFinish")):a&&(this.handleCreatePolygon([i],a),this.setHelper("drawContinue")),this.emit(h.DrawEvent.AddNode,i,o,this.getPolygonData())),i}}},{key:"onPointClick",value:function(e){var i=this,o=this.drawPolygon,a=e.feature;if(o){var s=o.properties.nodes;if(s.length<3||!nt(we(s),a)&&!nt(ke(s),a)){var u=wt(a.geometry.coordinates,2);e.lngLat={lng:u[0],lat:u[1]},this.onPointCreate(e)}else requestAnimationFrame(function(){i.drawPolygonFinish()})}}},{key:"onPointDragging",value:function(e){var i=this.dragPoint,o=this.editPolygon;if(i&&o){var a=o.properties.line;a.properties.nodes=a.properties.nodes.map(function(b){return nt(b,i)?i:b});var s=a.properties.nodes,u=s.slice(0,s.length-1),l=we(s),c=ke(s),f=nt(l,i)||nt(c,i);if(f&&(l.geometry.coordinates=c.geometry.coordinates=Zt(e)),this.options.adsorbOptions&&f){var p=this.resetAdsorbLngLat(e);p&&(l.geometry.coordinates=c.geometry.coordinates=p)}S(R(r.prototype),"onPointDragging",this).call(this,e),this.syncPolygonNodes(o,u),this.setActivePolygon(o)}return i}},{key:"onLineDragging",value:function(e){var i=this.dragPolygon,o=S(R(r.prototype),"onLineDragging",this).call(this,e);if(o&&i){var a=o.properties.nodes;this.syncPolygonNodes(i,a.slice(0,a.length-1)),this.emit(h.DrawEvent.Dragging,i,this.getPolygonData())}return o}},{key:"onMidPointClick",value:function(e){var i=S(R(r.prototype),"onMidPointClick",this).call(this,e),o=this.editPolygon;return i&&o&&(this.emit(h.DrawEvent.Edit,o,this.getPolygonData()),this.emit(h.DrawEvent.AddNode,i,o,this.getPolygonData())),i}},{key:"onSceneMouseMove",value:function(e){var i,o=this.drawPolygon,a=(i=o==null?void 0:o.properties.nodes)!==null&&i!==void 0?i:[];if(o&&a.length){this.options.adsorbOptions&&this.resetAdsorbLngLat(e);var s=Zt(e),u=[];if(u.push(Nn([s,we(a).geometry.coordinates])),a.length>1&&u.push(Nn([s,ke(a).geometry.coordinates])),this.options.liveUpdate&&a.length>=2){var l=Ut(Q(a));o.geometry.coordinates=[[].concat(ht(l),[s,l[0]])],this.setPolygonData(this.getPolygonData())}this.setDashLineData(u),this.setTextData(this.getAllTexts())}}},{key:"removeNode",value:function(e,i){var o,a=this.getTargetFeature(i),s=this.getTargetFeature(e,(o=a==null?void 0:a.properties.nodes)!==null&&o!==void 0?o:[]);if(a&&s){var u,l=(u=a==null?void 0:a.properties.nodes)!==null&&u!==void 0?u:[];if(4>l.length)return;this.syncPolygonNodes(a,l.filter(function(c){return!nt(s,c)})),this.emit(h.DrawEvent.RemoveNode,s,a,this.getLineData()),this.emit(h.DrawEvent.Edit,a,this.getPolygonData())}}},{key:"onPointContextMenu",value:function(e){var i,o=this.editPolygon,a=e.feature,s=(i=o==null?void 0:o.properties.nodes)!==null&&i!==void 0?i:[];if(o&&s.length>=4)return s.find(function(u){return nt(u,a)})||(a=s[0]),this.removeNode(a,o),a}},{key:"bindPointRenderEvent",value:function(){var e;S(R(r.prototype),"bindPointRenderEvent",this).call(this),(e=this.pointRender)===null||e===void 0||e.on(h.RenderEvent.Contextmenu,this.onPointContextMenu.bind(this))}},{key:"enablePointRenderAction",value:function(){var e;S(R(r.prototype),"enablePointRenderAction",this).call(this),this.options.editable&&((e=this.pointRender)===null||e===void 0||e.enableContextMenu())}},{key:"disablePointRenderAction",value:function(){var e;S(R(r.prototype),"disablePointRenderAction",this).call(this),(e=this.pointRender)===null||e===void 0||e.disableContextMenu()}}]),r}(Ri),Bi=function(t){ft(r,t);var n=pt(r);function r(e,i){var o;return rt(this,r),(o=n.call(this,e,i)).bindPointRenderEvent(),o.bindSceneEvent(),o.bindMidPointRenderEvent(),o.bindLineRenderEvent(),o.bindPolygonRenderEvent(),o}return it(r,[{key:"getDefaultOptions",value:function(e){var i=S(R(r.prototype),"getDefaultOptions",this).call(this,e);return i.helper&&(i.helper=x(x({},i.helper),$c)),i}},{key:"setData",value:function(e){var i=this,o=e.map(function(a){var s,u,l;a.properties=x(x({},Fn()),(s=a.properties)!==null&&s!==void 0?s:{});var c=a.properties.nodes;if(((u=c)===null||u===void 0?void 0:u.length)!==2){var f=wt(Ce(a),4),p=f[2],b=f[3];c=[Bt([f[0],f[1]]),Bt([p,b])],a.properties.nodes=c}var D=wt(c,2),m=D[0],y=D[1],v=!!(!((l=a.properties)===null||l===void 0)&&l.isActive),g=a.properties.line;return g||(g=i.handleCreatePolygonLine(m,y,{isActive:v}),a.properties.line=g),i.handleCreatePolygon([m,y],g,x(x({},a.properties),{},{isActive:v}))});this.source.setData({point:[],midPoint:[],dashLine:[],polygon:o,line:o.map(function(a){return a.properties.line})}),this.setTextData(this.getAllTexts()),this.editPolygon&&this.setActivePolygon(this.editPolygon)}},{key:"handleCreatePolygonLine",value:function(e,i){var o=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},a=Ut(Jo(Q([e,i]))).map(function(s,u){return u===0?e:u===2?i:Bt(s)});return Bn(a,o)}},{key:"syncPolygonNodes",value:function(e,i){var o=e.properties.line,a=Ut(Jo(Q(i)));e.properties.nodes=i,e.geometry.coordinates=[a],this.setPolygonData(function(l){return l.map(function(c){return nt(c,e)?e:c})}),this.setPointData(e.properties.isDraw?[i[0]]:i);var s=o.properties.nodes,u=a.filter(function(l){return!hn(l,i[0].geometry.coordinates)&&!hn(l,i[1].geometry.coordinates)});return s.forEach(function(l,c){var f=[0,0];switch(c){case 0:f=i[0].geometry.coordinates;break;case 1:f=u[0];break;case 2:f=i[1].geometry.coordinates;break;case 3:f=u[1];break;case 4:f=Tt(i[0].geometry.coordinates)}l.geometry.coordinates=f}),o.geometry.coordinates=a,e}},{key:"onLineDragging",value:function(e){var i=S(R(r.prototype),"onLineDragging",this).call(this,e),o=this.dragPolygon;if(i&&o){var a=o.properties.line.properties.nodes;this.syncPolygonNodes(o,[a[0],a[2]]),this.setActivePolygon(o,{isDrag:!0}),this.emit(h.DrawEvent.Dragging,o,this.getPolygonData())}return i}}]),r}(Si),_s=function(t,n){for(var r=t;r&&!Array.from(r.classList).includes(n);)r=r.parentElement;return r},Jc={point:"#l7draw-point",line:"#l7draw-line",polygon:"#l7draw-polygon",rect:"#l7draw-rect",circle:"#l7draw-circle",clear:"#l7draw-qingkong"},Qc={point:Hi,line:ji,polygon:Fi,rect:Bi,circle:Ti},Os="data-draw-type",Cs="l7-draw-control",Ni="".concat(Cs,"__btn"),Rs="".concat(Ni,"--active");(function(t){var n,r,e,i,o,a='<svg><symbol id="l7draw-qingkong" viewBox="0 0 1024 1024"><path d="M778.96777344 334.02148437h-148.31542969V284.58300781A71.78466797 71.78466797 0 0 0 556.49462891 215.36914062H467.50537109a71.78466797 71.78466797 0 0 0-74.15771484 69.11499024V334.02148437h-148.31542969a29.66308594 29.66308594 0 1 0 0 59.32617188h29.66308594v326.29394531A88.98925781 88.98925781 0 0 0 363.68457031 808.63085938h296.63085938a88.98925781 88.98925781 0 0 0 88.98925781-88.98925782V393.34765625h29.66308594a29.66308594 29.66308594 0 0 0 0-59.32617188zM452.67382812 284.58300781c0-4.74609375 6.22924805-9.78881836 14.83154297-9.78881836h88.98925782c8.60229492 0 14.83154297 5.04272461 14.83154296 9.78881836V334.02148437H452.67382812V284.53356934z m237.30468751 435.10803223a29.66308594 29.66308594 0 0 1-29.66308594 29.66308593H363.68457031a29.66308594 29.66308594 0 0 1-29.66308593-29.66308594V393.34765625h355.95703124v326.29394531z"  ></path><path d="M437.84228516 660.31542969c6.57531739 0 12.85400391-3.46069336 17.5012207-9.64050294A39.20471192 39.20471192 0 0 0 462.56152344 627.33996582V495.5369873a39.20471192 39.20471192 0 0 0-7.21801758-23.33496093A22.09899903 22.09899903 0 0 0 437.84228516 462.56152344c-6.57531739 0-12.85400391 3.46069336-17.50122071 9.64050293A39.20471192 39.20471192 0 0 0 413.12304687 495.5369873v131.80297853c0 8.75061036 2.62023926 17.15515137 7.21801758 23.33496092 4.6472168 6.17980958 10.92590333 9.64050293 17.50122071 9.64050294zM586.15771484 660.31542969c6.57531739 0 12.85400391-3.46069336 17.50122071-9.64050294a39.20471192 39.20471192 0 0 0 7.21801758-23.33496093V495.5369873a39.20471192 39.20471192 0 0 0-7.21801758-23.33496093A22.09899903 22.09899903 0 0 0 586.15771484 462.56152344c-6.57531739 0-12.85400391 3.46069336-17.5012207 9.64050293A39.20471192 39.20471192 0 0 0 561.43847656 495.5369873v131.80297853c0 8.75061036 2.62023926 17.15515137 7.21801758 23.33496092 4.6472168 6.17980958 10.92590333 9.64050293 17.5012207 9.64050294z"  ></path></symbol><symbol id="l7draw-rect" viewBox="0 0 1024 1024"><path d="M736.14 648.79V330c0-23.16-18.84-42-42-42H375.49c-11.07-19.13-31.74-32.01-55.43-32.01-35.35 0-64.01 28.66-64.01 64.01 0 23.69 12.88 44.36 32.01 55.43v318.8c0 23.16 18.84 42 42 42H648.7c11.07 19.13 31.74 32.01 55.43 32.01 35.35 0 64.01-28.66 64.01-64.01 0.01-23.7-12.87-44.37-32-55.44zM352.06 375.43A64.281 64.281 0 0 0 375.49 352h296.64v296.8a64.357 64.357 0 0 0-23.43 23.43H352.06v-296.8z"  ></path></symbol><symbol id="l7draw-circle" viewBox="0 0 1024 1024"><path d="M467.013228 557.765038a64.01 64.01 0 1 0 90.52223-90.52539 64.01 64.01 0 1 0-90.52223 90.52539Z"  ></path><path d="M832.16 512.22c0-26.06-15.58-48.46-37.93-58.45-11.21-54.67-38.11-104.92-78.48-145.3-54.42-54.42-126.78-84.4-203.75-84.4s-149.33 29.97-203.75 84.4c-54.42 54.42-84.4 126.79-84.4 203.75s29.97 149.33 84.4 203.75c54.42 54.42 126.78 84.4 203.75 84.4s149.33-29.97 203.75-84.4c40.37-40.37 67.28-90.62 78.48-145.3 22.35-9.98 37.93-32.39 37.93-58.45zM670.5 670.72c-42.34 42.34-98.62 65.65-158.5 65.65-59.87 0-116.16-23.32-158.5-65.65-42.34-42.34-65.65-98.62-65.65-158.5s23.32-116.16 65.65-158.5c42.34-42.34 98.62-65.65 158.5-65.65 59.87 0 116.16 23.32 158.5 65.65 29.9 29.9 50.3 66.77 59.71 106.95-15.81 11.66-26.07 30.4-26.07 51.55s10.26 39.9 26.07 51.55c-9.41 40.18-29.81 77.05-59.71 106.95z"  ></path></symbol><symbol id="l7draw-polygon" viewBox="0 0 1024 1024"><path d="M705.97 640.31c-5.79 0-11.39 0.78-16.72 2.22L381.94 336.66a64.079 64.079 0 0 0 2.14-16.43c0-35.35-28.66-64.01-64.01-64.01s-64.01 28.66-64.01 64.01c0 23.69 12.88 44.36 32.01 55.43V648.8c-19.13 11.07-32.01 31.74-32.01 55.43 0 35.35 28.66 64.01 64.01 64.01 23.69 0 44.35-12.87 55.42-32l275.05 0.07c11.07 19.14 31.74 32.03 55.44 32.03 35.35 0 64.01-28.66 64.01-64.01s-28.66-64.02-64.02-64.02z m-353.91 8.48V397.22L628.44 672.3l-252.94-0.07a64.411 64.411 0 0 0-23.44-23.44z"  ></path></symbol><symbol id="l7draw-line" viewBox="0 0 1024 1024"><path d="M832.16 449.21c0-35.35-28.66-64.01-64.01-64.01-29.2 0-53.81 19.56-61.5 46.28l-390.9 96.82 72.18-144.18c33.56-1.99 60.17-29.83 60.17-63.89 0-35.35-28.66-64.01-64.01-64.01s-64.01 28.66-64.01 64.01c0 13.04 3.91 25.17 10.61 35.28l-78.42 156.65c-33.58 1.97-60.21 29.81-60.21 63.89 0 35.35 28.66 64.01 64.01 64.01 29.2 0 53.81-19.56 61.5-46.28l390.8-96.79-71.97 143.34c-33.62 1.93-60.28 29.8-60.28 63.9 0 35.35 28.66 64.01 64.01 64.01s64.01-28.66 64.01-64.01c0-13-3.89-25.09-10.54-35.18l78.28-155.93c33.61-1.95 60.28-29.81 60.28-63.91z"  ></path></symbol><symbol id="l7draw-point" viewBox="0 0 1024 1024"><path d="M331.46 330.08m-64.01 0a64.01 64.01 0 1 0 128.02 0 64.01 64.01 0 1 0-128.02 0Z"  ></path><path d="M384.12 735.84m-64.01 0a64.01 64.01 0 1 0 128.02 0 64.01 64.01 0 1 0-128.02 0Z"  ></path><path d="M769.11 512.7m-64.01 0a64.01 64.01 0 1 0 128.02 0 64.01 64.01 0 1 0-128.02 0Z"  ></path></symbol></svg>',s=(s=document.getElementsByTagName("script"))[s.length-1].getAttribute("data-injectcss");if(s&&!t.__iconfont__svg__cssinject__){t.__iconfont__svg__cssinject__=!0;try{document.write("<style>.svgfont {display: inline-block;width: 1em;height: 1em;fill: currentColor;vertical-align: -0.1em;font-size:16px;}</style>")}catch(l){console&&console.log(l)}}function u(){o||(o=!0,e())}n=function(){var l,c=document.createElement("div");c.innerHTML=a,a=null,(c=c.getElementsByTagName("svg")[0])&&(c.setAttribute("aria-hidden","true"),c.style.position="absolute",c.style.width=0,c.style.height=0,c.style.overflow="hidden",(l=document.body).firstChild?function(f,p){p.parentNode.insertBefore(f,p)}(c,l.firstChild):l.appendChild(c))},document.addEventListener?~["complete","loaded","interactive"].indexOf(document.readyState)?setTimeout(n,0):(r=function(){document.removeEventListener("DOMContentLoaded",r,!1),n()},document.addEventListener("DOMContentLoaded",r,!1)):document.attachEvent&&(e=n,i=t.document,o=!1,function l(){try{i.documentElement.doScroll("left")}catch(c){return void setTimeout(l,50)}u()}(),i.onreadystatechange=function(){i.readyState=="complete"&&(i.onreadystatechange=null,u())})})(window),_i(".l7-draw-control{display:flex;overflow:hidden;background:#fff;border-radius:2px}.l7-draw-control__btn{display:inline-flex;align-items:center;justify-content:center;width:30px;height:30px;padding:0;text-align:center;background:transparent;border-width:0;border-right:1px solid #e0e0e0;outline:0;cursor:pointer}.l7-draw-control__btn:hover{background-color:#e5e5e5}.l7-draw-control__btn:last-child{border-bottom:0}.l7-draw-control__btn .l7-draw-icon{width:26px;height:26px;overflow:hidden;fill:currentColor}.l7-draw-control__btn--active svg{color:#0370fe}");var th=function(t){ft(r,t);var n=pt(r);function r(e){var i,o=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return rt(this,r),(i=n.call(this,o)).controlOption=void 0,i.sceneInstance=void 0,i.drawMap={},i.btnMap={},i.activeType=null,i.emitDataChange=be(function(){i.emit(h.ControlEvent.DataChange,i.getDrawData())},16),i.sceneInstance=e,i.controlOption=x(x({},i.getDefault()),o||{}),i.onBtnClick=i.onBtnClick.bind(En(i)),i}return it(r,[{key:"getActiveType",value:function(){return this.activeType}},{key:"getDefault",value:function(){return x(x({},S(R(r.prototype),"getDefault",this).call(this)),{},{className:"",buttonClassName:"",activeButtonClassName:"",style:"",position:"topleft",commonDrawOptions:{},drawConfig:{point:!0,line:!0,polygon:!0,rect:!0,circle:!0,clear:!0}})}},{key:"addTo",value:function(e){return S(R(r.prototype),"addTo",this).call(this,e),this.init(),this}},{key:"onAdd",value:function(){var e=this.controlOption,i=e.className,o=e.style,a=st.DOM.create("div","".concat(Cs," ").concat(i));return o&&a.setAttribute("style",o),a}},{key:"onRemove",value:function(){Object.values(this.drawMap).forEach(function(e){e.clear(!0)})}},{key:"init",value:function(){var e,i=this,o=[];Object.entries(this.controlOption.drawConfig).forEach(function(a){var s=wt(a,2),u=s[0],l=s[1];if(l){var c=i.initBtn(u);c.addEventListener("click",i.onBtnClick),o.push(c),i.btnMap[u]=c;var f=Qc[u];if(f&&i.sceneInstance){var p=new f(i.sceneInstance,x(x({},i.controlOption.commonDrawOptions),typeof l=="boolean"?{}:l));p.on(h.DrawEvent.Change,i.emitDataChange),i.drawMap[u]=p}}}),(e=this.container).append.apply(e,o),this.controlOption.defaultActiveType&&this.onDrawClick(this.controlOption.defaultActiveType)}},{key:"getDrawData",value:function(){return bi(ys(this.drawMap).map(function(e){var i=wt(e,2);return[i[0],i[1].getData()]}))}},{key:"getTypeDraw",value:function(e){var i;return(i=this.drawMap[e])!==null&&i!==void 0?i:null}},{key:"onBtnClick",value:function(e){var i=_s(e.target,Ni);if(i){var o=i.getAttribute(Os);o==="clear"?this.clearDrawData():this.onDrawClick(o)}}},{key:"setActiveType",value:function(e){var i=null,o=this.activeType;if(o){var a,s=this.btnMap[o];if(s){st.DOM.removeClass(s,Rs);var u=this.controlOption.activeButtonClassName;u&&st.DOM.removeClass(s,u)}(a=this.drawMap[o])===null||a===void 0||a.disable(),i=null}if(o!==e&&e){var l;(l=this.drawMap[e])===null||l===void 0||l.enable();var c=this.btnMap[e];c&&st.DOM.addClass(c,"".concat(Rs," ").concat(this.controlOption.activeButtonClassName)),i=e}this.activeType=i,this.emit(h.ControlEvent.DrawChange,i)}},{key:"onDrawClick",value:function(e){this.setActiveType(e)}},{key:"clearDrawData",value:function(){Object.values(this.drawMap).forEach(function(e){e==null||e.clear()})}},{key:"initBtn",value:function(e){var i=st.DOM.create("button","".concat(Ni," ").concat(this.controlOption.buttonClassName));return i.innerHTML=`<svg class="l7-draw-icon" aria-hidden="true">
      <use xlink:href="`.concat(Jc[e],`"></use>
    </svg>`),i.setAttribute(Os,e),i}}]),r}(st.Control);h.ACTIVE_COLOR=De,h.BaseMode=Ms,h.CircleDrawer=Ti,h.DEFAULT_ADSORB_CONFIG=Ao,h.DEFAULT_AREA_OPTIONS=xo,h.DEFAULT_COMMON_OPTIONS=Ee,h.DEFAULT_CURSOR_MAP=ge,h.DEFAULT_DISTANCE_OPTIONS=Po,h.DEFAULT_HISTORY_CONFIG=ko,h.DEFAULT_KEYBOARD_CONFIG=Mo,h.DEFAULT_MID_POINT_STYLE=xa,h.DEFAULT_NODE_NORMAL_STYLE=sr,h.DEFAULT_NODE_STYLE=Ma,h.DEFAULT_POINT_NORMAL_STYLE=ar,h.DEFAULT_POINT_STYLE=ka,h.DEFAULT_POPUP_CONFIG=Lo,h.DEFAULT_SOURCE_DATA=zt,h.DEFAULT_STYLE=La,h.DEFAULT_TEXT_NORMAL_STYLE=ur,h.DashLineRender=da,h.DragPolygonMode=Si,h.DrawCircle=Ti,h.DrawControl=th,h.DrawLine=ji,h.DrawPoint=Hi,h.DrawPolygon=Fi,h.DrawRect=Bi,h.LayerRender=Se,h.LineDrawer=ji,h.LineMode=Ci,h.LineRender=ya,h.MidPointMode=Ls,h.MidPointRender=ma,h.NORMAL_COLOR=je,h.PointDrawer=Hi,h.PointMode=Oi,h.PointRender=ba,h.PolygonDrawer=Fi,h.PolygonMode=Ri,h.PolygonRender=Da,h.RENDER_MAP=Pa,h.RectDrawer=Bi,h.SceneRender=Ea,h.Source=ks,h.TextRender=wa,h.calcAreaText=Mi,h.calcDistanceTextsByLine=mr,h.createDashLine=Nn,h.createLineFeature=Bn,h.createPointFeature=Bt,h.createPolygonFeature=ki,h.findMinIndex=Ai,h.getAdsorbFeature=Es,h.getAdsorbLine=Ps,h.getAdsorbPoint=ws,h.getDefaultLineProperties=xi,h.getDefaultPointProperties=Pi,h.getDefaultPolygonProperties=Fn,h.getLineCenterPoint=bs,h.getLngLat=xe,h.getMapDom=Li,h.getParentByClassName=_s,h.getPosition=Zt,h.getSingleColorStyle=function(t){return{point:{normal:{color:t},hover:{color:t},active:{color:t}},line:{normal:{color:t},hover:{color:t},active:{color:t}},polygon:{normal:{color:t},hover:{color:t},active:{color:t},style:{opacity:.2}},text:{normal:{color:t},active:{color:t}},midPoint:{normal:{color:t}},dashLine:{normal:{color:t}}}},h.getUuid=Pe,h.isDev=!1,h.isSameFeature=nt,h.resetEventLngLat=xs,h.splitByPosition=Ds,h.transLngLat2Position=br,h.updateTargetFeature=Ft,Object.defineProperty(h,"__esModule",{value:!0})})}}]);
