"use strict";(self.webpackChunkheyanai_navigation=self.webpackChunkheyanai_navigation||[]).push([[138],{89512:function(A,c,e){e.d(c,{v:function(){return T}});var E=e(48141),u=e(86738),p=e(71577),m=e(85893);function T(n){var f,i,d,g,P=(0,E.useIntl)();return(0,m.jsx)(u.Z,{title:(f=n.title)!==null&&f!==void 0?f:P.formatMessage({id:"app.remove.confirm.title",defaultMessage:"\u4F60\u786E\u5B9A\u8981\u5220\u9664\u6B64\u9879\u5417?"}),description:(i=n.title)!==null&&i!==void 0?i:P.formatMessage({id:"app.remove.confirm.description",defaultMessage:"\u5220\u9664\u6B64\u9879"}),okButtonProps:{loading:n.loading},getPopupContainer:n.getPopupContainer,onConfirm:function(){var v;return n==null||(v=n.onClick)===null||v===void 0?void 0:v.call(n)},children:!n.children&&(0,m.jsx)(p.ZP,{type:(d=n.type)!==null&&d!==void 0?d:"link",size:(g=n.size)!==null&&g!==void 0?g:"small",disabled:n.disabled,children:(0,m.jsx)(E.FormattedMessage,{id:"app.remove",defaultMessage:"\u5220\u9664"})})})}},3442:function(A,c,e){e.r(c),e.d(c,{default:function(){return z}});var E=e(97857),u=e.n(E),p=e(5574),m=e.n(p),T=e(13769),n=e.n(T),f=e(89512),i=e(59163),d=e(69851),g=e(90930),P=e(45446),O=e(48141),v=e(54689),B=e(71577),W=e(27484),y=e.n(W),x=e(76807),C=e(67294),M=e(85893),L=["createTime"],S=["current","pageSize"];function z(){var s=(0,O.useIntl)(),R=(0,C.useRef)(),Z=(0,O.useModel)("messageSocket"),I=Z.data;(0,C.useEffect)(function(){if(I){var _=JSON.parse(I);if(_.type==="Alarm"){var a;(a=R.current)===null||a===void 0||a.reload()}}},[I]);var h=(0,O.useRequest)(i.X8,{manual:!0,fetchKey:function(a){return a.alarmIds.join("-")},formatResult:function(a){return a},onSuccess:function(a){a.code===d.OK&&v.Z.success({message:s.formatMessage({id:"app.remove.success",defaultMessage:"\u5220\u9664\u6210\u529F"})})}}),N=h.run,j=h.fetches,$=[{title:s.formatMessage({id:"pages.system.warning-manage.board.fence",defaultMessage:"\u6807\u7B7E"}),dataIndex:"deviceId"},{title:s.formatMessage({id:"pages.system.warning-manage.board.content",defaultMessage:"\u5185\u5BB9"}),ellipsis:!0,dataIndex:"content"},{title:s.formatMessage({id:"pages.system.warning-manage.board.status",defaultMessage:"\u72B6\u6001"}),dataIndex:"status",valueEnum:{Unprocessed:{text:s.formatMessage({id:"pages.system.warning-manage.board.unprocessed",defaultMessage:"\u672A\u5904\u7406"}),status:"Error"},Processed:{text:s.formatMessage({id:"pages.system.warning-manage.board.processed",defaultMessage:"\u5DF2\u5904\u7406"}),status:"Success"},Ignored:{text:s.formatMessage({id:"pages.system.warning-manage.board.ignored",defaultMessage:"\u5FFD\u7565"}),status:"Default"}}},{title:s.formatMessage({id:"pages.system.warning-manage.board.type",defaultMessage:"\u7C7B\u578B"}),dataIndex:"type",valueEnum:{In:s.formatMessage({id:"pages.system.fence-manage.fence.type.in",defaultMessage:"\u8FDB\u5165"}),Out:s.formatMessage({id:"pages.system.fence-manage.fence.type.out",defaultMessage:"\u79BB\u5F00"})}},{title:s.formatMessage({id:"app.createTime",defaultMessage:"\u521B\u5EFA\u65F6\u95F4"}),dataIndex:"createTime",valueType:"dateTimeRange",render:function(a,t){return(0,d.ZN)(t.createTime)}},{title:s.formatMessage({id:"app.updateTime",defaultMessage:"\u66F4\u65B0\u65F6\u95F4"}),dataIndex:"updateTime",valueType:"dateTimeRange",search:!1,render:function(a,t){return(0,d.ZN)(t.createTime)}},{title:s.formatMessage({id:"app.action",defaultMessage:"\u64CD\u4F5C"}),valueType:"option",key:"option",render:function(a,t,l,o){var r;return(0,M.jsxs)(B.ZP.Group,{children:[(0,M.jsx)(x.t,{record:t,refresh:o==null?void 0:o.reload}),(0,M.jsx)(f.v,{disabled:!t.alarmId,onClick:function(){return N({alarmIds:[t.alarmId]}).then(function(){return o==null?void 0:o.reload()})},loading:j==null||(r=j[t.alarmId])===null||r===void 0?void 0:r.loading})]})}}];return(0,M.jsx)(g._z,{childrenContentStyle:{padding:20},children:(0,M.jsx)(P.Z,{options:{setting:!1},actionRef:R,columns:$,beforeSearchSubmit:function(a){var t,l,o=a.createTime,r=n()(a,L),D=o!=null?o:[],U=m()(D,2),b=U[0],K=U[1];return u()(u()({},r),{},{startTime:b?(t=y()(b))===null||t===void 0?void 0:t.unix():void 0,endTime:K?(l=y()(K))===null||l===void 0?void 0:l.unix():void 0})},rowKey:function(a){return a.alarmId+""},request:function(a){var t=a!=null?a:{},l=t.current,o=t.pageSize,r=n()(t,S);return(0,i.QP)(u()({current:l+"",size:o+""},r)).then(function(D){return(0,d.LF)(D)})}})})}}}]);
