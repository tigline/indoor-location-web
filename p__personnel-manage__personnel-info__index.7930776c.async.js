"use strict";(self.webpackChunkheyanai_navigation=self.webpackChunkheyanai_navigation||[]).push([[179],{51042:function(ne,Z,e){var z=e(1413),j=e(67294),K=e(42110),o=e(98615),$=function(C,p){return j.createElement(o.Z,(0,z.Z)((0,z.Z)({},C),{},{ref:p,icon:K.Z}))};$.displayName="PlusOutlined",Z.Z=j.forwardRef($)},89512:function(ne,Z,e){e.d(Z,{v:function(){return $}});var z=e(35312),j=e(86738),K=e(71577),o=e(85893);function $(r){var C,p,c,_,W=(0,z.useIntl)();return(0,o.jsx)(j.Z,{title:(C=r.title)!==null&&C!==void 0?C:W.formatMessage({id:"app.remove.confirm.title",defaultMessage:"\u4F60\u786E\u5B9A\u8981\u5220\u9664\u6B64\u9879\u5417?"}),description:(p=r.title)!==null&&p!==void 0?p:W.formatMessage({id:"app.remove.confirm.description",defaultMessage:"\u5220\u9664\u6B64\u9879"}),okButtonProps:{loading:r.loading},getPopupContainer:r.getPopupContainer,onConfirm:function(){var w;return r==null||(w=r.onClick)===null||w===void 0?void 0:w.call(r)},children:!r.children&&(0,o.jsx)(K.ZP,{type:(c=r.type)!==null&&c!==void 0?c:"link",size:(_=r.size)!==null&&_!==void 0?_:"small",disabled:r.disabled,children:(0,o.jsx)(z.FormattedMessage,{id:"app.remove",defaultMessage:"\u5220\u9664"})})})}},75888:function(ne,Z,e){e.d(Z,{Z:function(){return H},l:function(){return w}});var z=e(15009),j=e.n(z),K=e(99289),o=e.n(K),$=e(97857),r=e.n($),C=e(84140),p=e(69851),c=e(64317),_=e(35312),W=e(85893);function H(G){var L=(0,_.useIntl)(),S=(0,_.useRequest)(C.TB,{manual:!0,formatResult:function(T){var f,R,I=(f=(R=T.data)===null||R===void 0?void 0:R.map(function(O){return{label:O.deviceId,value:O.deviceId,key:O.deviceId}}))!==null&&f!==void 0?f:[];return I}}),A=S.run;return(0,W.jsx)(c.Z,r()({label:L.formatMessage({id:"pages.personnel-manage.organization.department.person.tag",defaultMessage:"\u7ED1\u5B9A\u6807\u7B7E"}),request:function(){return A({})}},G))}function w(G){var L=(0,_.useIntl)();return(0,W.jsx)(c.Z,r()({request:function(){var S=o()(j()().mark(function A(N){var T,f,R,I,O,J;return j()().wrap(function(l){for(;;)switch(l.prev=l.next){case 0:return R=N.keyWords,I=R===void 0?"":R,l.next=3,(0,C.$h)({current:"1",size:"20",name:I});case 3:return O=l.sent,J=(T=(f=(0,p.LF)(O).data)===null||f===void 0?void 0:f.map(function(V){return{label:V.name,value:V.deviceId,key:V.deviceId}}))!==null&&T!==void 0?T:[],l.abrupt("return",J);case 6:case"end":return l.stop()}},A)}));return function(A){return S.apply(this,arguments)}}(),placeholder:L.formatMessage({id:"pages.personnel-manage.organization.department.person.tag.placeholder",defaultMessage:"\u8BF7\u9009\u62E9\u6807\u7B7E"}),rules:[{required:!0,message:L.formatMessage({id:"pages.device-manage.track.beacon.required",defaultMessage:"\u8BF7\u9009\u62E9\u6807\u7B7E"})}],fieldProps:{showSearch:!0,style:{minWidth:180}}},G))}},94037:function(ne,Z,e){e.r(Z),e.d(Z,{default:function(){return pe}});var z=e(13769),j=e.n(z),K=e(97857),o=e.n(K),$=e(89512),r=e(36255),C=e(69851),p=e(90930),c=e(45446),_=e(35312),W=e(54689),H=e(96365),w=e(90156),G=e(71577),L=e(5574),S=e.n(L),A=e(51042),N=e(37476),T=e(12029),f=e(67294),R=e(88923),I=e(1413),O=e(91),J=e(66758),Q=e(86682),l=e(85893),V=["fieldProps","request","params","proFieldProps"],te=function(i,h){var M=i.fieldProps,E=i.request,y=i.params,g=i.proFieldProps,m=(0,O.Z)(i,V),s=(0,f.useContext)(J.Z);return(0,l.jsx)(Q.Z,(0,I.Z)({valueType:"cascader",fieldProps:(0,I.Z)({getPopupContainer:s.getPopupContainer},M),ref:h,request:E,params:y,filedConfig:{customLightMode:!0},proFieldProps:g},m))},k=f.forwardRef(te),re=e(96486);function X(n){return n==null?void 0:n.map(function(i){return{label:i.name,key:i.depId,value:i.depId,parentId:i.parentId,children:X(i.children)}})}function se(n){var i=(0,_.useIntl)(),h=(0,_.useRequest)(r.sz,{manual:!0,formatResult:function(g){if(g.code===C.OK)return X(g.data)}}),M=h.run,E=h.data;return f.useEffect(function(){M()},[n.visible]),(0,l.jsx)(k,o()({label:i.formatMessage({id:"pages.personnel-manage.organization.department.parent",defaultMessage:"\u6240\u5C5E\u90E8\u95E8"}),transform:function(g){var m,s={};return(0,re.set)(s,(m=n.name)!==null&&m!==void 0?m:"depId",(0,re.last)(g)),s},fieldProps:{options:E}},n))}var ee=e(75888),oe=e(70162),ae=e(5966),ue=e(22270),q=e(78045),u=e(90789),t=["fieldProps","options","radioType","layout","proFieldProps","valueEnum"],d=f.forwardRef(function(n,i){var h=n.fieldProps,M=n.options,E=n.radioType,y=n.layout,g=n.proFieldProps,m=n.valueEnum,s=(0,O.Z)(n,t);return(0,l.jsx)(Q.Z,(0,I.Z)((0,I.Z)({valueType:E==="button"?"radioButton":"radio",ref:i,valueEnum:(0,ue.h)(m,void 0)},s),{},{fieldProps:(0,I.Z)({options:M,layout:y},h),proFieldProps:g,filedConfig:{customLightMode:!0}}))}),v=f.forwardRef(function(n,i){var h=n.fieldProps,M=n.children;return(0,l.jsx)(q.ZP,(0,I.Z)((0,I.Z)({},h),{},{ref:i,children:M}))}),a=(0,u.G)(v,{valuePropName:"checked",ignoreWidth:!0}),B=a;B.Group=d,B.Button=q.ZP.Button,B.displayName="ProFormComponent";var x=B;function U(n){var i,h,M,E,y,g,m,s=(0,_.useIntl)(),P=n.record?[{uid:Date.now()+"",response:(i=n.record)===null||i===void 0?void 0:i.avatar,thumbUrl:(h=n.record)===null||h===void 0?void 0:h.avatar}]:void 0;return(0,l.jsxs)(f.Fragment,{children:[(0,l.jsx)(ae.Z,{name:"name",initialValue:(M=n.record)===null||M===void 0?void 0:M.name,label:s.formatMessage({id:"pages.personnel-manage.organization.department.person.name",defaultMessage:"\u59D3\u540D"}),rules:[{required:!0,message:s.formatMessage({id:"pages.personnel-manage.organization.department.person.name.required.failure",defaultMessage:"\u59D3\u540D\u5FC5\u586B"})}]}),(0,l.jsx)(x.Group,{name:"sex",initialValue:(E=n.record)===null||E===void 0?void 0:E.sex,label:s.formatMessage({id:"pages.personnel-manage.organization.department.person.gender",defaultMessage:"\u6027\u522B"}),valueEnum:{Male:s.formatMessage({id:"pages.personnel-manage.organization.department.person.gender.male",defaultMessage:"\u7537"}),Female:s.formatMessage({id:"pages.personnel-manage.organization.department.person.gender.female",defaultMessage:"\u5973"})}}),(0,l.jsx)(ee.Z,{name:"tag",initialValue:(y=n.record)===null||y===void 0?void 0:y.tag,label:s.formatMessage({id:"pages.personnel-manage.organization.department.person.tag",defaultMessage:"\u7ED1\u5B9A\u6807\u7B7E"})}),(0,l.jsx)(oe.Q,{name:"typeId",initialValue:(g=n.record)===null||g===void 0?void 0:g.typeId,label:s.formatMessage({id:"pages.personnel-manage.organization.department.person.type",defaultMessage:"\u4EBA\u5458\u7C7B\u578B"}),rules:[{required:!0,message:s.formatMessage({id:"pages.personnel-manage.organization.department.person.type.required.failure",defaultMessage:"\u8BF7\u9009\u62E9\u4EBA\u5458\u7C7B\u578B"})}]}),(0,l.jsx)(se,{name:"depId",visible:n.visible,initialValue:(m=n.record)===null||m===void 0?void 0:m.depId,label:s.formatMessage({id:"pages.personnel-manage.organization.department.parent",defaultMessage:"\u6240\u5C5E\u90E8\u95E8"}),rules:[{required:!0,message:s.formatMessage({id:"pages.personnel-manage.organization.department.parent.required.failure",defaultMessage:"\u8BF7\u9009\u62E9\u6240\u5C5E\u90E8\u95E8"})}]}),(0,l.jsx)(R.h,{name:"avatar",initialValue:P,label:s.formatMessage({id:"pages.personnel-manage.organization.department.person.icon",defaultMessage:"\u5934\u50CF"}),rules:[{message:s.formatMessage({id:"pages.personnel-manage.organization.department.person.icon.required.failure",defaultMessage:"\u8BF7\u9009\u62E9\u5934\u50CF"})}]})]})}function ie(n){var i=(0,_.useIntl)(),h=T.Z.useForm(),M=S()(h,1),E=M[0],y=f.useState(),g=S()(y,2),m=g[0],s=g[1],P=(0,_.useRequest)(r.Mq,{manual:!0,onSuccess:function(D){if(D){var F;(F=n.refresh)===null||F===void 0||F.call(n),W.Z.success({message:i.formatMessage({id:"app.add.success",defaultMessage:"\u65B0\u5EFA\u6210\u529F"})})}}}),Y=P.run;return f.useEffect(function(){m||E.resetFields()},[m]),(0,l.jsx)(N.Y,{title:i.formatMessage({id:"pages.personnel-manage.organization.department.person.info.add",defaultMessage:"\u6DFB\u52A0\u4EBA\u5458"}),layout:"horizontal",form:E,labelCol:{xs:6},wrapperCol:{xs:16},modalProps:{destroyOnClose:!0,onCancel:function(){return console.log("run")}},trigger:(0,l.jsx)(G.ZP,{type:"primary",icon:(0,l.jsx)(A.Z,{}),children:i.formatMessage({id:"app.action.add",defaultMessage:"\u65B0\u5EFA"})}),onFinish:function(D){return Y(D)},children:(0,l.jsx)(U,{visible:m})})}function de(n){var i=(0,_.useIntl)(),h=T.Z.useForm(),M=S()(h,1),E=M[0],y=f.useState(),g=S()(y,2),m=g[0],s=g[1],P=(0,_.useRequest)(r.Ge,{manual:!0,onSuccess:function(D){if(D){var F;(F=n.refresh)===null||F===void 0||F.call(n),W.Z.success({message:i.formatMessage({id:"app.edit.success",defaultMessage:"\u66F4\u65B0\u6210\u529F"})})}}}),Y=P.run;return f.useEffect(function(){m||E.resetFields()},[m]),(0,l.jsx)(N.Y,{title:i.formatMessage({id:"pages.personnel-manage.organization.department.person.info.edit",defaultMessage:"\u7F16\u8F91\u4EBA\u5458"}),layout:"horizontal",form:E,labelCol:{xs:6},wrapperCol:{xs:16},modalProps:{destroyOnClose:!0,onCancel:function(){return console.log("run")}},trigger:(0,l.jsx)(G.ZP,{type:"link",size:"small",children:i.formatMessage({id:"app.action.edit",defaultMessage:"\u7F16\u8F91"})}),onFinish:function(D){var F={personnelId:n.record.personnelId||0},le=D;return Y(F,le)},children:(0,l.jsx)(U,{record:n.record,visible:m})})}var me=["current","pageSize"];function pe(){var n=(0,_.useIntl)(),i=(0,_.useRequest)(r.tE,{manual:!0,formatResult:function(s){return(0,C.LF)(s)}}),h=i.run,M=(0,_.useRequest)(r.bY,{manual:!0,fetchKey:function(s){return s.personnelId+""},onSuccess:function(s){s&&W.Z.success({message:n.formatMessage({id:"app.remove.success",defaultMessage:"\u5220\u9664\u6210\u529F"})})}}),E=M.run,y=M.fetches,g=[{title:n.formatMessage({id:"pages.personnel-manage.organization.department.person.name",defaultMessage:"\u59D3\u540D"}),dataIndex:"name",formItemProps:{name:"searchValue",label:null},renderFormItem:function(s,P,Y){var b=P.type,D=P.defaultRender,F=P.fieldProps;if(b==="form")return null;var le=Y.getFieldValue("state");return le!=="open"?(0,l.jsx)(H.Z,o()(o()({},F),{},{allowClear:!0,placeholder:n.formatMessage({id:"pages.personnel-manage.organization.department.person.search.value",defaultMessage:"\u8F93\u5165\u540D\u5B57\uFF0C\u6807\u7B7E\u5730\u5740\u7B49\u7B49"})})):D(s)}},{title:n.formatMessage({id:"pages.personnel-manage.organization.department.person.gender",defaultMessage:"\u6027\u522B"}),dataIndex:"sex",search:!1},{title:n.formatMessage({id:"pages.personnel-manage.organization.department.person.tag",defaultMessage:"\u7ED1\u5B9A\u6807\u7B7E"}),dataIndex:"tag",search:!1},{title:n.formatMessage({id:"pages.personnel-manage.organization.department.person.type",defaultMessage:"\u4EBA\u5458\u7C7B\u578B"}),dataIndex:"typeName",search:!1},{title:n.formatMessage({id:"pages.personnel-manage.organization.department.parent",defaultMessage:"\u6240\u5C5E\u90E8\u95E8"}),dataIndex:"depName",search:!1},{title:n.formatMessage({id:"pages.personnel-manage.organization.department.person.icon",defaultMessage:"\u5934\u50CF"}),dataIndex:"avatar",render:function(s,P){return(0,l.jsx)(w.Z,{width:32,height:32,src:P.avatar})},search:!1},{title:n.formatMessage({id:"app.action",defaultMessage:"\u64CD\u4F5C"}),search:!1,render:function(s,P,Y,b){var D;return(0,l.jsxs)(G.ZP.Group,{children:[(0,l.jsx)(de,{record:P,refresh:b==null?void 0:b.reload}),(0,l.jsx)($.v,{disabled:!P.personnelId,loading:y==null||(D=y[P.personnelId])===null||D===void 0?void 0:D.loading,onClick:function(){return E({personnelId:P.personnelId}).then(function(){return b==null?void 0:b.reload()})}})]})}}];return(0,l.jsx)(p._z,{childrenContentStyle:{padding:20},children:(0,l.jsx)(c.Z,{columns:g,toolBarRender:function(s){return[(0,l.jsx)(ie,{refresh:s==null?void 0:s.reload},"add")]},request:function(s){var P=s.current,Y=s.pageSize,b=j()(s,me);return h(o()({current:P+"",size:Y+""},b))},options:{setting:!1}})})}},84140:function(ne,Z,e){e.d(Z,{$h:function(){return G},Ig:function(){return N},TB:function(){return ue},Um:function(){return se},WN:function(){return te},Zc:function(){return f},_s:function(){return J},aL:function(){return oe},bD:function(){return l},s_:function(){return re},uz:function(){return I},x2:function(){return S}});var z=e(13769),j=e.n(z),K=e(15009),o=e.n(K),$=e(97857),r=e.n($),C=e(99289),p=e.n(C),c=e(35312),_=["deviceId"],W=["deviceId"],H=["gateway"],w=["gateway"];function G(u,t){return L.apply(this,arguments)}function L(){return L=p()(o()().mark(function u(t,d){return o()().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.abrupt("return",(0,c.request)("/api/v1/beacon",r()({method:"GET",params:r()({current:"1",size:"10"},t)},d||{})));case 1:case"end":return a.stop()}},u)})),L.apply(this,arguments)}function S(u,t){return A.apply(this,arguments)}function A(){return A=p()(o()().mark(function u(t,d){return o()().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.abrupt("return",(0,c.request)("/api/v1/beacon",r()({method:"POST",headers:{"Content-Type":"application/json"},data:t},d||{})));case 1:case"end":return a.stop()}},u)})),A.apply(this,arguments)}function N(u,t,d){return T.apply(this,arguments)}function T(){return T=p()(o()().mark(function u(t,d,v){var a,B;return o()().wrap(function(U){for(;;)switch(U.prev=U.next){case 0:return a=t.deviceId,B=j()(t,_),U.abrupt("return",(0,c.request)("/api/v1/beacon/".concat(a),r()({method:"PUT",headers:{"Content-Type":"application/json"},params:r()({},B),data:d},v||{})));case 2:case"end":return U.stop()}},u)})),T.apply(this,arguments)}function f(u,t){return R.apply(this,arguments)}function R(){return R=p()(o()().mark(function u(t,d){var v,a;return o()().wrap(function(x){for(;;)switch(x.prev=x.next){case 0:return v=t.deviceId,a=j()(t,W),x.abrupt("return",(0,c.request)("/api/v1/beacon/".concat(v),r()({method:"DELETE",params:r()({},a)},d||{})));case 2:case"end":return x.stop()}},u)})),R.apply(this,arguments)}function I(u,t){return O.apply(this,arguments)}function O(){return O=p()(o()().mark(function u(t,d){return o()().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.abrupt("return",(0,c.request)("/api/v1/gateway",r()({method:"GET",params:r()({current:"1",size:"10"},t)},d||{})));case 1:case"end":return a.stop()}},u)})),O.apply(this,arguments)}function J(u,t){return Q.apply(this,arguments)}function Q(){return Q=p()(o()().mark(function u(t,d){return o()().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.abrupt("return",(0,c.request)("/api/v1/gateway",r()({method:"POST",headers:{"Content-Type":"application/json"},data:t},d||{})));case 1:case"end":return a.stop()}},u)})),Q.apply(this,arguments)}function l(u,t){return V.apply(this,arguments)}function V(){return V=p()(o()().mark(function u(t,d){var v,a;return o()().wrap(function(x){for(;;)switch(x.prev=x.next){case 0:return v=t.gateway,a=j()(t,H),x.abrupt("return",(0,c.request)("/api/v1/gateway/".concat(v),r()({method:"DELETE",params:r()({},a)},d||{})));case 2:case"end":return x.stop()}},u)})),V.apply(this,arguments)}function te(u,t,d){return k.apply(this,arguments)}function k(){return k=p()(o()().mark(function u(t,d,v){var a,B;return o()().wrap(function(U){for(;;)switch(U.prev=U.next){case 0:return a=t.gateway,B=j()(t,w),U.abrupt("return",(0,c.request)("/api/v1/gateway".concat(a),r()({method:"PUT",headers:{"Content-Type":"application/json"},params:r()({},B),data:d},v||{})));case 2:case"end":return U.stop()}},u)})),k.apply(this,arguments)}function re(u,t){return X.apply(this,arguments)}function X(){return X=p()(o()().mark(function u(t,d){return o()().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.abrupt("return",(0,c.request)("/api/v1/location",r()({method:"GET",params:r()({},t)},d||{})));case 1:case"end":return a.stop()}},u)})),X.apply(this,arguments)}function se(u,t){return ee.apply(this,arguments)}function ee(){return ee=p()(o()().mark(function u(t,d){return o()().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.abrupt("return",(0,c.request)("/api/v1/status/beacon",r()({method:"GET",params:r()({},t)},d||{})));case 1:case"end":return a.stop()}},u)})),ee.apply(this,arguments)}function oe(u,t){return ae.apply(this,arguments)}function ae(){return ae=p()(o()().mark(function u(t,d){return o()().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.abrupt("return",(0,c.request)("/api/v1/status/gateway",r()({method:"GET",params:r()({},t)},d||{})));case 1:case"end":return a.stop()}},u)})),ae.apply(this,arguments)}function ue(u,t){return q.apply(this,arguments)}function q(){return q=p()(o()().mark(function u(t,d){return o()().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.abrupt("return",(0,c.request)("/api/v1/unbound/beacon",r()({method:"GET",params:r()({},t)},d||{})));case 1:case"end":return a.stop()}},u)})),q.apply(this,arguments)}}}]);
