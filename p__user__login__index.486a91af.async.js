"use strict";(self.webpackChunkheyanai_navigation=self.webpackChunkheyanai_navigation||[]).push([[37],{94149:function(ue,D,e){e.d(D,{Z:function(){return U}});var i=e(1413),s=e(67294),c={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M832 464h-68V240c0-70.7-57.3-128-128-128H388c-70.7 0-128 57.3-128 128v224h-68c-17.7 0-32 14.3-32 32v384c0 17.7 14.3 32 32 32h640c17.7 0 32-14.3 32-32V496c0-17.7-14.3-32-32-32zM332 240c0-30.9 25.1-56 56-56h248c30.9 0 56 25.1 56 56v224H332V240zm460 600H232V536h560v304zM484 701v53c0 4.4 3.6 8 8 8h40c4.4 0 8-3.6 8-8v-53a48.01 48.01 0 10-56 0z"}}]},name:"lock",theme:"outlined"},I=c,P=e(98615),M=function(B,K){return s.createElement(P.Z,(0,i.Z)((0,i.Z)({},B),{},{ref:K,icon:I}))};M.displayName="LockOutlined";var U=s.forwardRef(M)},5966:function(ue,D,e){var i=e(1413),s=e(91),c=e(67294),I=e(86682),P=e(85893),M=["fieldProps","proFieldProps"],U=["fieldProps","proFieldProps"],A="text",B=function(Z){var n=Z.fieldProps,f=Z.proFieldProps,F=(0,s.Z)(Z,M);return(0,P.jsx)(I.Z,(0,i.Z)({valueType:A,fieldProps:n,filedConfig:{valueType:A},proFieldProps:f},F))},K=function(Z){var n=Z.fieldProps,f=Z.proFieldProps,F=(0,s.Z)(Z,U);return(0,P.jsx)(I.Z,(0,i.Z)({valueType:"password",fieldProps:n,proFieldProps:f,filedConfig:{valueType:A}},F))},O=B;O.Password=K,O.displayName="ProFormComponent",D.Z=O},34994:function(ue,D,e){e.d(D,{A:function(){return t}});var i=e(1413),s=e(12029),c=e(67294),I=e(78733),P=e(4942),M=e(97685),U=e(50756),A=e(46976),B=function(v,g){return c.createElement(A.Z,(0,i.Z)((0,i.Z)({},v),{},{ref:g,icon:U.Z}))},K=c.forwardRef(B),O=e(21770),X=e(48874),Z=e(17093),n=e(26713),f=e(94184),F=e.n(f),Y=e(66758),m=e(2514),Pe=e(98082),$=function(v){var g;return(0,P.Z)({},v.componentCls,{"&-title":{marginBlockEnd:v.marginXL,fontWeight:"bold"},"&-container":(0,P.Z)({flexWrap:"wrap",maxWidth:"100%"},"> div".concat(v.antCls,"-space-item"),{maxWidth:"100%"}),"&-twoLine":(g={display:"block",width:"100%"},(0,P.Z)(g,"".concat(v.componentCls,"-title"),{width:"100%",margin:"8px 0"}),(0,P.Z)(g,"".concat(v.componentCls,"-container"),{paddingInlineStart:16}),(0,P.Z)(g,"".concat(v.antCls,"-space-item,").concat(v.antCls,"-form-item"),{width:"100%"}),(0,P.Z)(g,"".concat(v.antCls,"-form-item"),{"&-control":{display:"flex",alignItems:"center",justifyContent:"flex-end","&-input":{alignItems:"center",justifyContent:"flex-end","&-content":{flex:"none"}}}}),g)})};function ye(E){return(0,Pe.Xj)("ProFormGroup",function(v){var g=(0,i.Z)((0,i.Z)({},v),{},{componentCls:".".concat(E)});return[$(g)]})}var u=e(85893),ce=c.forwardRef(function(E,v){var g=c.useContext(Y.Z),H=g.groupProps,h=(0,i.Z)((0,i.Z)({},H),E),me=h.children,re=h.collapsible,Ze=h.defaultCollapsed,Se=h.style,Me=h.labelLayout,ve=h.title,J=ve===void 0?E.label:ve,ge=h.tooltip,ae=h.align,R=ae===void 0?"start":ae,pe=h.direction,oe=h.size,fe=oe===void 0?32:oe,Fe=h.titleStyle,he=h.titleRender,N=h.spaceProps,se=h.extra,le=h.autoFocus,Ee=(0,O.Z)(function(){return Ze||!1},{value:E.collapsed,onChange:E.onCollapse}),xe=(0,M.Z)(Ee,2),ie=xe[0],a=xe[1],l=(0,c.useContext)(Z.ZP.ConfigContext),r=l.getPrefixCls,L=(0,m.zx)(E),V=L.ColWrapper,W=L.RowWrapper,y=r("pro-form-group"),z=ye(y),de=z.wrapSSR,p=z.hashId,G=re&&(0,u.jsx)(K,{style:{marginInlineEnd:8},rotate:ie?void 0:90}),k=(0,u.jsx)(X.G,{label:G?(0,u.jsxs)("div",{children:[G,J]}):J,tooltip:ge}),q=(0,c.useCallback)(function(d){var C=d.children;return(0,u.jsx)(n.Z,(0,i.Z)((0,i.Z)({},N),{},{className:F()("".concat(y,"-container ").concat(p),N==null?void 0:N.className),size:fe,align:R,direction:pe,style:(0,i.Z)({rowGap:0},N==null?void 0:N.style),children:C}))},[R,y,pe,p,fe,N]),S=he?he(k,E):k,_=(0,c.useMemo)(function(){var d=[],C=c.Children.toArray(me).map(function(o,T){var x;return c.isValidElement(o)&&o!==null&&o!==void 0&&(x=o.props)!==null&&x!==void 0&&x.hidden?(d.push(o),null):T===0&&c.isValidElement(o)&&le?c.cloneElement(o,(0,i.Z)((0,i.Z)({},o.props),{},{autoFocus:le})):o});return[(0,u.jsx)(W,{Wrapper:q,children:C},"children"),d.length>0?(0,u.jsx)("div",{style:{display:"none"},children:d}):null]},[me,W,q,le]),ee=(0,M.Z)(_,2),w=ee[0],j=ee[1];return de((0,u.jsx)(V,{children:(0,u.jsxs)("div",{className:F()(y,p,(0,P.Z)({},"".concat(y,"-twoLine"),Me==="twoLine")),style:Se,ref:v,children:[j,(J||ge||se)&&(0,u.jsx)("div",{className:"".concat(y,"-title ").concat(p),style:Fe,onClick:function(){a(!ie)},children:se?(0,u.jsxs)("div",{style:{display:"flex",width:"100%",alignItems:"center",justifyContent:"space-between"},children:[S,(0,u.jsx)("span",{onClick:function(C){return C.stopPropagation()},children:se})]}):S}),(0,u.jsx)("div",{style:{display:re&&ie?"none":void 0},children:w})]})}))});ce.displayName="ProForm-Group";var je=ce,Ce=e(4499);function t(E){return(0,u.jsx)(I.I,(0,i.Z)({layout:"vertical",submitter:{render:function(g,H){return H.reverse()}},contentRender:function(g,H){return(0,u.jsxs)(u.Fragment,{children:[g,H]})}},E))}t.Group=je,t.useForm=s.Z.useForm,t.Item=Ce.Z,t.useWatch=s.Z.useWatch,t.ErrorList=s.Z.ErrorList,t.Provider=s.Z.Provider,t.useFormInstance=s.Z.useFormInstance},15271:function(ue,D,e){e.r(D),e.d(D,{default:function(){return ie}});var i=e(15009),s=e.n(i),c=e(97857),I=e.n(c),P=e(99289),M=e.n(P),U=e(5574),A=e.n(U),B=e(99702),K=e(95629),O=e(69851),X=e(87547),Z=e(94149),n=e(1413),f=e(91),F=e(10915),Y=e(17093),m=e(94184),Pe=e.n(m),$=e(67294),ye=e(34994),u=e(4942),ce=e(98082),je=function(l){var r;return r={},(0,u.Z)(r,l.componentCls,{"&-container":{display:"flex",flex:"1",flexDirection:"column",height:"100%",paddingInline:32,paddingBlock:24,overflow:"auto",background:"inherit"},"&-top":{textAlign:"center"},"&-header":{display:"flex",alignItems:"center",justifyContent:"center",height:"44px",lineHeight:"44px",a:{textDecoration:"none"}},"&-title":{position:"relative",insetBlockStart:"2px",color:"@heading-color",fontWeight:"600",fontSize:"33px"},"&-logo":{width:"44px",height:"44px",marginInlineEnd:"16px",verticalAlign:"top",img:{width:"100%"}},"&-desc":{marginBlockStart:"12px",marginBlockEnd:"40px",color:l.colorTextSecondary,fontSize:l.fontSize},"&-main":{minWidth:"328px",maxWidth:"580px",margin:"0 auto","&-other":{marginBlockStart:"24px",lineHeight:"22px",textAlign:"start"}}}),(0,u.Z)(r,"@media (min-width: @screen-md-min)",(0,u.Z)({},"".concat(l.componentCls,"-container"),{paddingInline:0,paddingBlockStart:32,paddingBlockEnd:24,backgroundRepeat:"no-repeat",backgroundPosition:"center 110px",backgroundSize:"100%"})),r};function Ce(a){return(0,ce.Xj)("LoginForm",function(l){var r=(0,n.Z)((0,n.Z)({},l),{},{componentCls:".".concat(a)});return[je(r)]})}var t=e(85893),E=["logo","message","contentStyle","title","subTitle","actions","children"];function v(a){var l,r=a.logo,L=a.message,V=a.contentStyle,W=a.title,y=a.subTitle,z=a.actions,de=a.children,p=(0,f.Z)(a,E),G=(0,F.YB)(),k=p.submitter===!1?!1:(0,n.Z)((0,n.Z)({searchConfig:{submitText:G.getMessage("loginForm.submitText","\u767B\u5F55")}},p.submitter),{},{submitButtonProps:(0,n.Z)({size:"large",style:{width:"100%"}},(l=p.submitter)===null||l===void 0?void 0:l.submitButtonProps),render:function(o,T){var x,te=T.pop();if(typeof(p==null||(x=p.submitter)===null||x===void 0?void 0:x.render)=="function"){var Q,ne;return p==null||(Q=p.submitter)===null||Q===void 0||(ne=Q.render)===null||ne===void 0?void 0:ne.call(Q,o,T)}return te}}),q=(0,$.useContext)(Y.ZP.ConfigContext),S=q.getPrefixCls("pro-form-login"),_=Ce(S),ee=_.wrapSSR,w=_.hashId,j=function(o){return"".concat(S,"-").concat(o," ").concat(w)},d=(0,$.useMemo)(function(){return r?typeof r=="string"?(0,t.jsx)("img",{src:r}):r:null},[r]);return ee((0,t.jsxs)("div",{className:Pe()(j("container"),w),children:[(0,t.jsxs)("div",{className:"".concat(j("top")," ").concat(w),children:[W||d?(0,t.jsxs)("div",{className:"".concat(j("header")),children:[d?(0,t.jsx)("span",{className:j("logo"),children:d}):null,W?(0,t.jsx)("span",{className:j("title"),children:W}):null]}):null,y?(0,t.jsx)("div",{className:j("desc"),children:y}):null]}),(0,t.jsxs)("div",{className:j("main"),style:(0,n.Z)({width:328},V),children:[(0,t.jsxs)(ye.A,(0,n.Z)((0,n.Z)({isKeyPressSubmit:!0},p),{},{submitter:k,children:[L,de]})),z?(0,t.jsx)("div",{className:j("main-other"),children:z}):null]})]}))}var g=e(5966),H=e(22270),h=e(32808),me=e(90789),re=e(86682),Ze=["options","fieldProps","proFieldProps","valueEnum"],Se=$.forwardRef(function(a,l){var r=a.options,L=a.fieldProps,V=a.proFieldProps,W=a.valueEnum,y=(0,f.Z)(a,Ze);return(0,t.jsx)(re.Z,(0,n.Z)({ref:l,valueType:"checkbox",valueEnum:(0,H.h)(W,void 0),fieldProps:(0,n.Z)({options:r},L),lightProps:(0,n.Z)({labelFormatter:function(){return(0,t.jsx)(re.Z,(0,n.Z)({ref:l,valueType:"checkbox",mode:"read",valueEnum:(0,H.h)(W,void 0),filedConfig:{customLightMode:!0},fieldProps:(0,n.Z)({options:r},L),proFieldProps:V},y))}},y.lightProps),proFieldProps:V},y))}),Me=$.forwardRef(function(a,l){var r=a.fieldProps,L=a.children;return(0,t.jsx)(h.Z,(0,n.Z)((0,n.Z)({ref:l},r),{},{children:L}))}),ve=(0,me.G)(Me,{valuePropName:"checked"}),J=ve;J.Group=Se;var ge=J,ae=e(19922),R=e(48141),pe=e(99138),oe=e(2453),fe=e(49053),Fe=e(96486),he=e(73935),N=e(67610),se=e(39711),le=function(){var l=(0,ae.l)(function(r){var L=r.token;return{width:42,height:42,lineHeight:"42px",position:"fixed",right:16,borderRadius:L.borderRadius,":hover":{backgroundColor:L.colorBgTextHover}}});return(0,t.jsx)("div",{className:l,"data-lang":!0,children:R.SelectLang&&(0,t.jsx)(R.SelectLang,{})})},Ee=function(l){var r=l.content;return(0,t.jsx)(pe.Z,{style:{marginBottom:24},message:r,type:"error",showIcon:!0})},xe=function(){var l=(0,$.useState)({}),r=A()(l,2),L=r[0],V=r[1],W=(0,$.useState)("account"),y=A()(W,2),z=y[0],de=y[1],p=(0,R.useModel)("@@initialState"),G=p.initialState,k=p.setInitialState,q=(0,ae.l)(function(){return{display:"flex",flexDirection:"column",height:"100vh",overflow:"auto",backgroundImage:"url('https://mdn.alipayobjects.com/yuyan_qk0oxh/afts/img/V-_oS6r-i7wAAAAAAAAAAAAAFl94AQBr')",backgroundSize:"100% 100%"}}),S=(0,R.useIntl)(),_=function(){var j=M()(s()().mark(function d(){var C,o;return s()().wrap(function(x){for(;;)switch(x.prev=x.next){case 0:return x.next=2,G==null||(C=G.fetchUserInfo)===null||C===void 0?void 0:C.call(G);case 2:o=x.sent,o&&(0,he.flushSync)(function(){k(function(te){return I()(I()({},te),{},{currentUser:o})})});case 4:case"end":return x.stop()}},d)}));return function(){return j.apply(this,arguments)}}(),ee=function(){var j=M()(s()().mark(function d(C){var o,T,x,te,Q,ne;return s()().wrap(function(b){for(;;)switch(b.prev=b.next){case 0:return b.prev=0,b.next=3,(0,K.x4)(I()({},C));case 3:if(o=b.sent,o.code!==O.OK){b.next=13;break}return te=S.formatMessage({id:"pages.login.success",defaultMessage:"\u767B\u5F55\u6210\u529F\uFF01"}),oe.ZP.success(te),localStorage.setItem("token",(T=(x=o.data)===null||x===void 0?void 0:x.accessToken)!==null&&T!==void 0?T:""),b.next=10,_();case 10:return Q=new URL(window.location.href).searchParams,R.history.push(Q.get("redirect")||"/"),b.abrupt("return");case 13:console.log(o),V(o),b.next=22;break;case 17:b.prev=17,b.t0=b.catch(0),ne=S.formatMessage({id:"pages.login.failure",defaultMessage:"\u767B\u5F55\u5931\u8D25\uFF0C\u8BF7\u91CD\u8BD5\uFF01"}),console.log(b.t0),oe.ZP.error(ne);case 22:case"end":return b.stop()}},d,null,[[0,17]])}));return function(C){return j.apply(this,arguments)}}(),w=L.code;return(0,t.jsxs)("div",{className:q,children:[(0,t.jsx)(R.Helmet,{children:(0,t.jsxs)("title",{children:[S.formatMessage({id:"menu.login",defaultMessage:"\u767B\u5F55\u9875"}),"- ",N.Z.title]})}),(0,t.jsx)(le,{}),(0,t.jsx)("div",{style:{flex:"1",padding:"32px 0"},children:(0,t.jsxs)(v,{contentStyle:{minWidth:280,maxWidth:"75vw"},logo:(0,t.jsx)("img",{alt:"logo",src:"/indoor-location-web/logo.svg"}),title:S.formatMessage({id:"pages.layouts.userLayout.title"}),subTitle:S.formatMessage({id:"pages.layouts.userLayout.title"}),initialValues:{autoLogin:!0},onFinish:function(){var j=M()(s()().mark(function d(C){return s()().wrap(function(T){for(;;)switch(T.prev=T.next){case 0:return T.next=2,ee(C);case 2:case"end":return T.stop()}},d)}));return function(d){return j.apply(this,arguments)}}(),children:[(0,t.jsx)(fe.Z,{activeKey:z,onChange:de,centered:!0,items:[{key:"account",label:S.formatMessage({id:"pages.login.accountLogin.tab",defaultMessage:"\u8D26\u6237\u5BC6\u7801\u767B\u5F55"})}]}),!(0,Fe.isNil)(w)&&w!==O.OK&&(0,t.jsx)(Ee,{content:S.formatMessage({id:"pages.login.accountLogin.errorMessage",defaultMessage:"\u8D26\u6237\u6216\u5BC6\u7801\u9519\u8BEF"})}),z==="account"&&(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(g.Z,{name:"username",fieldProps:{size:"large",prefix:(0,t.jsx)(X.Z,{})},placeholder:S.formatMessage({id:"pages.register.email",defaultMessage:"\u90AE\u7BB1"}),rules:[{required:!0,message:(0,t.jsx)(R.FormattedMessage,{id:"pages.register.email.required",defaultMessage:"\u8BF7\u8F93\u5165\u90AE\u7BB1!"})}]}),(0,t.jsx)(g.Z.Password,{name:"password",fieldProps:{size:"large",prefix:(0,t.jsx)(Z.Z,{})},placeholder:S.formatMessage({id:"pages.login.password.placeholder",defaultMessage:"\u5BC6\u7801: ant.design"}),rules:[{required:!0,message:(0,t.jsx)(R.FormattedMessage,{id:"pages.login.password.required",defaultMessage:"\u8BF7\u8F93\u5165\u5BC6\u7801\uFF01"})}]})]}),(0,t.jsxs)("div",{style:{marginBottom:24},children:[(0,t.jsx)(ge,{noStyle:!0,name:"autoLogin",children:(0,t.jsx)(R.FormattedMessage,{id:"pages.login.rememberMe",defaultMessage:"\u81EA\u52A8\u767B\u5F55"})}),(0,t.jsx)(se.rU,{to:"/user/register",style:{float:"right"},children:"\u6CE8\u518C"})]})]})}),(0,t.jsx)(B.Z,{})]})},ie=xe},95629:function(ue,D,e){e.d(D,{x4:function(){return A},z2:function(){return X}});var i=e(15009),s=e.n(i),c=e(97857),I=e.n(c),P=e(99289),M=e.n(P),U=e(48141);function A(n,f){return B.apply(this,arguments)}function B(){return B=M()(s()().mark(function n(f,F){return s()().wrap(function(m){for(;;)switch(m.prev=m.next){case 0:return m.abrupt("return",(0,U.request)("/api/v1/login",I()({method:"POST",headers:{"Content-Type":"application/json"},data:f},F||{})));case 1:case"end":return m.stop()}},n)})),B.apply(this,arguments)}function K(n,f){return O.apply(this,arguments)}function O(){return O=_asyncToGenerator(_regeneratorRuntime().mark(function n(f,F){return _regeneratorRuntime().wrap(function(m){for(;;)switch(m.prev=m.next){case 0:return m.abrupt("return",request("/api/v1/refreshToken",_objectSpread({method:"POST",params:_objectSpread({},f)},F||{})));case 1:case"end":return m.stop()}},n)})),O.apply(this,arguments)}function X(n,f){return Z.apply(this,arguments)}function Z(){return Z=M()(s()().mark(function n(f,F){return s()().wrap(function(m){for(;;)switch(m.prev=m.next){case 0:return m.abrupt("return",(0,U.request)("/api/v1/register",I()({method:"POST",headers:{"Content-Type":"application/json"},data:f},F||{})));case 1:case"end":return m.stop()}},n)})),Z.apply(this,arguments)}}}]);
