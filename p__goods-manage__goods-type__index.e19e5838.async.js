"use strict";(self.webpackChunkheyanai_navigation=self.webpackChunkheyanai_navigation||[]).push([[912],{51042:function($,D,e){var P=e(1413),p=e(67294),R=e(42110),o=e(98615),b=function(y,m){return p.createElement(o.Z,(0,P.Z)((0,P.Z)({},y),{},{ref:m,icon:R.Z}))};b.displayName="PlusOutlined",D.Z=p.forwardRef(b)},88923:function($,D,e){e.d(D,{h:function(){return S}});var P=e(97857),p=e.n(P),R=e(15009),o=e.n(R),b=e(99289),r=e.n(b),y=e(59061),m=e(48141),c=e(69400),g=e(90156),M=e(96486),F=e.n(M),T=e(491),K=e(85893);function S(U){var z=(0,m.useIntl)();return(0,K.jsx)(y.Z,p()(p()({accept:"image/png",max:1,transform:function(I){var h,i,j={};return(0,M.set)(j,(h=U.name)!==null&&h!==void 0?h:"picture",(i=(0,M.first)(I))===null||i===void 0?void 0:i.response),j}},U),{},{fieldProps:{listType:"picture-card",onPreview:function(I){c.Z.warning({content:(0,K.jsx)(g.Z,{width:600,src:I.thumbUrl}),width:660-12,icon:" "})},customRequest:function(){var C=r()(o()().mark(function h(i){var j,Z,x,B;return o()().wrap(function(u){for(;;)switch(u.prev=u.next){case 0:return j=i.file,Z=new FormData,Z.append("file",j),u.prev=3,u.next=6,(0,T.cT)(Z);case 6:B=u.sent,console.log(B),(x=i.onSuccess)===null||x===void 0||x.call(i,B.data.url),u.next=14;break;case 11:u.prev=11,u.t0=u.catch(3),console.log(u.t0);case 14:case"end":return u.stop()}},h,null,[[3,11]])}));function I(h){return C.apply(this,arguments)}return I}()}}))}},89512:function($,D,e){e.d(D,{v:function(){return b}});var P=e(48141),p=e(86738),R=e(71577),o=e(85893);function b(r){var y,m,c,g,M=(0,P.useIntl)();return(0,o.jsx)(p.Z,{title:(y=r.title)!==null&&y!==void 0?y:M.formatMessage({id:"app.remove.confirm.title",defaultMessage:"\u4F60\u786E\u5B9A\u8981\u5220\u9664\u6B64\u9879\u5417?"}),description:(m=r.title)!==null&&m!==void 0?m:M.formatMessage({id:"app.remove.confirm.description",defaultMessage:"\u5220\u9664\u6B64\u9879"}),okButtonProps:{loading:r.loading},getPopupContainer:r.getPopupContainer,onConfirm:function(){var T;return r==null||(T=r.onClick)===null||T===void 0?void 0:T.call(r)},children:!r.children&&(0,o.jsx)(R.ZP,{type:(c=r.type)!==null&&c!==void 0?c:"link",size:(g=r.size)!==null&&g!==void 0?g:"small",disabled:r.disabled,children:(0,o.jsx)(P.FormattedMessage,{id:"app.remove",defaultMessage:"\u5220\u9664"})})})}},60927:function($,D,e){e.r(D),e.d(D,{default:function(){return B}});var P=e(97857),p=e.n(P),R=e(13769),o=e.n(R),b=e(89512),r=e(17867),y=e(69851),m=e(90930),c=e(45446),g=e(48141),M=e(54689),F=e(90156),T=e(71577),K=e(5574),S=e.n(K),U=e(88923),z=e(51042),C=e(37476),I=e(5966),h=e(12029),i=e(85893);function j(_){var u=(0,g.useIntl)(),O=h.Z.useForm(),f=S()(O,1),W=f[0],L=(0,g.useRequest)(r.Ri,{manual:!0,onSuccess:function(n){if(n){var s;M.Z.success({message:u.formatMessage({id:"app.add.success",defaultMessage:"\u65B0\u5EFA\u6210\u529F"})}),(s=_.refresh)===null||s===void 0||s.call(_)}}}),A=L.run;return(0,i.jsxs)(C.Y,{title:u.formatMessage({id:"pages.goods-manage.goods.type.add",defaultMessage:"\u6DFB\u52A0\u7269\u54C1\u7C7B\u578B"}),form:W,layout:"horizontal",labelCol:{xs:6},wrapperCol:{xs:16},modalProps:{destroyOnClose:!0,onCancel:function(){return console.log("run")}},trigger:(0,i.jsx)(T.ZP,{type:"primary",icon:(0,i.jsx)(z.Z,{}),children:u.formatMessage({id:"app.action.add",defaultMessage:"\u65B0\u5EFA"})}),onFinish:function(n){return A(n)},children:[(0,i.jsx)(I.Z,{name:"typeName",label:u.formatMessage({id:"pages.goods-manage.goods.type.name",defaultMessage:"\u7C7B\u578B\u540D\u79F0"}),rules:[{required:!0,message:u.formatMessage({id:"pages.goods-manage.goods.info.type.required.failure",defaultMessage:"\u8BF7\u8F93\u5165\u7269\u54C1\u7C7B\u578B"})}]}),(0,i.jsx)(U.h,{name:"picture",label:u.formatMessage({id:"pages.goods-manage.goods.type.icon",defaultMessage:"\u7C7B\u578B\u56FE\u6807"})})]})}function Z(_){var u,O,f=(0,g.useIntl)(),W=h.Z.useForm(),L=S()(W,1),A=L[0],t=(0,g.useRequest)(r._T,{manual:!0,onSuccess:function(l){if(l){var a;M.Z.success({message:f.formatMessage({id:"app.edit.success",defaultMessage:"\u66F4\u65B0\u6210\u529F"})}),(a=_.refresh)===null||a===void 0||a.call(_)}}}),n=t.run;return(0,i.jsxs)(C.Y,{title:f.formatMessage({id:"pages.goods-manage.goods.type.add",defaultMessage:"\u6DFB\u52A0\u7269\u54C1\u7C7B\u578B"}),layout:"horizontal",labelCol:{xs:6},wrapperCol:{xs:16},form:A,modalProps:{destroyOnClose:!0,onCancel:function(){return console.log("run")}},trigger:(0,i.jsx)(T.ZP,{size:"small",type:"link",children:f.formatMessage({id:"app.action.edit",defaultMessage:"\u7F16\u8F91"})}),onFinish:function(l){return n({typeId:_.record.typeId},p()({},l))},children:[(0,i.jsx)(I.Z,{name:"typeName",initialValue:_.record.typeName,label:f.formatMessage({id:"pages.goods-manage.goods.type.name",defaultMessage:"\u7C7B\u578B\u540D\u79F0"}),rules:[{required:!0,message:f.formatMessage({id:"pages.goods-manage.goods.info.type.required.failure",defaultMessage:"\u8BF7\u8F93\u5165\u7269\u54C1\u7C7B\u578B"})}]}),(0,i.jsx)(U.h,{initialValue:[{uid:Date.now()+"",response:(u=_.record)===null||u===void 0?void 0:u.picture,thumbUrl:(O=_.record)===null||O===void 0?void 0:O.picture}],name:"picture",label:f.formatMessage({id:"pages.goods-manage.goods.type.icon",defaultMessage:"\u7C7B\u578B\u56FE\u6807"})})]})}var x=["current","pageSize"];function B(){var _=(0,g.useIntl)(),u=(0,g.useRequest)(r.R8,{manual:!0,fetchKey:function(n){return n.typeId+""},onSuccess:function(n){n&&M.Z.success({message:_.formatMessage({id:"app.remove.success",defaultMessage:"\u5220\u9664\u6210\u529F"})})}}),O=u.run,f=u.fetches,W=(0,g.useRequest)(r.hC,{manual:!0,formatResult:function(n){return(0,y.LF)(n)}}),L=W.run,A=[{title:_.formatMessage({id:"pages.goods-manage.goods.info.name",defaultMessage:"\u540D\u79F0"}),dataIndex:"typeName",search:!1},{title:_.formatMessage({id:"pages.goods-manage.goods.info.icon",defaultMessage:"\u56FE\u6807"}),search:!1,dataIndex:"picture",render:function(n,s){return(0,i.jsx)(F.Z,{width:32,height:32,src:s.picture})}},{title:_.formatMessage({id:"app.createTime",defaultMessage:"\u521B\u5EFA\u65F6\u95F4"}),dataIndex:"createTime",valueType:"dateTime",search:!1},{title:_.formatMessage({id:"app.action",defaultMessage:"\u64CD\u4F5C"}),search:!1,render:function(n,s,l,a){var d;return(0,i.jsxs)(T.ZP.Group,{children:[(0,i.jsx)(Z,{record:s,refresh:a==null?void 0:a.reload},"edit"),(0,i.jsx)(b.v,{disabled:!s.typeId,loading:f==null||(d=f[s.typeId])===null||d===void 0?void 0:d.loading,onClick:function(){return O({typeId:s.typeId}).then(function(){return a==null?void 0:a.reload()})}})]})}}];return(0,i.jsx)(m._z,{childrenContentStyle:{padding:20},children:(0,i.jsx)(c.Z,{options:{setting:!1},columns:A,search:!1,request:function(n){var s=n.current,l=n.pageSize,a=o()(n,x);return L(p()({current:s+"",size:l+""},a))},toolBarRender:function(n){return[(0,i.jsx)(j,{refresh:n==null?void 0:n.reload},"add")]}})})}},17867:function($,D,e){e.d(D,{Ec:function(){return I},FD:function(){return z},R8:function(){return L},Ri:function(){return u},_T:function(){return f},dx:function(){return S},hC:function(){return B},yy:function(){return i}});var P=e(13769),p=e.n(P),R=e(15009),o=e.n(R),b=e(97857),r=e.n(b),y=e(99289),m=e.n(y),c=e(48141),g=["thingId"],M=["thingId"],F=null,T=["typeId"],K=["typeId"];function S(t,n){return U.apply(this,arguments)}function U(){return U=m()(o()().mark(function t(n,s){return o()().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.abrupt("return",(0,c.request)("/api/v1/things",r()({method:"GET",params:r()({current:"1",size:"10"},n)},s||{})));case 1:case"end":return a.stop()}},t)})),U.apply(this,arguments)}function z(t,n){return C.apply(this,arguments)}function C(){return C=m()(o()().mark(function t(n,s){return o()().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.abrupt("return",(0,c.request)("/api/v1/things",r()({method:"POST",headers:{"Content-Type":"application/json"},data:n},s||{})));case 1:case"end":return a.stop()}},t)})),C.apply(this,arguments)}function I(t,n,s){return h.apply(this,arguments)}function h(){return h=m()(o()().mark(function t(n,s,l){var a,d;return o()().wrap(function(v){for(;;)switch(v.prev=v.next){case 0:return a=n.thingId,d=p()(n,g),v.abrupt("return",(0,c.request)("/api/v1/things/".concat(a),r()({method:"PUT",headers:{"Content-Type":"application/json"},params:r()({},d),data:s},l||{})));case 2:case"end":return v.stop()}},t)})),h.apply(this,arguments)}function i(t,n){return j.apply(this,arguments)}function j(){return j=m()(o()().mark(function t(n,s){var l,a;return o()().wrap(function(E){for(;;)switch(E.prev=E.next){case 0:return l=n.thingId,a=p()(n,M),E.abrupt("return",(0,c.request)("/api/v1/things/".concat(l),r()({method:"DELETE",params:r()({},a)},s||{})));case 2:case"end":return E.stop()}},t)})),j.apply(this,arguments)}function Z(t,n){return x.apply(this,arguments)}function x(){return x=_asyncToGenerator(_regeneratorRuntime().mark(function t(n,s){var l,a,d;return _regeneratorRuntime().wrap(function(v){for(;;)switch(v.prev=v.next){case 0:return l=n.thingId,a=n.tag,d=_objectWithoutProperties(n,F),v.abrupt("return",request("/api/v1/things/".concat(l,"/").concat(a),_objectSpread({method:"DELETE",params:_objectSpread({},d)},s||{})));case 2:case"end":return v.stop()}},t)})),x.apply(this,arguments)}function B(t,n){return _.apply(this,arguments)}function _(){return _=m()(o()().mark(function t(n,s){return o()().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.abrupt("return",(0,c.request)("/api/v1/thingTypes",r()({method:"GET",params:r()({current:"1",size:"10"},n)},s||{})));case 1:case"end":return a.stop()}},t)})),_.apply(this,arguments)}function u(t,n){return O.apply(this,arguments)}function O(){return O=m()(o()().mark(function t(n,s){var l;return o()().wrap(function(d){for(;;)switch(d.prev=d.next){case 0:return d.next=2,(0,c.request)("/api/v1/thingTypes",r()({method:"POST",headers:{"Content-Type":"application/json"},data:n},s||{}));case 2:return l=d.sent,d.abrupt("return",l);case 4:case"end":return d.stop()}},t)})),O.apply(this,arguments)}function f(t,n,s){return W.apply(this,arguments)}function W(){return W=m()(o()().mark(function t(n,s,l){var a,d;return o()().wrap(function(v){for(;;)switch(v.prev=v.next){case 0:return a=n.typeId,d=p()(n,T),v.abrupt("return",(0,c.request)("/api/v1/thingTypes/".concat(a),r()({method:"PUT",headers:{"Content-Type":"application/json"},params:r()({},d),data:s},l||{})));case 2:case"end":return v.stop()}},t)})),W.apply(this,arguments)}function L(t,n){return A.apply(this,arguments)}function A(){return A=m()(o()().mark(function t(n,s){var l,a;return o()().wrap(function(E){for(;;)switch(E.prev=E.next){case 0:return l=n.typeId,a=p()(n,K),E.abrupt("return",(0,c.request)("/api/v1/thingTypes/".concat(l),r()({method:"DELETE",params:r()({},a)},s||{})));case 2:case"end":return E.stop()}},t)})),A.apply(this,arguments)}}}]);
