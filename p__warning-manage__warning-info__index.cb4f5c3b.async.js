"use strict";(self.webpackChunkheyanai_navigation=self.webpackChunkheyanai_navigation||[]).push([[197],{92854:function(T,h,e){e.r(h),e.d(h,{default:function(){return z}});var D=e(5574),P=e.n(D),g=e(45499),d=e(67294),n=e(85893);function o(a){var r=d.useRef(null),t=d.useRef();return d.useEffect(function(){t.current=new g.by(r.current,{appendPadding:10,data:a.data,angleField:"count",colorField:"label",radius:1,innerRadius:.6,label:{type:"inner",offset:"-50%",content:"{value}",style:{textAlign:"center",fontSize:14}},interactions:[{type:"element-selected"},{type:"element-active"}],statistic:{title:!1,content:{style:{whiteSpace:"pre-wrap",overflow:"hidden",textOverflow:"ellipsis"}}}}),t.current.render()},[]),d.useEffect(function(){var l;(l=t.current)===null||l===void 0||l.changeData(a.data)},[a.data]),(0,n.jsx)("div",{ref:r,style:{height:600}})}var x=e(71466);function u(a){var r=d.useRef(null),t=d.useRef(),l=(0,x.q)(a.data);return d.useEffect(function(){t.current=new g.$Q(r.current,{data:l,xField:"frequency",yField:"deviceId",seriesField:"type",color:function(j){var s=j.type;return v()},legend:!1,maxBarWidth:30}),t.current.render()},[]),d.useEffect(function(){var i;(i=t.current)===null||i===void 0||i.changeData(l)},[a.data]),(0,n.jsx)("div",{ref:r,style:{height:600}})}function v(){for(var a="0123456789ABCDEF",r="#",t=0;t<6;t++)r+=a[Math.floor(Math.random()*16)];return r}var R=e(59163),C=e(35312),Z=e(90930),$=e(71230),E=e(15746),I=e(12029),b=e(15457),O=e(4393),M=e(27484),p=e.n(M),B=e(96486);function z(){var a,r,t=(0,C.useRequest)(R.QP,{manual:!0,formatResult:function(s){var c,m,f,y,A=(c=(m=s.data)===null||m===void 0?void 0:m.items)!==null&&c!==void 0?c:[],S=(0,B.chain)((f=(y=s.data)===null||y===void 0?void 0:y.items)!==null&&f!==void 0?f:[]).groupBy(function(F){return F.type}).map(function(F,U){return{label:U,count:F.length}}).value();return{barData:A,pieData:S}}}),l=t.run,i=t.data;return d.useEffect(function(){l({current:"1",size:"10000000",startTime:p()().startOf("day").unix(),endTime:p()().endOf("day").unix()})},[]),(0,n.jsx)(Z._z,{childrenContentStyle:{padding:20},children:(0,n.jsxs)($.Z,{children:[(0,n.jsx)(E.Z,{span:"24",children:(0,n.jsx)(I.Z,{onValuesChange:function(s){if(s.dateRanger){var c,m=(c=s.dateRanger)!==null&&c!==void 0?c:[],f=P()(m,2),y=f[0],A=f[1];l({current:"1",size:"10000000",startTime:y.unix(),endTime:A.unix()})}},children:(0,n.jsx)(I.Z.Item,{name:"dateRanger",children:(0,n.jsx)(b.Z.RangePicker,{disabledDate:function(s){return s&&s<p()().endOf("day").add(-1,"month").endOf("day")}})})})}),(0,n.jsx)(E.Z,{span:"12",children:(0,n.jsx)(O.Z,{children:(0,n.jsx)(u,{data:(a=i==null?void 0:i.barData)!==null&&a!==void 0?a:[]})})}),(0,n.jsx)(E.Z,{span:"12",children:(0,n.jsx)(O.Z,{children:(0,n.jsx)(o,{data:(r=i==null?void 0:i.pieData)!==null&&r!==void 0?r:[]})})})]})})}},71466:function(T,h,e){e.d(h,{k:function(){return d},q:function(){return g}});var D=e(5574),P=e.n(D);function g(n){var o={};n.forEach(function(u){u.deviceId!=null&&(u.deviceId in o?o[u.deviceId]++:o[u.deviceId]=1)});var x=Object.entries(o).map(function(u){var v=P()(u,2),R=v[0],C=v[1];return{deviceId:R,frequency:Number(C)}}).sort(function(u,v){return v.frequency-u.frequency});return x}function d(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(n){var o=Math.random()*16|0,x=n==="x"?o:o&3|8;return x.toString(16)})}}}]);
